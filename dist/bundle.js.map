{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/context.js","webpack:///./src/Config.js","webpack:///./src/Utils.js","webpack:///./src/index.js","webpack:///./src/App.js","webpack:///./node_modules/events/events.js","webpack:///./src/startup.js","webpack:///./src/World.js","webpack:///./src/Tokens.js","webpack:///./src/Ways.js","webpack:///./src/Rewards.js","webpack:///./src/Scoreboard.js","webpack:///./src/StartBtn.js","webpack:///./src/Hints.js","webpack:///./src/HintGroup.js","webpack:///./src/BigTokens.js","webpack:///./src/Score.js","webpack:///./src/PlayRewPanels.js","webpack:///./src/AudioBtn.js","webpack:///./src/InputManager.js","webpack:///./src/GameManager.js","webpack:///./src/Synth.js","webpack:///./src/Sky.js","webpack:///./src/shaders/sky.vert","webpack:///./src/shaders/sky.frag"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","app","App","instance","this","bgColor","bgColorBack","wayColor","wayColorOver","wayLength","scoreColor","scoreColorOff","highscoreColor","colorArr","lerpSpeed","maxHints","Utils","array","sort","Math","random","require","isVRActive","time","prevTime","window","performance","now","renderer","THREE","WebGLRenderer","antialias","setPixelRatio","devicePixelRatio","setSize","innerWidth","innerHeight","vr","enabled","document","body","appendChild","domElement","WEBVR","createButton","referenceSpaceType","scene","Scene","background","Color","Config","fog","Fog","camera","PerspectiveCamera","layers","enable","addEventListener","resize","animate","EventEmitter","aspect","updateProjectionMatrix","setAnimationLoop","render","timeNow","delta","update","isPresenting","emit","inputManager","updateVR","gameManager","synth","dt","traverse","obj","ReflectOwnKeys","R","Reflect","ReflectApply","apply","target","receiver","args","Function","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","concat","NumberIsNaN","Number","isNaN","init","_events","undefined","_eventsCount","_maxListeners","defaultMaxListeners","$getMaxListeners","that","_addListener","type","listener","prepend","events","existing","warning","TypeError","newListener","unshift","push","length","warned","w","Error","String","emitter","count","console","warn","onceWrapper","arguments","fired","removeListener","wrapFn","_onceWrap","state","wrapped","_listeners","unwrap","evlistener","arr","ret","Array","unwrapListeners","arrayClone","listenerCount","copy","set","arg","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","error","er","err","message","context","handler","len","listeners","addListener","on","prependListener","once","prependOnceListener","list","position","originalListener","shift","index","pop","spliceOne","off","removeAllListeners","keys","rawListeners","eventNames","InputManager","scoreboard","Scoreboard","add","world","World","rewards","Rewards","GameManager","Synth","sky","Sky","y","tokens","Tokens","ways","Ways","Group","tokensInitialPosZ","z","addTokens","setCorrectRememberedWay","shuffleTokens","reorderTokens","setStoredTokens","shuffleStoredTokens","solve","solveRemembering","postSolved","tokenGeometry","RingBufferGeometry","tokenMaterial","MeshBasicMaterial","color","side","DoubleSide","token","Mesh","x","tokensStore","children","shuffle","tmpColor","material","j","actualWay","correcName","visible","correctWay","addWays","startgame","endgame","countEffect","wayGeometry","PlaneBufferGeometry","rotateX","PI","wayMaterial","transparent","way","addCollider","removeCollider","opacity","val","radius","addRewards","addErrorReward","showCorrectReward","resetAtNewCycle","solveERROR","rewardMaterial","LineBasicMaterial","rewardGeometry","getRewardGeometry","reward","Line","crossShape","Shape","moveTo","lineTo","geometry","ShapeGeometry","mesh","scale","correctName","segmentCount","Geometry","theta","vertices","Vector3","cos","sin","startBtn","StartBtn","hints","Hints","bigTokens","BigTokens","score","Score","playRewPanels","PlayRewPanels","audioBtn","AudioBtn","interactiveObj","CircleBufferGeometry","Object3D","hintGroup","HintGroup","setHints","gameStatus","cycle","cyclesPerRound","remembered","updateHint","hintGeometry","hintMaterial","hint","hintMaterialTmp","geometryTmp","hintTmp","tokenAdded","setBigTokens","geo","mat","hexStr","getHexString","querySelector","setAttribute","canvas","createElement","width","height","style","display","getContext","font","textAlign","toString","fillStyle","actualScore","fillText","map","CanvasTexture","plane","setScore","highscore","replay","play","clearRect","needsUpdate","valStr","stop","rew","beginPath","strokeStyle","lineWidth","localStorage","getItem","audioActive","setAudio","shuffleAudio","setItem","stroke","toggleVR","iOS","navigator","platform","test","raycaster","Raycaster","intersected","tempMatrix","Matrix4","mouse","Vector2","intersection","colliders","swipe","sX","sY","eX","eY","addControllers","onDocumentMouseMove","onClick","onTouchStart","onTouchMove","onTouchEnd","bool","controller1","controller2","getController","onSelectStart","onSelectEnd","geometryHelper","BufferGeometry","setFromPoints","materialHelper","line","clone","collider","indexOf","splice","forEach","event","controller","intersections","getIntersections","substr","newWay","parseInt","preventDefault","targetTouches","pageX","pageY","cursor","doFallbackRaycast","touches","cleanIntersected","setFromCamera","intersectObjects","e","screenX","screenY","identity","extractRotation","matrixWorld","ray","origin","setFromMatrixPosition","direction","applyMatrix4","userData","selected","getObjectByName","distance","opt","targetXpos","resetGameSettings","wayChanged","wayLeft","wayRight","correctWayChanged","tokensShuffled","setCorrectName","solveOK","solveRememberingOK","solveRememberingERROR","newCycle","solved","errorOnSolved","gameSpeed","backSpeed","caught","setCorrectWay","modBack","indexStoredTokens","placeStoredTokens","setDefaultTheme","newRound","abs","catchingTick","backTick","rememberingTick","newScale","lerp","floor","tokensChildren","gameTick","getTargetX","AudioContext","webkitAudioContext","audioContext","gameActive","actualTempo","backTempo","tempo","counter","loopSeq","reverseSeq","slice","reverse","errorSeq","okSeq","clickSeq","activeSeq","sequencePoint","actualLoopPoint","playEvent","speedChanged","osc4","createOscillator","frequency","log","connect","destination","start","currentTime","newSpeed","min","v","playNote","tick"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","import App from './App'\n\nconst app = new App()\n\nmodule.exports = {\n  app\n}\n","let instance = null\n// Singleton pattern in ES6 example\nclass Config {\n  constructor () {\n    if (!instance) {\n      this.bgColor = 0x111111\n      this.bgColorBack = 0x121212\n      this.wayColor = 0x555555\n      this.wayColorOver = 0x666666\n      this.wayLength = 200\n      this.scoreColor = 0xffffff\n      this.scoreColorOff = 0x444444\n      this.highscoreColor = 0xffcc00\n      this.colorArr = [\n        0xfb39ca,\n        0xfdca2a,\n        0x2bca20,\n        0xfc9125,\n        0x0d6afc,\n        0x6419cb,\n        0xffffff,\n        0xfa0018\n      ]\n      this.lerpSpeed = 0.9\n      this.maxHints = 6\n      instance = this\n    }\n    return instance\n  }\n}\n\nexport default new Config()\n","let instance = null\nclass Utils {\n  constructor () {\n    if (!instance) {\n      instance = this\n    }\n    return instance\n  }\n\n  shuffle (array) {\n    array.sort(() => Math.random() - 0.5)\n  }\n}\n\nexport default new Utils()\n","require('./context')\nrequire('./startup')()\n","import { EventEmitter } from 'events'\nimport Config from './Config'\n\nexport default class App extends EventEmitter {\n  constructor (opt = {}) {\n    super()\n\n    this.isVRActive = false\n    this.time = 0\n    this.prevTime = window.performance.now()\n    this.renderer = new THREE.WebGLRenderer({ antialias: true })\n    this.renderer.setPixelRatio(window.devicePixelRatio)\n    this.renderer.setSize(window.innerWidth, window.innerHeight)\n    this.renderer.vr.enabled = true\n\n    document.body.appendChild(this.renderer.domElement)\n\n    // WebXR\n    document.body.appendChild(THREE.WEBVR.createButton(this.renderer, { referenceSpaceType: 'local' }))\n\n    this.scene = new THREE.Scene()\n    this.scene.background = new THREE.Color(Config.bgColor)\n    this.scene.fog = new THREE.Fog(Config.bgColor, 0, 45)\n\n    this.camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000)\n    this.camera.layers.enable(1)\n\n    window.addEventListener('resize', () => this.resize())\n\n    this.animate()\n  }\n\n  resize () {\n    this.camera.aspect = window.innerWidth / window.innerHeight\n    this.camera.updateProjectionMatrix()\n\n    this.renderer.setSize(window.innerWidth, window.innerHeight)\n  }\n\n  animate () {\n    this.renderer.setAnimationLoop(this.render.bind(this))\n  }\n\n  render () {\n    const timeNow = window.performance.now()\n    const delta = (timeNow - this.prevTime) / 1000\n    this.prevTime = timeNow\n    this.time += delta\n    this.update(delta, this.time)\n\n    if (this.isVRActive !== this.renderer.vr.isPresenting()) {\n      this.emit('toggleVR', this.renderer.vr.isPresenting())\n      this.isVRActive = this.renderer.vr.isPresenting()\n      if (this.isVRActive) {\n        Config.lerpSpeed = 0.75\n      } else {\n        Config.lerpSpeed = 0.9\n      }\n    }\n    if (this.renderer.vr.isPresenting()) {\n      this.inputManager.updateVR()\n    }\n\n    this.gameManager.update(delta)\n    this.synth.update(delta)\n\n    this.renderer.render(this.scene, this.camera)\n  }\n\n  update (dt = 0, time = 0) {\n    // recursively tell all child objects to update\n    this.scene.traverse(obj => {\n      if (typeof obj.update === 'function') {\n        obj.update(dt, time)\n      }\n    })\n\n    return this\n  }\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction $getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return $getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = $getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  var args = [];\n  for (var i = 0; i < arguments.length; i++) args.push(arguments[i]);\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    ReflectApply(this.listener, this.target, args);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      if (typeof listener !== 'function') {\n        throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n      }\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      if (typeof listener !== 'function') {\n        throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n      }\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n","import { app } from './context'\nimport World from './World'\nimport Rewards from './Rewards'\nimport Scoreboard from './Scoreboard'\n\nimport InputManager from './InputManager'\nimport GameManager from './GameManager'\nimport Synth from './Synth'\nimport Sky from './Sky'\n\nmodule.exports = function () {\n  app.inputManager = new InputManager()\n  const scoreboard = new Scoreboard()\n  app.scene.add(scoreboard)\n  const world = new World()\n  app.scene.add(world)\n  const rewards = new Rewards()\n  app.scene.add(rewards)\n  app.gameManager = new GameManager({\n    world: world,\n    rewards: rewards,\n    scoreboard: scoreboard\n  })\n  const synth = new Synth()\n  app.synth = synth\n  const sky = new Sky()\n  app.scene.add(sky)\n}\n","import Tokens from './Tokens'\nimport Ways from './Ways'\n\nexport default class World extends THREE.Group {\n  constructor () {\n    super()\n    this.position.y = -1.7\n    this.tokens = new Tokens()\n    this.ways = new Ways()\n    this.add(this.tokens)\n    this.add(this.ways)\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\nimport Config from './Config'\nimport Utils from './Utils'\n\nexport default class Tokens extends THREE.Group {\n  constructor () {\n    super()\n    this.app = app\n    this.tokensInitialPosZ = 50\n    this.position.z = -this.tokensInitialPosZ\n    this.addTokens()\n    this.app.on('setCorrectRememberedWay', this.setCorrectRememberedWay.bind(this))\n    this.app.on('shuffleTokens', this.shuffleTokens.bind(this))\n    this.app.on('reorderTokens', this.reorderTokens.bind(this))\n    this.app.on('setStoredTokens', this.setStoredTokens.bind(this))\n    this.app.on('shuffleStoredTokens', this.shuffleStoredTokens.bind(this))\n    this.app.on('solve', this.solve.bind(this))\n    this.app.on('solveRemembering', this.solveRemembering.bind(this))\n    this.app.on('postSolved', this.postSolved.bind(this))\n  }\n\n  addTokens () {\n    for (let i = 0; i < 5; i++) {\n      let tokenGeometry\n      switch (i) {\n        case 0:\n          tokenGeometry = new THREE.RingBufferGeometry(0.25, 0.35, 3)\n          break\n        case 1:\n          tokenGeometry = new THREE.RingBufferGeometry(0.25, 0.35, 4)\n          break\n        case 2:\n          tokenGeometry = new THREE.RingBufferGeometry(0.25, 0.35, 5)\n          break\n        case 3:\n          tokenGeometry = new THREE.RingBufferGeometry(0.25, 0.35, 6)\n          break\n        case 4:\n          tokenGeometry = new THREE.RingBufferGeometry(0.25, 0.35, 32)\n          break\n      }\n      const tokenMaterial = new THREE.MeshBasicMaterial({ color: 0xffffff, side: THREE.DoubleSide })\n      const token = new THREE.Mesh(tokenGeometry, tokenMaterial)\n      token.name = i\n      token.position.x = i * 2 - 4\n      token.position.y = 1.5\n      this.app.emit('tokenAdded', tokenGeometry, tokenMaterial, i)\n      this.add(token)\n    }\n    this.app.emit('allTokensAdded')\n  }\n\n  setCorrectRememberedWay (tokensStore, index) {\n    for (var i = 0; i < this.children.length; i++) {\n      if (this.children[i].name === tokensStore[index][1][0]) {\n        this.app.emit('correctWayChanged', (this.children[i].position.x + 4) / 2)\n        this.app.emit('showCorrectReward', this.children[i].name)\n      }\n    }\n  }\n\n  shuffleTokens () {\n    Utils.shuffle(this.children)\n    for (var i = 0; i < this.children.length; i++) {\n      this.children[i].position.x = i * 2 - 4\n      var tmpColor = Config.colorArr[i]\n      this.children[i].material.color.set(tmpColor)\n    }\n    this.app.emit('tokensShuffled', this.children)\n  }\n\n  setStoredTokens () {\n    this.position.z = this.tokensInitialPosZ / 2\n  }\n\n  shuffleStoredTokens () {\n    this.position.z = -this.tokensInitialPosZ\n  }\n\n  reorderTokens (tokensStore, i, index) {\n    for (var j = 0; j < this.children.length; j++) {\n      if (this.children[j].name === tokensStore[index][0][i][0]) {\n        this.children[j].position.x = i * 2 - 4\n        this.children[j].material.color.set(tokensStore[index][0][i][1])\n      }\n    }\n  }\n\n  solve (actualWay, correcName) {\n    if (this.children[actualWay].name === correcName) {\n      this.app.emit('solveOK')\n    } else {\n      this.app.emit('solveERROR')\n    }\n    this.visible = false\n  }\n\n  solveRemembering (actualWay, correctWay) {\n    if (this.children[actualWay].name === this.children[correctWay].name) {\n      this.app.emit('solveRememberingOK')\n    } else {\n      this.app.emit('solveRememberingERROR')\n    }\n    this.visible = false\n  }\n\n  postSolved () {\n    this.visible = true\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\nimport Config from './Config'\n\nexport default class Ways extends THREE.Group {\n  constructor () {\n    super()\n    this.app = app\n    this.addWays()\n    this.app.on('startgame', this.startgame.bind(this))\n    this.app.on('endgame', this.endgame.bind(this))\n    this.app.on('synth', this.synth.bind(this))\n\n    this.countEffect = 0\n  }\n\n  addWays () {\n    const wayGeometry = new THREE.PlaneBufferGeometry(1.9, Config.wayLength, 1, 1)\n    wayGeometry.rotateX(-Math.PI / 2)\n    for (let i = 0; i < 5; i++) {\n      const wayMaterial = new THREE.MeshBasicMaterial({ transparent: true, color: Config.wayColor })\n      const way = new THREE.Mesh(wayGeometry, wayMaterial)\n      way.name = 'way' + i\n      way.position.x = (i * 2) - 4\n      way.position.y = 0.1\n      way.position.z = 0\n      // this.app.inputManager.addCollider(way)\n      this.add(way)\n    }\n  }\n\n  startgame () {\n    for (let i = 0; i < this.children.length; i++) {\n      this.app.inputManager.addCollider(this.children[i])\n    }\n  }\n\n  endgame () {\n    for (let i = 0; i < this.children.length; i++) {\n      this.app.inputManager.removeCollider(this.children[i])\n    }\n    for (let i = 0; i < this.children.length; i++) {\n      this.children[i].material.opacity = 1\n    }\n  }\n\n  synth (val) {\n    for (let i = 0; i < this.children.length; i++) {\n      this.children[i].material.opacity = 1\n    }\n    this.children[this.countEffect].material.opacity = 1 - ((val * 4) / 100)\n    if (this.countEffect >= this.children.length - 1) {\n      this.countEffect = 0\n    } else {\n      this.countEffect += 1\n    }\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\n// import Config from './Config'\n\nexport default class Rewards extends THREE.Group {\n  constructor () {\n    super()\n    this.app = app\n    this.radius = 0.05\n    this.position.z = -0.5\n    this.position.y = -0.05\n    this.addRewards()\n    this.addErrorReward()\n    this.visible = false\n    this.app.on('showCorrectReward', this.showCorrectReward.bind(this))\n    this.app.on('resetAtNewCycle', this.resetAtNewCycle.bind(this))\n    this.app.on('solve', this.solve.bind(this))\n    this.app.on('solveERROR', this.solveERROR.bind(this))\n    this.app.on('solveRemembering', this.solve.bind(this))\n    this.app.on('solveRememberingERROR', this.solveERROR.bind(this))\n    this.app.on('endgame', this.endgame.bind(this))\n  }\n\n  addRewards () {\n    const rewardMaterial = new THREE.LineBasicMaterial({ color: 0xffffff })\n    for (let i = 0; i < 5; i++) {\n      let rewardGeometry\n      switch (i) {\n        case 0:\n          rewardGeometry = this.getRewardGeometry(3)\n          break\n        case 1:\n          rewardGeometry = this.getRewardGeometry(4)\n          break\n        case 2:\n          rewardGeometry = this.getRewardGeometry(5)\n          break\n        case 3:\n          rewardGeometry = this.getRewardGeometry(6)\n          break\n        case 4:\n          rewardGeometry = this.getRewardGeometry(32)\n          break\n      }\n      const reward = new THREE.Line(rewardGeometry, rewardMaterial)\n      reward.name = i\n      this.add(reward)\n    }\n  }\n\n  addErrorReward () {\n    const crossShape = new THREE.Shape()\n    crossShape.moveTo(0, -7.5)\n    crossShape.lineTo(-32.5, -40)\n    crossShape.lineTo(-40, -32.5)\n    crossShape.lineTo(-7.5, 0)\n    crossShape.lineTo(-40, 32.5)\n    crossShape.lineTo(-32.5, 40)\n    crossShape.lineTo(0, 10)\n    crossShape.lineTo(32.5, 40)\n    crossShape.lineTo(40, 32.5)\n    crossShape.lineTo(10, 0)\n    crossShape.lineTo(40, -32.5)\n    crossShape.lineTo(32.5, -40)\n    crossShape.lineTo(0, -7.5)\n    const geometry = new THREE.ShapeGeometry(crossShape)\n    const material = new THREE.MeshBasicMaterial()\n    const mesh = new THREE.Mesh(geometry, material)\n    mesh.scale.set(this.radius * 0.02, this.radius * 0.02, this.radius * 0.02)\n    this.add(mesh)\n  }\n\n  showCorrectReward (correctName) {\n    for (var i = 0; i < this.children.length; i++) {\n      if (this.children[i].name === correctName) {\n        this.children[i].visible = true\n      } else {\n        this.children[i].visible = false\n      }\n    }\n  }\n\n  getRewardGeometry (segmentCount) {\n    var rewardGeometry = new THREE.Geometry()\n    for (var i = 0; i <= segmentCount; i++) {\n      var theta = (i / segmentCount) * Math.PI * 2\n      rewardGeometry.vertices.push(\n        new THREE.Vector3(\n          Math.cos(theta) * this.radius,\n          Math.sin(theta) * this.radius,\n          0))\n    }\n    return rewardGeometry\n  }\n\n  resetAtNewCycle () {\n    this.position.z = -0.5\n    this.visible = false\n  }\n\n  solve () {\n    this.scale.set(0.1, 0.1, 0.1)\n    this.visible = true\n  }\n\n  solveERROR () {\n    for (var i = 0; i < this.children.length; i++) {\n      if (i === this.children.length - 1) {\n        this.children[i].visible = true\n      } else {\n        this.children[i].visible = false\n      }\n    }\n  }\n\n  endgame () {\n    this.visible = false\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\nimport StartBtn from './StartBtn'\nimport Hints from './Hints'\nimport BigTokens from './BigTokens'\nimport Score from './Score'\nimport PlayRewPanels from './PlayRewPanels'\nimport AudioBtn from './AudioBtn'\n\nexport default class Scoreboard extends THREE.Group {\n  constructor () {\n    super()\n    this.app = app\n    this.position.set(0, 1.25, -5)\n\n    this.startBtn = new StartBtn()\n    this.startBtn.position.set(0, 0.2, 0)\n    this.add(this.startBtn)\n\n    this.hints = new Hints()\n    this.hints.position.set(0, 1, 0)\n    this.hints.visible = false\n    this.add(this.hints)\n\n    this.bigTokens = new BigTokens()\n    this.bigTokens.position.set(0, 0.5, 0)\n    this.bigTokens.visible = false\n    this.add(this.bigTokens)\n\n    this.score = new Score()\n    this.score.position.set(0, 1.5, 0)\n    this.add(this.score)\n\n    this.playRewPanels = new PlayRewPanels()\n    this.playRewPanels.position.set(0, 0.5, 0)\n    this.playRewPanels.visible = false\n    this.add(this.playRewPanels)\n\n    this.audioBtn = new AudioBtn()\n    this.audioBtn.position.set(0, 2.25, 0)\n    this.add(this.audioBtn)\n\n    this.app.on('startgame', this.startgame.bind(this))\n    this.app.on('endgame', this.endgame.bind(this))\n  }\n\n  startgame () {\n    this.startBtn.interactiveObj.visible = false\n  }\n\n  endgame () {\n    this.score.visible = true\n    this.startBtn.interactiveObj.visible = true\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\nimport Config from './Config'\n\nexport default class StartBtn extends THREE.Object3D {\n  constructor () {\n    super()\n    this.app = app\n    this.interactiveObj = new THREE.Mesh(\n      new THREE.CircleBufferGeometry(0.7, 0),\n      new THREE.MeshBasicMaterial({\n        color: Config.wayColor\n      })\n    )\n    this.interactiveObj.name = 'start'\n    this.add(this.interactiveObj)\n    this.app.inputManager.addCollider(this.interactiveObj)\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\nimport Config from './Config'\nimport HintGroup from './HintGroup'\n\nexport default class Hints extends THREE.Group {\n  constructor () {\n    super()\n    this.app = app\n    this.maxHints = 6\n    for (let i = 0; i < Config.maxHints; i++) {\n      var hintGroup = new HintGroup()\n      hintGroup.scale.set(0.25, 0.25, 0.25)\n      hintGroup.position.x = -0.62 + i * 0.25\n      this.add(hintGroup)\n    }\n    this.app.on('setHints', this.setHints.bind(this))\n    this.app.on('endgame', this.endgame.bind(this))\n  }\n\n  setHints (tokensStore, gameStatus, cycle, cyclesPerRound, remembered) {\n    for (var i = 0; i < this.children.length; i++) {\n      if (i < cyclesPerRound) {\n        this.children[i].visible = true\n        if (gameStatus === 2) {\n          if (tokensStore[i]) {\n            this.updateHint(i, tokensStore[i][1][0], tokensStore[i][1][1])\n          } else {\n            this.updateHint(i, 'hidden')\n          }\n        }\n        if (gameStatus === 3) {\n          var modBack = cycle % cyclesPerRound\n          var indexStoredTokens = cyclesPerRound - modBack - 1\n          if (indexStoredTokens < i) {\n            this.updateHint(i, 'hidden')\n          } else {\n            this.updateHint(i, tokensStore[i][1][0], tokensStore[i][1][1])\n          }\n        }\n        if (gameStatus === 4) {\n          if (i < remembered) {\n            this.updateHint(i, tokensStore[i][1][0], tokensStore[i][1][1])\n          } else {\n            this.updateHint(i, 'hidden')\n          }\n        }\n      } else {\n        this.children[i].visible = false\n      }\n    }\n    this.position.x = (((this.maxHints / 2) * 0.25) - (cyclesPerRound * 0.25) / 2)\n    this.visible = true\n  }\n\n  updateHint (index, name, color) {\n    for (var i = 0; i < this.children[index].children.length; i++) {\n      if (this.children[index].children[i].name === name) {\n        this.children[index].children[i].visible = true\n        if (this.children[index].children[i].name !== 'hidden') {\n          this.children[index].children[i].material.color.set(color)\n        }\n      } else {\n        this.children[index].children[i].visible = false\n      }\n    }\n  }\n\n  endgame () {\n    this.visible = false\n  }\n\n  update (dt = 0) {\n  }\n}\n","import Config from './Config'\n\nexport default class HintGroup extends THREE.Group {\n  constructor () {\n    super()\n    const hintGeometry = new THREE.CircleBufferGeometry(0.35, 32)\n    const hintMaterial = new THREE.MeshBasicMaterial()\n    var hint = new THREE.Mesh(hintGeometry, hintMaterial)\n    hint.name = 'hidden'\n    this.add(hint)\n    for (let i = 0; i < 5; i++) {\n      var hintMaterialTmp = new THREE.MeshBasicMaterial()\n      let geometryTmp\n      switch (i) {\n        case 0:\n          geometryTmp = new THREE.RingBufferGeometry(0.25, 0.35, 3)\n          break\n        case 1:\n          geometryTmp = new THREE.RingBufferGeometry(0.25, 0.35, 4)\n          break\n        case 2:\n          geometryTmp = new THREE.RingBufferGeometry(0.25, 0.35, 5)\n          break\n        case 3:\n          geometryTmp = new THREE.RingBufferGeometry(0.25, 0.35, 6)\n          break\n        case 4:\n          geometryTmp = new THREE.RingBufferGeometry(0.25, 0.35, 32)\n          break\n      }\n      const hintTmp = new THREE.Mesh(geometryTmp, hintMaterialTmp)\n      hintTmp.name = i\n      this.add(hintTmp)\n    }\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\n\nexport default class BigTokens extends THREE.Group {\n  constructor () {\n    super()\n    this.app = app\n    // this.addTokens()\n    this.app.on('tokenAdded', this.tokenAdded.bind(this))\n    this.app.on('setBigTokens', this.setBigTokens.bind(this))\n    this.app.on('postSolved', this.postSolved.bind(this))\n    this.app.on('endgame', this.endgame.bind(this))\n  }\n\n  tokenAdded (geo, mat, i) {\n    const token = new THREE.Mesh(geo, mat)\n    token.name = i\n    this.add(token)\n  }\n\n  setBigTokens (correctWay) {\n    for (var i = 0; i < this.children.length; i++) {\n      if (this.children[i].name === correctWay) {\n        this.children[i].visible = true\n        var hexStr = '#' + this.children[i].material.color.getHexString()\n        document.querySelector('meta[name=\"theme-color\"]').setAttribute('content', hexStr)\n        this.app.emit('setCorrectName', this.children[i].name)\n      } else {\n        this.children[i].visible = false\n      }\n    }\n    this.visible = true\n  }\n\n  postSolved () {\n    this.visible = false\n  }\n\n  endgame () {\n    this.visible = false\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\nimport Config from './Config'\n\nexport default class Score extends THREE.Group {\n  constructor () {\n    super()\n    this.app = app\n    this.canvas = document.createElement('canvas')\n    this.canvas.width = 512\n    this.canvas.height = 128\n    this.canvas.style.display = 'none'\n    document.body.appendChild(this.canvas)\n\n    this.context = this.canvas.getContext('2d')\n    this.context.font = 'bold 72px sans-serif'\n    this.context.textAlign = 'center'\n    this.hexStr = '#' + Config.scoreColor.toString(16)\n    this.context.fillStyle = this.hexStr\n    this.actualScore = '000'\n    this.context.fillText(this.actualScore, this.canvas.width / 2, this.canvas.height / 2 + 32)\n\n    this.material = new THREE.MeshBasicMaterial({\n      transparent: true\n    })\n    this.material.map = new THREE.CanvasTexture(this.canvas)\n    this.plane = new THREE.Mesh(new THREE.PlaneBufferGeometry(4, 1), this.material)\n    this.add(this.plane)\n    // this.setScore(7, true)\n    this.setScore(0, false)\n    this.app.on('scoreboardchanged', (val, highscore) => {\n      this.setScore(val, highscore)\n    })\n    this.app.on('replay', this.replay.bind(this))\n    this.app.on('play', this.play.bind(this))\n  }\n\n  replay () {\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)\n    this.hexStr = '#' + Config.scoreColorOff.toString(16)\n    this.context.fillStyle = this.hexStr\n    this.context.font = 'bold 72px sans-serif'\n    this.context.fillText(this.actualScore, this.canvas.width / 2, this.canvas.height / 2 + 32)\n    this.material.map.needsUpdate = true\n  }\n\n  play () {\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)\n    this.hexStr = '#' + Config.scoreColor.toString(16)\n    this.context.fillStyle = this.hexStr\n    this.context.font = 'bold 72px sans-serif'\n    this.context.fillText(this.actualScore, this.canvas.width / 2, this.canvas.height / 2 + 32)\n    this.material.map.needsUpdate = true\n  }\n\n  setScore (val, highscore) {\n    let valStr = Number(val).toString()\n    if (valStr.length > 3) {\n      valStr = '999'\n    } else if (valStr.length === 2) {\n      valStr = '0' + valStr\n    } else if (valStr.length === 1) {\n      valStr = '00' + valStr\n    }\n\n    this.actualScore = valStr\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)\n\n    if (highscore) {\n      this.hexStr = '#' + Config.highscoreColor.toString(16)\n      this.context.fillStyle = this.hexStr\n      this.context.font = 'bolder 28px sans-serif'\n      this.context.fillText('YOUR BEST', this.canvas.width / 2, this.canvas.height / 2 - 42)\n      this.context.font = 'bolder 96px sans-serif'\n    } else {\n      this.hexStr = '#' + Config.scoreColor.toString(16)\n      this.context.fillStyle = this.hexStr\n      this.context.font = 'bold 72px sans-serif'\n    }\n    this.context.fillText(valStr, this.canvas.width / 2, this.canvas.height / 2 + 32)\n    this.material.map.needsUpdate = true\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\nimport Config from './Config'\n\nexport default class PlayRewPanels extends THREE.Group {\n  constructor () {\n    super()\n    this.app = app\n    this.canvas = document.createElement('canvas')\n    this.canvas.width = 512\n    this.canvas.height = 128\n    this.canvas.style.display = 'none'\n    document.body.appendChild(this.canvas)\n\n    this.context = this.canvas.getContext('2d')\n    this.context.font = 'bold 72px sans-serif'\n    this.context.textAlign = 'center'\n    this.hexStr = '#' + Config.scoreColor.toString(16)\n    this.context.fillStyle = this.hexStr\n    this.material = new THREE.MeshBasicMaterial({\n      transparent: true\n    })\n    this.material.map = new THREE.CanvasTexture(this.canvas)\n    this.plane = new THREE.Mesh(new THREE.PlaneBufferGeometry(2, 0.5), this.material)\n    this.add(this.plane)\n    this.app.on('replay', this.stop.bind(this))\n    this.app.on('endgame', this.stop.bind(this))\n    this.app.on('play', this.play.bind(this))\n    this.app.on('rew', this.rew.bind(this))\n  }\n\n  play () {\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)\n    this.context.fillText('PLAY >', this.canvas.width / 2, this.canvas.height / 2 + 32)\n    this.material.map.needsUpdate = true\n    this.visible = true\n  }\n\n  rew () {\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)\n    this.context.fillText('REW <<', this.canvas.width / 2, this.canvas.height / 2 + 32)\n    this.material.map.needsUpdate = true\n    this.visible = true\n  }\n\n  stop () {\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)\n    this.material.map.needsUpdate = true\n    this.visible = false\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\nimport Config from './Config'\n\nexport default class PlayRewPanels extends THREE.Group {\n  constructor () {\n    super()\n    this.app = app\n    this.canvas = document.createElement('canvas')\n    this.canvas.width = 256\n    this.canvas.height = 64\n    this.canvas.style.display = 'none'\n    document.body.appendChild(this.canvas)\n\n    this.context = this.canvas.getContext('2d')\n    this.context.font = 'bold 36px sans-serif'\n    this.context.textAlign = 'center'\n    this.context.beginPath()\n    this.hexStr = '#' + Config.wayColor.toString(16)\n    this.context.fillStyle = this.hexStr\n    this.context.strokeStyle = this.hexStr\n    this.context.lineWidth = 6\n    this.material = new THREE.MeshBasicMaterial({\n      transparent: true\n    })\n    this.material.map = new THREE.CanvasTexture(this.canvas)\n    this.plane = new THREE.Mesh(new THREE.PlaneBufferGeometry(1, 0.25), this.material)\n    this.add(this.plane)\n    this.plane.name = 'audio'\n    this.app.inputManager.addCollider(this.plane)\n\n    if (!window.localStorage.getItem('unboring.js13k.back.audio')) {\n      this.audioActive = 'true'\n    } else {\n      this.audioActive = window.localStorage.getItem('unboring.js13k.back.audio')\n    }\n    this.setAudio()\n    this.app.on('shuffleAudio', this.shuffleAudio.bind(this))\n  }\n\n  setAudio () {\n    if (this.audioActive === 'true') {\n      this.on()\n    } else {\n      this.off()\n    }\n  }\n\n  shuffleAudio () {\n    if (this.audioActive === 'true') {\n      this.audioActive = 'false'\n    } else {\n      this.audioActive = 'true'\n    }\n    if (this.audioActive !== window.localStorage.getItem('unboring.js13k.back.audio')) {\n      window.localStorage.setItem('unboring.js13k.back.audio', this.audioActive)\n    }\n    this.setAudio()\n  }\n\n  on () {\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)\n    this.context.beginPath()\n    this.context.fillText('AUDIO ON', this.canvas.width / 2, this.canvas.height / 2 + 16)\n    this.context.moveTo(36, 60)\n    this.context.lineTo(220, 60)\n    this.context.stroke()\n    this.material.map.needsUpdate = true\n    this.visible = true\n  }\n\n  off () {\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)\n    this.context.beginPath()\n    this.context.fillText('AUDIO OFF', this.canvas.width / 2, this.canvas.height / 2 + 16)\n    this.context.moveTo(30, 60)\n    this.context.lineTo(226, 10)\n    this.context.stroke()\n    this.material.map.needsUpdate = true\n    this.visible = true\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\nimport Config from './Config'\n\nmodule.exports = class InputManager {\n  constructor () {\n    this.app = app\n    this.app.on('toggleVR', this.toggleVR.bind(this))\n\n    this.iOS = !!navigator.platform && /iPad|iPhone|iPod/.test(navigator.platform)\n\n    this.raycaster = new THREE.Raycaster()\n    this.intersected = []\n    this.tempMatrix = new THREE.Matrix4()\n\n    this.mouse = new THREE.Vector2()\n    this.intersection = null\n\n    this.colliders = []\n\n    this.swipe = {\n      sX: 0,\n      sY: 0,\n      eX: 0,\n      eY: 0\n    }\n    this.addControllers()\n\n    document.addEventListener('mousemove', this.onDocumentMouseMove.bind(this), false)\n    document.addEventListener('click', this.onClick.bind(this), false)\n    document.addEventListener('touchstart', this.onTouchStart.bind(this), false)\n    document.addEventListener('touchmove', this.onTouchMove.bind(this), false)\n    document.addEventListener('touchend', this.onTouchEnd.bind(this), false)\n  }\n\n  toggleVR (bool) {\n    this.controller1.visible = bool\n    this.controller2.visible = bool\n  }\n\n  addControllers () {\n    this.controller1 = this.app.renderer.vr.getController(0)\n    this.controller1.addEventListener('selectstart', this.onSelectStart.bind(this))\n    this.controller1.addEventListener('selectend', this.onSelectEnd.bind(this))\n    this.app.scene.add(this.controller1)\n\n    this.controller2 = this.app.renderer.vr.getController(1)\n    this.controller2.addEventListener('selectstart', this.onSelectStart)\n    this.controller2.addEventListener('selectend', this.onSelectEnd)\n    this.app.scene.add(this.controller2)\n\n    // helpers\n\n    var geometryHelper = new THREE.BufferGeometry().setFromPoints([new THREE.Vector3(0, 0, 0), new THREE.Vector3(0, 0, -1)])\n    var materialHelper = new THREE.LineBasicMaterial({ color: 0xffffff })\n    var line = new THREE.Line(geometryHelper, materialHelper)\n    line.name = 'line'\n    line.scale.z = 5\n\n    this.controller1.add(line.clone())\n    this.controller2.add(line.clone())\n  }\n\n  // Colliders\n  addCollider (collider) {\n    if (collider) {\n      this.colliders.push(collider)\n    }\n  }\n\n  removeCollider (collider) {\n    const index = this.colliders.indexOf(collider)\n    if (index !== -1) {\n      this.colliders.splice(index, 1)\n    }\n  }\n\n  addColliders (colliders) {\n    colliders.forEach(this.addCollider.bind(this))\n  }\n\n  resetColliders () {\n    this.colliders = []\n  }\n\n  //   VR controller events\n  onSelectStart (event) {\n    var controller = event.target\n\n    var intersections = this.getIntersections(controller)\n\n    if (intersections.length > 0) {\n      if (intersections[0].object.name === 'start') {\n        this.app.emit('startgame')\n      } else if (intersections[0].object.name === 'audio') {\n        this.app.emit('shuffleAudio')\n      } else if (intersections[0].object.name.substr(0, 3) === 'way') {\n        const newWay = parseInt(intersections[0].object.name.substr(3, 1), 10)\n        this.app.emit('wayChanged', newWay)\n      }\n    }\n  }\n\n  onSelectEnd () {\n  }\n\n  // Mouse / Desktop methods\n  onDocumentMouseMove (event) {\n    event.preventDefault()\n    if (!event.targetTouches) {\n      this.mouse.x = (event.pageX / window.innerWidth) * 2 - 1\n      this.mouse.y = -(event.pageY / window.innerHeight) * 2 + 1\n      if (this.intersection) {\n        this.app.renderer.domElement.style.cursor = 'pointer'\n      } else {\n        this.app.renderer.domElement.style.cursor = 'default'\n      }\n      this.doFallbackRaycast()\n    }\n  }\n\n  onClick (event) {\n    event.preventDefault()\n    if (event.touches && this.iOS) {\n      this.mouse.x = (event.pageX / window.innerWidth) * 2 - 1\n      this.mouse.y = -(event.pageY / window.innerHeight) * 2 + 1\n    } else {\n      this.mouse.x = (event.pageX / window.innerWidth) * 2 - 1\n      this.mouse.y = -(event.pageY / window.innerHeight) * 2 + 1\n    }\n\n    this.doFallbackRaycast()\n\n    if (this.intersected.length) {\n      if (this.intersected[0].name === 'start') {\n        this.app.emit('startgame')\n      } else if (this.intersected[0].name === 'audio') {\n        this.app.emit('shuffleAudio')\n      } else if (this.intersected[0].name.substr(0, 3) === 'way') {\n        const newWay = parseInt(this.intersected[0].name.substr(3, 1), 10)\n        this.app.emit('wayChanged', newWay)\n      }\n    }\n  }\n\n  doFallbackRaycast () {\n    this.cleanIntersected()\n\n    this.raycaster.setFromCamera(this.mouse, this.app.camera)\n    var intersections = this.raycaster.intersectObjects(this.colliders)\n    this.intersection = (intersections.length) > 0 ? intersections[0] : null\n    if (this.intersection !== null) {\n      var object = this.intersection.object\n      if (object.name !== 'audio') {\n        object.material.color.set(Config.wayColorOver)\n      }\n      this.intersected.push(object)\n    }\n  }\n\n  // Touch screen methods\n  // Swipe on touch screens\n  onTouchStart (e) {\n    var t = e.touches[0]\n    this.swipe.sX = t.screenX\n    this.swipe.sY = t.screenY\n  }\n\n  onTouchMove (e) {\n    var t = e.touches[0]\n    // e.preventDefault()\n    this.swipe.eX = t.screenX\n    this.swipe.eY = t.screenY\n  }\n\n  onTouchEnd (e) {\n    if ((((this.swipe.eX - 60 > this.swipe.sX) || (this.swipe.eX + 60 < this.swipe.sX)) && ((this.swipe.eY < this.swipe.sY + 60) && (this.swipe.sY > this.swipe.eY - 60) && (this.swipe.eX > 0)))) {\n      if (this.swipe.eX > this.swipe.sX) {\n        this.app.emit('wayLeft')\n      } else {\n        this.app.emit('wayRight')\n      }\n    } else {\n      if (this.iOS) {\n        this.onClick(e)\n      }\n    }\n  }\n\n  // common methods\n  getIntersections (controller) {\n    this.tempMatrix.identity().extractRotation(controller.matrixWorld)\n\n    this.raycaster.ray.origin.setFromMatrixPosition(controller.matrixWorld)\n    this.raycaster.ray.direction.set(0, 0, -1).applyMatrix4(this.tempMatrix)\n\n    return this.raycaster.intersectObjects(this.colliders)\n  }\n\n  intersectObjects (controller) {\n    // Do not highlight when already selected\n\n    if (controller.userData.selected !== undefined) return\n\n    var line = controller.getObjectByName('line')\n    var intersections = this.getIntersections(controller)\n\n    if (intersections.length > 0) {\n      var intersection = intersections[0]\n\n      var object = intersection.object\n      if (object.name !== 'audio') {\n        object.material.color.set(Config.wayColorOver)\n      }\n      this.intersected.push(object)\n\n      line.scale.z = intersection.distance\n    } else {\n      line.scale.z = 5\n    }\n  }\n\n  cleanIntersected () {\n    while (this.intersected.length) {\n      var object = this.intersected.pop()\n      if (object.name !== 'audio') {\n        object.material.color.set(Config.wayColor)\n      }\n    }\n  }\n\n  updateVR () {\n    this.cleanIntersected()\n\n    this.intersectObjects(this.controller1)\n    this.intersectObjects(this.controller2)\n  }\n}\n","import { app } from './context'\nimport Config from './Config'\nimport Utils from './Utils'\n\nmodule.exports = class GameManager {\n  constructor (opt = {}) {\n    this.app = app\n    this.world = opt.world\n    this.rewards = opt.rewards\n    this.scoreboard = opt.scoreboard\n\n    this.correctName = 0\n    // 0 - before start\n    // 1 - started\n    // 2 - catching\n    // 3 - back\n    // 4 - remembering\n    // 5 - lose\n    // 6 - max score 999\n    this.gameStatus = 0\n\n    this.highscore = window.localStorage.getItem('unboring.js13k.back')\n    if (this.highscore !== null) {\n      this.app.emit('scoreboardchanged', this.highscore, true)\n    } else {\n      this.app.emit('scoreboardchanged', this.highscore, true)\n    }\n\n    this.actualWay = 2\n    this.newWay = 2\n    this.correctWay = 2\n    this.targetXpos = 0\n    this.resetGameSettings()\n    this.app.on('startgame', this.startgame.bind(this))\n    this.app.on('wayChanged', this.wayChanged.bind(this))\n    this.app.on('wayLeft', this.wayLeft.bind(this))\n    this.app.on('wayRight', this.wayRight.bind(this))\n    this.app.on('correctWayChanged', this.correctWayChanged.bind(this))\n    this.app.on('tokensShuffled', this.tokensShuffled.bind(this))\n    this.app.on('setCorrectName', this.setCorrectName.bind(this))\n    this.app.on('solveOK', this.solveOK.bind(this))\n    this.app.on('solveERROR', this.solveERROR.bind(this))\n    this.app.on('solveRememberingOK', this.solveRememberingOK.bind(this))\n    this.app.on('solveRememberingERROR', this.solveRememberingERROR.bind(this))\n  }\n\n  startgame () {\n    this.resetGameSettings()\n    this.gameStatus = 1\n    this.app.emit('scoreboardchanged', this.score, false)\n    this.newCycle()\n  }\n\n  wayChanged (way) {\n    this.newWay = way\n  }\n\n  wayLeft () {\n    if (this.newWay > 0) {\n      this.app.emit('wayChanged', this.newWay - 1)\n    }\n  }\n\n  wayRight () {\n    if (this.newWay < 4) {\n      this.app.emit('wayChanged', this.newWay + 1)\n    }\n  }\n\n  resetGameSettings () {\n    this.solved = false\n    this.errorOnSolved = false\n    this.gameSpeed = 10\n    this.app.emit('speedChanged', this.gameSpeed)\n    this.backSpeed = 50\n    this.cycle = 0\n    this.cyclesPerRound = 1\n    this.caught = 0\n    this.remembered = 0\n    this.tokensStore = []\n    this.score = 0\n  }\n\n  getTargetX (way) {\n    // Only works for 5 ways\n    return (4 - way) * 2 - 4\n  }\n\n  newRound () {\n    this.app.scene.background = new THREE.Color(Config.bgColor)\n    this.app.scene.fog = new THREE.Fog(Config.bgColor, 0, 45)\n    if (this.cyclesPerRound === 5) {\n      this.cyclesPerRound = 1\n    } else {\n      this.cyclesPerRound += 1\n    }\n    this.gameSpeed += 1\n    if (this.gameSpeed > 40) {\n      this.gameSpeed = 40\n    }\n    this.app.emit('speedChanged', this.gameSpeed)\n    this.cycle = 0\n    this.caught = 0\n    this.remembered = 0\n    this.tokensStore = []\n    this.newCycle()\n  }\n\n  newCycle () {\n    if (this.errorOnSolved) {\n      // Error time\n      this.gameStatus = 5\n      this.app.emit('wayChanged', 2)\n      this.endgame()\n      return\n    }\n    if (this.cycle < this.cyclesPerRound && this.caught < this.cyclesPerRound) {\n      // Catching time\n      this.app.emit('replay')\n      this.gameStatus = 2\n      this.app.emit('setHints', this.tokensStore, this.gameStatus, this.cycle, this.cyclesPerRound, this.remembered)\n      this.setCorrectWay()\n\n      Utils.shuffle(Config.colorArr)\n      this.app.emit('shuffleTokens')\n\n      this.app.emit('setBigTokens', this.correctWay)\n    } else if (this.cycle < this.cyclesPerRound * 2 && this.caught === this.cyclesPerRound) {\n      // Back time\n      this.app.emit('rew')\n      this.app.scene.background = new THREE.Color(Config.bgColorBack)\n      this.app.scene.fog = new THREE.Fog(Config.bgColorBack, 0, 45)\n      this.gameStatus = 3\n      var modBack = this.cycle % this.cyclesPerRound\n      var indexStoredTokens = this.cyclesPerRound - modBack - 1\n      this.app.emit('setStoredTokens')\n      this.placeStoredTokens(indexStoredTokens)\n      this.app.emit('setHints', this.tokensStore, this.gameStatus, this.cycle, this.cyclesPerRound, this.remembered)\n    } else if (this.cycle >= this.cyclesPerRound * 2 && this.remembered < this.caught) {\n      // Remembering time\n      this.app.emit('play')\n      this.app.scene.background = new THREE.Color(Config.bgColor)\n      this.app.scene.fog = new THREE.Fog(Config.bgColor, 0, 45)\n      this.gameStatus = 4\n\n      this.app.emit('shuffleStoredTokens')\n      Utils.shuffle(this.tokensStore[this.remembered][0])\n      this.placeStoredTokens(this.remembered)\n\n      this.app.emit('setCorrectRememberedWay', this.tokensStore, this.remembered)\n      this.setDefaultTheme()\n      this.app.emit('setHints', this.tokensStore, this.gameStatus, this.cycle, this.cyclesPerRound, this.remembered)\n    } else if (this.score >= 999) {\n      this.gameStatus = 6\n    } else {\n      // Next round\n      this.newRound()\n      return\n    }\n\n    this.app.emit('resetAtNewCycle')\n    this.solved = false\n    this.world.position.z = 0\n\n    this.cycle++\n  }\n\n  // Ticks\n\n  catchingTick (delta) {\n    this.world.position.z += this.gameSpeed * delta\n    if (Math.abs(this.world.position.z) >= Config.wayLength / 4 - 2 && !this.solved) {\n      this.app.emit('solve', this.actualWay, this.correctName)\n      this.solved = true\n    }\n    if (Math.abs(this.world.position.z) >= Config.wayLength / 4 + 2 && !this.world.tokens.visible) {\n      this.postSolved()\n    }\n    if (Math.abs(this.world.position.z) >= Config.wayLength / 4 + 10) {\n      this.newCycle()\n    }\n  }\n\n  backTick (delta) {\n    this.world.position.z -= this.backSpeed * delta\n    if (this.world.position.z < -Config.wayLength / 3) {\n      this.newCycle()\n    }\n  }\n\n  rememberingTick (delta) {\n    this.world.position.z += this.gameSpeed * delta\n    if (Math.abs(this.world.position.z) >= Config.wayLength / 4 - 2 && !this.solved) {\n      this.app.emit('solveRemembering', this.actualWay, this.correctWay)\n      this.solved = true\n    }\n    if (Math.abs(this.world.position.z) >= Config.wayLength / 4 + 2 && !this.world.tokens.visible) {\n      this.postSolved()\n    }\n    if (Math.abs(this.world.position.z) >= Config.wayLength / 4 + 10) {\n      this.newCycle()\n    }\n  }\n\n  gameTick (delta) {\n    switch (this.gameStatus) {\n      case 2:\n        this.catchingTick(delta)\n        break\n      case 3:\n        this.backTick(delta)\n        break\n      case 4:\n        this.rememberingTick(delta)\n        break\n    }\n\n    if (this.rewards.visible) {\n      var newScale = THREE.Math.lerp(2.5, this.rewards.scale.x, Config.lerpSpeed)\n      this.rewards.scale.set(newScale, newScale, newScale)\n      this.rewards.position.z += 0.01\n    }\n  }\n\n  setDefaultTheme () {\n    var hexStr = '#' + Config.bgColorBack.toString(16)\n    document.querySelector('meta[name=\"theme-color\"]').setAttribute('content', hexStr)\n  }\n\n  setCorrectWay () {\n    this.correctWay = Math.floor(Math.random() * 5)\n    this.app.emit('showCorrectReward', this.correctWay)\n  }\n\n  correctWayChanged (way) {\n    this.correctWay = way\n  }\n\n  tokensShuffled (tokensChildren) {\n    this.tokensStore[this.caught] = [[], []]\n    for (var i = 0; i < tokensChildren.length; i++) {\n      tokensChildren[i].position.x = i * 2 - 4\n      var tmpColor = Config.colorArr[i]\n      tokensChildren[i].material.color.set(tmpColor)\n      this.tokensStore[this.caught][0][i] = [tokensChildren[i].name, tmpColor]\n      if (tokensChildren[i].name === this.correctWay) {\n        this.tokensStore[this.caught][1] = [tokensChildren[i].name, tmpColor]\n      }\n    }\n  }\n\n  placeStoredTokens (index) {\n    for (var i = 0; i < this.tokensStore[index][0].length; i++) {\n      this.app.emit('reorderTokens', this.tokensStore, i, index)\n    }\n  }\n\n  setCorrectName (name) {\n    this.correctName = name\n  }\n\n  postSolved () {\n    this.app.emit('postSolved')\n    this.app.emit('setHints', this.tokensStore, this.gameStatus, this.cycle, this.cyclesPerRound, this.remembered)\n  }\n\n  solveOK () {\n    this.caught += 1\n  }\n\n  solveERROR () {\n    this.errorOnSolved = true\n  }\n\n  solveRememberingOK () {\n    this.remembered += 1\n    this.score += 1\n    this.app.emit('scoreboardchanged', this.score, false)\n  }\n\n  solveRememberingERROR () {\n    this.errorOnSolved = true\n  }\n\n  endgame () {\n    this.app.emit('endgame')\n    this.app.emit('wayChanged', 2)\n    this.app.scene.background = new THREE.Color(Config.bgColor)\n    this.app.scene.fog = new THREE.Fog(Config.bgColor, 0, 45)\n    if (this.score > Number(this.highscore)) {\n      this.highscore = this.score\n      window.localStorage.setItem('unboring.js13k.back', this.score)\n    }\n    this.app.emit('scoreboardchanged', this.highscore, true)\n    this.setDefaultTheme()\n  }\n\n  update (dt) {\n    if (this.gameStatus > 0 && this.gameStatus < 5) {\n      this.gameTick(dt)\n    }\n\n    if (this.newWay !== this.actualWay) {\n      this.actualWay = this.newWay\n      this.targetXpos = this.getTargetX(this.newWay)\n    }\n\n    if (this.targetXpos !== this.world.position.x) {\n      this.world.position.x = THREE.Math.lerp(this.targetXpos, this.world.position.x, Config.lerpSpeed)\n    }\n  }\n}\n","\n// Based on https://sonoport.github.io/synthesising-sounds-webaudio.html\nimport { app } from './context'\n\nmodule.exports = class Synth {\n  constructor () {\n    this.app = app\n\n    window.AudioContext = window.AudioContext || window.webkitAudioContext\n    if (!this.audioContext) {\n      this.audioContext = new AudioContext()\n    }\n    this.gameActive = false\n    this.actualTempo = 0.3\n    this.backTempo = 0.1\n    this.tempo = this.actualTempo\n    this.counter = 0\n\n    // Made based on with https://xem.github.io/miniMusic/\n    this.loopSeq = [0, 0, 14, 14, 0, 0, 12, 12, 0, 0, 11, 11, 0, 0, 12, 12, 0, 14, 12, 11, 12, 0, 0, 9, 8, 7, 0, 7, 0, 7, 0, 7, 0, 0]\n    this.reverseSeq = this.loopSeq.slice(0).reverse()\n    this.errorSeq = [0, 16, 17, 19, 19, 0]\n    this.okSeq = [0, 2, 0]\n    this.clickSeq = [0, 13, 0]\n\n    this.activeSeq = []\n    this.sequencePoint = 0\n    this.actualLoopPoint = 0\n\n    if (!window.localStorage.getItem('unboring.js13k.back.audio')) {\n      this.audioActive = 'false'\n    } else {\n      this.audioActive = window.localStorage.getItem('unboring.js13k.back.audio')\n    }\n\n    this.app.on('startgame', this.startgame.bind(this))\n    this.app.on('endgame', this.endgame.bind(this))\n    this.app.on('solveOK', this.solveOK.bind(this))\n    this.app.on('solveRememberingOK', this.solveOK.bind(this))\n    this.app.on('solveERROR', this.solveERROR.bind(this))\n    this.app.on('solveRememberingERROR', this.solveERROR.bind(this))\n    this.app.on('play', this.playEvent.bind(this))\n    this.app.on('rew', this.rew.bind(this))\n    this.app.on('speedChanged', this.speedChanged.bind(this))\n    this.app.on('shuffleAudio', this.shuffleAudio.bind(this))\n  }\n\n  shuffleAudio () {\n    if (this.audioActive === 'true') {\n      this.audioActive = 'false'\n    } else {\n      this.audioActive = 'true'\n    }\n  }\n\n  startgame () {\n    const osc4 = this.audioContext.createOscillator()\n    if (this.audioActive === 'true') {\n      osc4.frequency.value = 440 * 1.06 ** (12 - 5)\n    } else {\n      console.log(this.audioActive)\n      osc4.frequency.value = 0\n    }\n    osc4.connect(this.audioContext.destination)\n    osc4.start(this.audioContext.currentTime)\n    osc4.stop(this.audioContext.currentTime + this.actualTempo)\n    this.gameActive = true\n    this.activeSeq = this.loopSeq\n    this.sequencePoint = 0\n  }\n\n  endgame () {\n    this.gameActive = false\n    this.activeSeq = []\n  }\n\n  speedChanged (newSpeed) {\n    this.actualTempo = 0.3 - Math.min(0.2, newSpeed / 200)\n    this.tempo = this.actualTempo\n  }\n\n  solveOK () {\n    this.activeSeq = this.okSeq\n    this.actualLoopPoint = this.sequencePoint\n    this.sequencePoint = 0\n  }\n\n  solveERROR () {\n    this.activeSeq = this.errorSeq\n    this.sequencePoint = 0\n  }\n\n  playEvent () {\n    this.tempo = this.actualTempo\n  }\n\n  rew () {\n    this.tempo = this.backTempo\n    this.activeSeq = this.reverseSeq\n    if (this.activeSeq !== this.reverseSeq) {\n      this.sequencePoint = 0\n    }\n  }\n\n  playNote (v) {\n    const osc4 = this.audioContext.createOscillator()\n    osc4.frequency.value = 440 * 1.06 ** (12 - v)\n    osc4.connect(this.audioContext.destination)\n    osc4.start(this.audioContext.currentTime)\n    osc4.stop(this.audioContext.currentTime + this.actualTempo)\n  }\n\n  tick () {\n    if (this.audioActive === 'false') {\n      return\n    }\n    if (this.sequencePoint < this.activeSeq.length) {\n      if (this.activeSeq[this.sequencePoint]) {\n        this.playNote(this.activeSeq[this.sequencePoint])\n        this.app.emit('synth', this.activeSeq[this.sequencePoint])\n      }\n      this.sequencePoint += 1\n    } else {\n      if (this.gameActive) {\n        if (this.activeSeq !== this.loopSeq) {\n          this.activeSeq = this.loopSeq\n          this.sequencePoint = this.actualLoopPoint\n        } else {\n          this.sequencePoint = 0\n        }\n      } else {\n        this.activeSeq = []\n        this.sequencePoint = 0\n      }\n    }\n  }\n\n  update (dt) {\n    this.counter += dt\n    if (this.counter > this.tempo) {\n      this.tick()\n      this.counter = 0\n    }\n  }\n}\n","import vertexShader from './shaders/sky.vert'\nimport fragmentShader from './shaders/sky.frag'\n\nimport { app } from './context'\n// import Config from './Config'\n\nexport default class Sky extends THREE.Group {\n  constructor () {\n    super()\n    this.app = app\n    this.app.on('resetAtNewCycle', this.resetAtNewCycle.bind(this))\n  }\n\n  resetAtNewCycle () {\n\n  }\n\n  update (dt = 0) {\n  }\n}\n","export default \"#define GLSLIFY 1\\nvarying vec3 vWorldPosition;\\n\\nvoid main() {\\n\\n\\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\\n\\tvWorldPosition = worldPosition.xyz;\\n\\t\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n\\n}\"","export default \"#define GLSLIFY 1\\nuniform vec3 colorTop;\\nuniform vec3 colorBottom;\\n\\nvarying vec3 vWorldPosition;\\n\\nvoid main()\\n{\\n\\n\\tvec3 pointOnSphere = normalize(vWorldPosition.xyz);\\n\\tfloat f = 1.0;\\n\\tif(pointOnSphere.y > - 0.2){\\n\\t\\tf = sin(pointOnSphere.y * 2.0);\\n\\t}\\n\\n\\tgl_FragColor = vec4(mix(colorBottom,colorTop, f ), 1.0);\\n\\n}\\n\""],"sourceRoot":""}