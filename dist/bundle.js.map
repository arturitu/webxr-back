{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/context.js","webpack:///./src/Config.js","webpack:///./src/Utils.js","webpack:///./src/index.js","webpack:///./src/App.js","webpack:///./node_modules/events/events.js","webpack:///./src/startup.js","webpack:///./src/World.js","webpack:///./src/Tokens.js","webpack:///./src/Ways.js","webpack:///./src/Rewards.js","webpack:///./src/Scoreboard.js","webpack:///./src/StartBtn.js","webpack:///./src/Hints.js","webpack:///./src/HintGroup.js","webpack:///./src/BigTokens.js","webpack:///./src/Score.js","webpack:///./src/PlayRewPanels.js","webpack:///./src/AudioBtn.js","webpack:///./src/InputManager.js","webpack:///./src/GameManager.js","webpack:///./src/Synth.js","webpack:///./src/Sky.js","webpack:///./src/shaders/sky.vert","webpack:///./src/shaders/sky.frag","webpack:///./src/InstancedObjs.js","webpack:///./src/shaders/instancing.vert","webpack:///./src/shaders/instancing.frag"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","app","App","instance","this","bgColorTop","bgColor","wayColor","wayColorOver","wayLength","scoreColor","scoreColorOff","highscoreColor","colorArr","lerpSpeed","maxHints","Utils","array","sort","Math","random","c0","c1","R1","G1","B1","R2","G2","B2","round","toString","slice","require","isVRActive","time","prevTime","window","performance","now","renderer","THREE","WebGLRenderer","antialias","setPixelRatio","devicePixelRatio","setSize","innerWidth","innerHeight","vr","enabled","document","body","appendChild","domElement","WEBVR","createButton","referenceSpaceType","scene","Scene","fog","Fog","Config","camera","PerspectiveCamera","layers","enable","addEventListener","resize","animate","EventEmitter","aspect","updateProjectionMatrix","setAnimationLoop","render","timeNow","delta","update","isPresenting","emit","inputManager","updateVR","gameManager","synth","dt","traverse","obj","ReflectOwnKeys","R","Reflect","ReflectApply","apply","target","receiver","args","Function","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","concat","NumberIsNaN","Number","isNaN","init","_events","undefined","_eventsCount","_maxListeners","defaultMaxListeners","$getMaxListeners","that","_addListener","type","listener","prepend","events","existing","warning","TypeError","newListener","unshift","push","length","warned","w","Error","String","emitter","count","console","warn","onceWrapper","arguments","fired","removeListener","wrapFn","_onceWrap","state","wrapped","_listeners","unwrap","evlistener","arr","ret","Array","unwrapListeners","arrayClone","listenerCount","copy","set","arg","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","error","er","err","message","context","handler","len","listeners","addListener","on","prependListener","once","prependOnceListener","list","position","originalListener","shift","index","pop","spliceOne","off","removeAllListeners","keys","rawListeners","eventNames","InputManager","scoreboard","Scoreboard","add","world","World","rewards","Rewards","GameManager","Synth","sky","Sky","instancedObjs","InstancedObjs","y","tokens","Tokens","ways","Ways","Group","tokensInitialPosZ","z","addTokens","setCorrectRememberedWay","shuffleTokens","reorderTokens","setStoredTokens","shuffleStoredTokens","solve","solveRemembering","postSolved","tokenGeometry","RingBufferGeometry","tokenMaterial","MeshBasicMaterial","color","side","DoubleSide","token","Mesh","x","tokensStore","children","shuffle","tmpColor","material","j","actualWay","correcName","visible","correctWay","addWays","startgame","endgame","countEffect","wayGeometry","PlaneBufferGeometry","rotateX","PI","wayMaterial","transparent","opacity","way","addCollider","removeCollider","val","radius","addRewards","addErrorReward","showCorrectReward","resetAtNewCycle","solveERROR","rewardMaterial","LineBasicMaterial","rewardGeometry","getRewardGeometry","reward","Line","crossShape","Shape","moveTo","lineTo","geometry","ShapeGeometry","mesh","scale","correctName","segmentCount","Geometry","theta","vertices","Vector3","cos","sin","startBtn","StartBtn","hints","Hints","bigTokens","BigTokens","score","Score","playRewPanels","PlayRewPanels","audioBtn","AudioBtn","interactiveObj","CircleBufferGeometry","lineMaterial","lineGeometry","line","rotation","Object3D","hintGroup","HintGroup","setHints","gameStatus","cycle","cyclesPerRound","remembered","updateHint","hintGeometry","hintMaterial","hint","hintMaterialTmp","geometryTmp","hintTmp","tokenAdded","setBigTokens","geo","mat","hexStr","getHexString","querySelector","setAttribute","canvas","createElement","width","height","style","display","getContext","font","textAlign","fillStyle","actualScore","fillText","map","CanvasTexture","plane","setScore","highscore","replay","play","clearRect","needsUpdate","valStr","stop","rew","beginPath","strokeStyle","lineWidth","localStorage","getItem","audioActive","setAudio","shuffleAudio","setItem","stroke","toggleVR","iOS","navigator","platform","test","raycaster","Raycaster","intersected","tempMatrix","Matrix4","mouse","Vector2","intersection","colliders","swipe","sX","sY","eX","eY","addControllers","onDocumentMouseMove","onClick","onTouchStart","onTouchMove","onTouchEnd","bool","controller1","controller2","getController","onSelectStart","onSelectEnd","geometryHelper","BufferGeometry","setFromPoints","materialHelper","clone","collider","indexOf","splice","forEach","event","controller","intersections","getIntersections","substr","newWay","parseInt","preventDefault","targetTouches","pageX","pageY","cursor","doFallbackRaycast","touches","cleanIntersected","setFromCamera","intersectObjects","e","screenX","screenY","identity","extractRotation","matrixWorld","ray","origin","setFromMatrixPosition","direction","applyMatrix4","userData","selected","getObjectByName","distance","opt","targetXpos","resetGameSettings","wayChanged","wayLeft","wayRight","correctWayChanged","tokensShuffled","setCorrectName","solveOK","solveRememberingOK","solveRememberingERROR","setDefaultTheme","newCycle","solved","errorOnSolved","gameSpeed","backSpeed","caught","background","Color","setCorrectWay","modBack","indexStoredTokens","placeStoredTokens","newRound","abs","catchingTick","backTick","rememberingTick","newScale","lerp","floor","tokensChildren","gameTick","getTargetX","AudioContext","webkitAudioContext","audioContext","gameActive","actualTempo","backTempo","tempo","counter","loopSeq","reverseSeq","reverse","errorSeq","okSeq","clickSeq","activeSeq","sequencePoint","actualLoopPoint","playEvent","speedChanged","osc4","createOscillator","frequency","log","connect","destination","start","currentTime","newSpeed","min","v","playNote","tick","SphereBufferGeometry","ShaderMaterial","uniforms","colorTop","colorBottom","vertexShader","fragmentShader","BackSide","shpere","extensions","getGeometry","RawShaderMaterial","sineTime","vector","Vector4","positions","offsets","colors","orientationsStart","orientationsEnd","normalize","InstancedBufferGeometry","maxInstancedCount","addAttribute","Float32BufferAttribute","InstancedBufferAttribute","Float32Array"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","import App from './App'\n\nconst app = new App()\n\nmodule.exports = {\n  app\n}\n","let instance = null\n// Singleton pattern in ES6 example\nclass Config {\n  constructor () {\n    if (!instance) {\n      // green\n      // this.bgColorTop = 0x3b2d35\n      // this.bgColor = 0x74986d\n\n      // orange\n      // this.bgColorTop = 0x2d3e5d\n      // this.bgColor = 0x9a8f78\n\n      // pink\n      // this.bgColorTop = 0x483361\n      // this.bgColor = 0x9a6a85\n\n      // yellow\n      // this.bgColorTop = 0x2c261a\n      // this.bgColor = 0x97816e\n\n      // blue\n      // this.bgColorTop = 0x43293b\n      // this.bgColor = 0x607495\n\n      // red\n      // this.bgColorTop = 0x354631\n      // this.bgColor = 0xb55e69\n\n      // purple\n      // this.bgColorTop = 0x6c2f59\n      // this.bgColor = 0x855db6\n\n      // white\n      // this.bgColorTop = 0x65573b\n      // this.bgColor = 0x747474\n\n      this.bgColorTop = 0x212121\n      this.bgColor = 0x323232\n\n      this.wayColor = 0xffffff\n      this.wayColorOver = 0x666666\n      this.wayLength = 200\n      this.scoreColor = 0xffffff\n      this.scoreColorOff = 0x444444\n      this.highscoreColor = 0xffcc00\n      this.colorArr = [\n        0xfb39ca,\n        0xfdca2a,\n        0x2bca20,\n        0xfc9125,\n        0x0d6afc,\n        0x6419cb,\n        0xffffff,\n        0xfa0018\n      ]\n      this.lerpSpeed = 0.9\n      this.maxHints = 6\n      instance = this\n    }\n    return instance\n  }\n}\n\nexport default new Config()\n","let instance = null\nclass Utils {\n  constructor () {\n    if (!instance) {\n      instance = this\n    }\n    return instance\n  }\n\n  shuffle (array) {\n    array.sort(() => Math.random() - 0.5)\n  }\n\n  // http://stackoverflow.com/questions/5560248/programmatically-lighten-or-darken-a-hex-color-or-rgb-and-blend-colors\n  // Modified to admit 0x (now not admit #)\n  // Lighter colors blendColors(color, 0xFFFFFF, 0.5)\n  // Darker colors blendColors(color, 0x000000, 0.5)\n  blendColors (c0, c1, p) {\n    const f = c0; const t = c1; const R1 = f >> 16; const G1 = f >> 8 & 0x00FF; const B1 = f & 0x0000FF; const R2 = t >> 16; const G2 = t >> 8 & 0x00FF; const B2 = t & 0x0000FF\n    return '#' + (0x1000000 + (Math.round((R2 - R1) * p) + R1) * 0x10000 + (Math.round((G2 - G1) * p) + G1) * 0x100 + (Math.round((B2 - B1) * p) + B1)).toString(16).slice(1)\n  }\n}\n\nexport default new Utils()\n","require('./context')\nrequire('./startup')()\n","import { EventEmitter } from 'events'\nimport Config from './Config'\n\nexport default class App extends EventEmitter {\n  constructor (opt = {}) {\n    super()\n\n    this.isVRActive = false\n    this.time = 0\n    this.prevTime = window.performance.now()\n    this.renderer = new THREE.WebGLRenderer({ antialias: true })\n    this.renderer.setPixelRatio(window.devicePixelRatio)\n    this.renderer.setSize(window.innerWidth, window.innerHeight)\n    this.renderer.vr.enabled = true\n\n    document.body.appendChild(this.renderer.domElement)\n\n    // WebXR\n    document.body.appendChild(THREE.WEBVR.createButton(this.renderer, { referenceSpaceType: 'local' }))\n\n    this.scene = new THREE.Scene()\n    this.scene.fog = new THREE.Fog(Config.bgColor, 0, 45)\n\n    this.camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000)\n    this.camera.layers.enable(1)\n\n    window.addEventListener('resize', () => this.resize())\n\n    this.animate()\n  }\n\n  resize () {\n    this.camera.aspect = window.innerWidth / window.innerHeight\n    this.camera.updateProjectionMatrix()\n\n    this.renderer.setSize(window.innerWidth, window.innerHeight)\n  }\n\n  animate () {\n    this.renderer.setAnimationLoop(this.render.bind(this))\n  }\n\n  render () {\n    const timeNow = window.performance.now()\n    const delta = (timeNow - this.prevTime) / 1000\n    this.prevTime = timeNow\n    this.time += delta\n    this.update(delta, this.time)\n\n    if (this.isVRActive !== this.renderer.vr.isPresenting()) {\n      this.emit('toggleVR', this.renderer.vr.isPresenting())\n      this.isVRActive = this.renderer.vr.isPresenting()\n      if (this.isVRActive) {\n        Config.lerpSpeed = 0.75\n      } else {\n        Config.lerpSpeed = 0.9\n      }\n    }\n    if (this.renderer.vr.isPresenting()) {\n      this.inputManager.updateVR()\n    }\n\n    this.gameManager.update(delta)\n    this.synth.update(delta)\n\n    this.renderer.render(this.scene, this.camera)\n  }\n\n  update (dt = 0, time = 0) {\n    // recursively tell all child objects to update\n    this.scene.traverse(obj => {\n      if (typeof obj.update === 'function') {\n        obj.update(dt, time)\n      }\n    })\n\n    return this\n  }\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction $getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return $getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = $getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  var args = [];\n  for (var i = 0; i < arguments.length; i++) args.push(arguments[i]);\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    ReflectApply(this.listener, this.target, args);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      if (typeof listener !== 'function') {\n        throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n      }\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      if (typeof listener !== 'function') {\n        throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n      }\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n","import { app } from './context'\nimport World from './World'\nimport Rewards from './Rewards'\nimport Scoreboard from './Scoreboard'\n\nimport InputManager from './InputManager'\nimport GameManager from './GameManager'\nimport Synth from './Synth'\nimport Sky from './Sky'\nimport InstancedObjs from './InstancedObjs'\n\nmodule.exports = function () {\n  app.inputManager = new InputManager()\n  const scoreboard = new Scoreboard()\n  app.scene.add(scoreboard)\n  const world = new World()\n  app.scene.add(world)\n  const rewards = new Rewards()\n  app.scene.add(rewards)\n  app.gameManager = new GameManager({\n    world: world,\n    rewards: rewards,\n    scoreboard: scoreboard\n  })\n  const synth = new Synth()\n  app.synth = synth\n  const sky = new Sky()\n  app.scene.add(sky)\n  const instancedObjs = new InstancedObjs()\n  app.scene.add(instancedObjs)\n}\n","import Tokens from './Tokens'\nimport Ways from './Ways'\n\nexport default class World extends THREE.Group {\n  constructor () {\n    super()\n    this.position.y = -1.7\n    this.tokens = new Tokens()\n    this.ways = new Ways()\n    this.add(this.tokens)\n    this.add(this.ways)\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\nimport Config from './Config'\nimport Utils from './Utils'\n\nexport default class Tokens extends THREE.Group {\n  constructor () {\n    super()\n    this.app = app\n    this.tokensInitialPosZ = 50\n    this.position.z = -this.tokensInitialPosZ\n    this.addTokens()\n    this.app.on('setCorrectRememberedWay', this.setCorrectRememberedWay.bind(this))\n    this.app.on('shuffleTokens', this.shuffleTokens.bind(this))\n    this.app.on('reorderTokens', this.reorderTokens.bind(this))\n    this.app.on('setStoredTokens', this.setStoredTokens.bind(this))\n    this.app.on('shuffleStoredTokens', this.shuffleStoredTokens.bind(this))\n    this.app.on('solve', this.solve.bind(this))\n    this.app.on('solveRemembering', this.solveRemembering.bind(this))\n    this.app.on('postSolved', this.postSolved.bind(this))\n  }\n\n  addTokens () {\n    for (let i = 0; i < 5; i++) {\n      let tokenGeometry\n      switch (i) {\n        case 0:\n          tokenGeometry = new THREE.RingBufferGeometry(0.25, 0.35, 3)\n          break\n        case 1:\n          tokenGeometry = new THREE.RingBufferGeometry(0.25, 0.35, 4)\n          break\n        case 2:\n          tokenGeometry = new THREE.RingBufferGeometry(0.25, 0.35, 5)\n          break\n        case 3:\n          tokenGeometry = new THREE.RingBufferGeometry(0.25, 0.35, 6)\n          break\n        case 4:\n          tokenGeometry = new THREE.RingBufferGeometry(0.25, 0.35, 32)\n          break\n      }\n      const tokenMaterial = new THREE.MeshBasicMaterial({ color: 0xffffff, side: THREE.DoubleSide })\n      const token = new THREE.Mesh(tokenGeometry, tokenMaterial)\n      token.name = i\n      token.position.x = i * 2 - 4\n      token.position.y = 1.5\n      this.app.emit('tokenAdded', tokenGeometry, tokenMaterial, i)\n      this.add(token)\n    }\n    this.app.emit('allTokensAdded')\n  }\n\n  setCorrectRememberedWay (tokensStore, index) {\n    for (var i = 0; i < this.children.length; i++) {\n      if (this.children[i].name === tokensStore[index][1][0]) {\n        this.app.emit('correctWayChanged', (this.children[i].position.x + 4) / 2)\n        this.app.emit('showCorrectReward', this.children[i].name)\n      }\n    }\n  }\n\n  shuffleTokens () {\n    Utils.shuffle(this.children)\n    for (var i = 0; i < this.children.length; i++) {\n      this.children[i].position.x = i * 2 - 4\n      var tmpColor = Config.colorArr[i]\n      this.children[i].material.color.set(tmpColor)\n    }\n    this.app.emit('tokensShuffled', this.children)\n  }\n\n  setStoredTokens () {\n    this.position.z = this.tokensInitialPosZ / 2\n  }\n\n  shuffleStoredTokens () {\n    this.position.z = -this.tokensInitialPosZ\n  }\n\n  reorderTokens (tokensStore, i, index) {\n    for (var j = 0; j < this.children.length; j++) {\n      if (this.children[j].name === tokensStore[index][0][i][0]) {\n        this.children[j].position.x = i * 2 - 4\n        this.children[j].material.color.set(tokensStore[index][0][i][1])\n      }\n    }\n  }\n\n  solve (actualWay, correcName) {\n    if (this.children[actualWay].name === correcName) {\n      this.app.emit('solveOK')\n    } else {\n      this.app.emit('solveERROR')\n    }\n    this.visible = false\n  }\n\n  solveRemembering (actualWay, correctWay) {\n    if (this.children[actualWay].name === this.children[correctWay].name) {\n      this.app.emit('solveRememberingOK')\n    } else {\n      this.app.emit('solveRememberingERROR')\n    }\n    this.visible = false\n  }\n\n  postSolved () {\n    this.visible = true\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\nimport Config from './Config'\n\nexport default class Ways extends THREE.Group {\n  constructor () {\n    super()\n    this.app = app\n    this.addWays()\n    this.app.on('startgame', this.startgame.bind(this))\n    this.app.on('endgame', this.endgame.bind(this))\n    this.app.on('synth', this.synth.bind(this))\n\n    this.countEffect = 0\n  }\n\n  addWays () {\n    const wayGeometry = new THREE.PlaneBufferGeometry(1.9, Config.wayLength, 1, 1)\n    wayGeometry.rotateX(-Math.PI / 2)\n    for (let i = 0; i < 5; i++) {\n      const wayMaterial = new THREE.MeshBasicMaterial({ transparent: true, opacity: 0.25, color: Config.wayColor })\n      const way = new THREE.Mesh(wayGeometry, wayMaterial)\n      way.name = 'way' + i\n      way.position.x = (i * 2) - 4\n      way.position.y = 0.1\n      way.position.z = 0\n      this.add(way)\n    }\n  }\n\n  startgame () {\n    for (let i = 0; i < this.children.length; i++) {\n      this.app.inputManager.addCollider(this.children[i])\n    }\n  }\n\n  endgame () {\n    for (let i = 0; i < this.children.length; i++) {\n      this.app.inputManager.removeCollider(this.children[i])\n    }\n    // for (let i = 0; i < this.children.length; i++) {\n    //   this.children[i].material.opacity = 1\n    // }\n  }\n\n  synth (val) {\n    // for (let i = 0; i < this.children.length; i++) {\n    //   this.children[i].material.opacity = 1\n    // }\n    // this.children[this.countEffect].material.opacity = 1 - ((val * 4) / 100)\n    // if (this.countEffect >= this.children.length - 1) {\n    //   this.countEffect = 0\n    // } else {\n    //   this.countEffect += 1\n    // }\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\n// import Config from './Config'\n\nexport default class Rewards extends THREE.Group {\n  constructor () {\n    super()\n    this.app = app\n    this.radius = 0.05\n    this.position.z = -0.5\n    this.position.y = -0.05\n    this.addRewards()\n    this.addErrorReward()\n    this.visible = false\n    this.app.on('showCorrectReward', this.showCorrectReward.bind(this))\n    this.app.on('resetAtNewCycle', this.resetAtNewCycle.bind(this))\n    this.app.on('solve', this.solve.bind(this))\n    this.app.on('solveERROR', this.solveERROR.bind(this))\n    this.app.on('solveRemembering', this.solve.bind(this))\n    this.app.on('solveRememberingERROR', this.solveERROR.bind(this))\n    this.app.on('endgame', this.endgame.bind(this))\n  }\n\n  addRewards () {\n    const rewardMaterial = new THREE.LineBasicMaterial({ color: 0xffffff })\n    for (let i = 0; i < 5; i++) {\n      let rewardGeometry\n      switch (i) {\n        case 0:\n          rewardGeometry = this.getRewardGeometry(3)\n          break\n        case 1:\n          rewardGeometry = this.getRewardGeometry(4)\n          break\n        case 2:\n          rewardGeometry = this.getRewardGeometry(5)\n          break\n        case 3:\n          rewardGeometry = this.getRewardGeometry(6)\n          break\n        case 4:\n          rewardGeometry = this.getRewardGeometry(32)\n          break\n      }\n      const reward = new THREE.Line(rewardGeometry, rewardMaterial)\n      reward.name = i\n      this.add(reward)\n    }\n  }\n\n  addErrorReward () {\n    const crossShape = new THREE.Shape()\n    crossShape.moveTo(0, -7.5)\n    crossShape.lineTo(-32.5, -40)\n    crossShape.lineTo(-40, -32.5)\n    crossShape.lineTo(-7.5, 0)\n    crossShape.lineTo(-40, 32.5)\n    crossShape.lineTo(-32.5, 40)\n    crossShape.lineTo(0, 10)\n    crossShape.lineTo(32.5, 40)\n    crossShape.lineTo(40, 32.5)\n    crossShape.lineTo(10, 0)\n    crossShape.lineTo(40, -32.5)\n    crossShape.lineTo(32.5, -40)\n    crossShape.lineTo(0, -7.5)\n    const geometry = new THREE.ShapeGeometry(crossShape)\n    const material = new THREE.MeshBasicMaterial()\n    const mesh = new THREE.Mesh(geometry, material)\n    mesh.scale.set(this.radius * 0.02, this.radius * 0.02, this.radius * 0.02)\n    this.add(mesh)\n  }\n\n  showCorrectReward (correctName) {\n    for (var i = 0; i < this.children.length; i++) {\n      if (this.children[i].name === correctName) {\n        this.children[i].visible = true\n      } else {\n        this.children[i].visible = false\n      }\n    }\n  }\n\n  getRewardGeometry (segmentCount) {\n    var rewardGeometry = new THREE.Geometry()\n    for (var i = 0; i <= segmentCount; i++) {\n      var theta = (i / segmentCount) * Math.PI * 2\n      rewardGeometry.vertices.push(\n        new THREE.Vector3(\n          Math.cos(theta) * this.radius,\n          Math.sin(theta) * this.radius,\n          0))\n    }\n    return rewardGeometry\n  }\n\n  resetAtNewCycle () {\n    this.position.z = -0.5\n    this.visible = false\n  }\n\n  solve () {\n    this.scale.set(0.1, 0.1, 0.1)\n    this.visible = true\n  }\n\n  solveERROR () {\n    for (var i = 0; i < this.children.length; i++) {\n      if (i === this.children.length - 1) {\n        this.children[i].visible = true\n      } else {\n        this.children[i].visible = false\n      }\n    }\n  }\n\n  endgame () {\n    this.visible = false\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\nimport StartBtn from './StartBtn'\nimport Hints from './Hints'\nimport BigTokens from './BigTokens'\nimport Score from './Score'\nimport PlayRewPanels from './PlayRewPanels'\nimport AudioBtn from './AudioBtn'\n\nexport default class Scoreboard extends THREE.Group {\n  constructor () {\n    super()\n    this.app = app\n    this.position.set(0, 1.25, -5)\n\n    this.startBtn = new StartBtn()\n    this.startBtn.position.set(0, 0.2, 0)\n    this.add(this.startBtn)\n\n    this.hints = new Hints()\n    this.hints.position.set(0, 1, 0)\n    this.hints.visible = false\n    this.add(this.hints)\n\n    this.bigTokens = new BigTokens()\n    this.bigTokens.position.set(0, 0.5, 0)\n    this.bigTokens.visible = false\n    this.add(this.bigTokens)\n\n    this.score = new Score()\n    this.score.position.set(0, 1.5, 0)\n    this.add(this.score)\n\n    this.playRewPanels = new PlayRewPanels()\n    this.playRewPanels.position.set(0, 0.5, 0)\n    this.playRewPanels.visible = false\n    this.add(this.playRewPanels)\n\n    this.audioBtn = new AudioBtn()\n    this.audioBtn.position.set(0, 2.25, 0)\n    this.add(this.audioBtn)\n\n    this.app.on('startgame', this.startgame.bind(this))\n    this.app.on('endgame', this.endgame.bind(this))\n  }\n\n  startgame () {\n    this.startBtn.interactiveObj.visible = false\n  }\n\n  endgame () {\n    this.score.visible = true\n    this.startBtn.interactiveObj.visible = true\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\nimport Config from './Config'\n\nexport default class StartBtn extends THREE.Object3D {\n  constructor () {\n    super()\n    this.app = app\n    this.interactiveObj = new THREE.Mesh(\n      new THREE.CircleBufferGeometry(0.7, 0),\n      new THREE.MeshBasicMaterial({\n        transparent: true,\n        opacity: 0.25,\n        color: Config.wayColor\n      })\n    )\n    this.interactiveObj.name = 'start'\n    this.add(this.interactiveObj)\n    this.app.inputManager.addCollider(this.interactiveObj)\n\n    const radius = 0.85\n    const lineMaterial = new THREE.LineBasicMaterial({ color: 0xffffff })\n    const lineGeometry = new THREE.Geometry()\n    for (var i = 0; i <= 3; i++) {\n      var theta = (i / 3) * Math.PI * 2\n      lineGeometry.vertices.push(\n        new THREE.Vector3(\n          Math.cos(theta) * radius,\n          Math.sin(theta) * radius,\n          0))\n    }\n    const line = new THREE.Line(lineGeometry, lineMaterial)\n    line.rotation.z = Math.PI / 64\n    this.interactiveObj.add(line)\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\nimport Config from './Config'\nimport HintGroup from './HintGroup'\n\nexport default class Hints extends THREE.Group {\n  constructor () {\n    super()\n    this.app = app\n    this.maxHints = 6\n    for (let i = 0; i < Config.maxHints; i++) {\n      var hintGroup = new HintGroup()\n      hintGroup.scale.set(0.25, 0.25, 0.25)\n      hintGroup.position.x = -0.62 + i * 0.25\n      this.add(hintGroup)\n    }\n    this.app.on('setHints', this.setHints.bind(this))\n    this.app.on('endgame', this.endgame.bind(this))\n  }\n\n  setHints (tokensStore, gameStatus, cycle, cyclesPerRound, remembered) {\n    for (var i = 0; i < this.children.length; i++) {\n      if (i < cyclesPerRound) {\n        this.children[i].visible = true\n        if (gameStatus === 2) {\n          if (tokensStore[i]) {\n            this.updateHint(i, tokensStore[i][1][0], tokensStore[i][1][1])\n          } else {\n            this.updateHint(i, 'hidden')\n          }\n        }\n        if (gameStatus === 3) {\n          var modBack = cycle % cyclesPerRound\n          var indexStoredTokens = cyclesPerRound - modBack - 1\n          if (indexStoredTokens < i) {\n            this.updateHint(i, 'hidden')\n          } else {\n            this.updateHint(i, tokensStore[i][1][0], tokensStore[i][1][1])\n          }\n        }\n        if (gameStatus === 4) {\n          if (i < remembered) {\n            this.updateHint(i, tokensStore[i][1][0], tokensStore[i][1][1])\n          } else {\n            this.updateHint(i, 'hidden')\n          }\n        }\n      } else {\n        this.children[i].visible = false\n      }\n    }\n    this.position.x = (((this.maxHints / 2) * 0.25) - (cyclesPerRound * 0.25) / 2)\n    this.visible = true\n  }\n\n  updateHint (index, name, color) {\n    for (var i = 0; i < this.children[index].children.length; i++) {\n      if (this.children[index].children[i].name === name) {\n        this.children[index].children[i].visible = true\n        if (this.children[index].children[i].name !== 'hidden') {\n          this.children[index].children[i].material.color.set(color)\n        }\n      } else {\n        this.children[index].children[i].visible = false\n      }\n    }\n  }\n\n  endgame () {\n    this.visible = false\n  }\n\n  update (dt = 0) {\n  }\n}\n","import Config from './Config'\n\nexport default class HintGroup extends THREE.Group {\n  constructor () {\n    super()\n    const hintGeometry = new THREE.CircleBufferGeometry(0.35, 32)\n    const hintMaterial = new THREE.MeshBasicMaterial()\n    var hint = new THREE.Mesh(hintGeometry, hintMaterial)\n    hint.name = 'hidden'\n    this.add(hint)\n    for (let i = 0; i < 5; i++) {\n      var hintMaterialTmp = new THREE.MeshBasicMaterial()\n      let geometryTmp\n      switch (i) {\n        case 0:\n          geometryTmp = new THREE.RingBufferGeometry(0.25, 0.35, 3)\n          break\n        case 1:\n          geometryTmp = new THREE.RingBufferGeometry(0.25, 0.35, 4)\n          break\n        case 2:\n          geometryTmp = new THREE.RingBufferGeometry(0.25, 0.35, 5)\n          break\n        case 3:\n          geometryTmp = new THREE.RingBufferGeometry(0.25, 0.35, 6)\n          break\n        case 4:\n          geometryTmp = new THREE.RingBufferGeometry(0.25, 0.35, 32)\n          break\n      }\n      const hintTmp = new THREE.Mesh(geometryTmp, hintMaterialTmp)\n      hintTmp.name = i\n      this.add(hintTmp)\n    }\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\n\nexport default class BigTokens extends THREE.Group {\n  constructor () {\n    super()\n    this.app = app\n    // this.addTokens()\n    this.app.on('tokenAdded', this.tokenAdded.bind(this))\n    this.app.on('setBigTokens', this.setBigTokens.bind(this))\n    this.app.on('postSolved', this.postSolved.bind(this))\n    this.app.on('endgame', this.endgame.bind(this))\n  }\n\n  tokenAdded (geo, mat, i) {\n    const token = new THREE.Mesh(geo, mat)\n    token.name = i\n    this.add(token)\n  }\n\n  setBigTokens (correctWay) {\n    for (var i = 0; i < this.children.length; i++) {\n      if (this.children[i].name === correctWay) {\n        this.children[i].visible = true\n        var hexStr = '#' + this.children[i].material.color.getHexString()\n        document.querySelector('meta[name=\"theme-color\"]').setAttribute('content', hexStr)\n        this.app.emit('setCorrectName', this.children[i].name)\n      } else {\n        this.children[i].visible = false\n      }\n    }\n    this.visible = true\n  }\n\n  postSolved () {\n    this.visible = false\n  }\n\n  endgame () {\n    this.visible = false\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\nimport Config from './Config'\n\nexport default class Score extends THREE.Group {\n  constructor () {\n    super()\n    this.app = app\n    this.canvas = document.createElement('canvas')\n    this.canvas.width = 512\n    this.canvas.height = 128\n    this.canvas.style.display = 'none'\n    document.body.appendChild(this.canvas)\n\n    this.context = this.canvas.getContext('2d')\n    this.context.font = 'bold 72px sans-serif'\n    this.context.textAlign = 'center'\n    this.hexStr = '#' + Config.scoreColor.toString(16)\n    this.context.fillStyle = this.hexStr\n    this.actualScore = '000'\n    this.context.fillText(this.actualScore, this.canvas.width / 2, this.canvas.height / 2 + 32)\n\n    this.material = new THREE.MeshBasicMaterial({\n      transparent: true\n    })\n    this.material.map = new THREE.CanvasTexture(this.canvas)\n    this.plane = new THREE.Mesh(new THREE.PlaneBufferGeometry(4, 1), this.material)\n    this.add(this.plane)\n    // this.setScore(7, true)\n    this.setScore(0, false)\n    this.app.on('scoreboardchanged', (val, highscore) => {\n      this.setScore(val, highscore)\n    })\n    this.app.on('replay', this.replay.bind(this))\n    this.app.on('play', this.play.bind(this))\n  }\n\n  replay () {\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)\n    // this.hexStr = '#' + Config.scoreColorOff.toString(16)\n    // this.context.fillStyle = this.hexStr\n    this.material.opacity = 0.15\n    this.context.font = 'bold 72px sans-serif'\n    this.context.fillText(this.actualScore, this.canvas.width / 2, this.canvas.height / 2 + 32)\n    this.material.map.needsUpdate = true\n  }\n\n  play () {\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)\n    // this.hexStr = '#' + Config.scoreColor.toString(16)\n    // this.context.fillStyle = this.hexStr\n    this.material.opacity = 1\n    this.context.font = 'bold 72px sans-serif'\n    this.context.fillText(this.actualScore, this.canvas.width / 2, this.canvas.height / 2 + 32)\n    this.material.map.needsUpdate = true\n  }\n\n  setScore (val, highscore) {\n    let valStr = Number(val).toString()\n    if (valStr.length > 3) {\n      valStr = '999'\n    } else if (valStr.length === 2) {\n      valStr = '0' + valStr\n    } else if (valStr.length === 1) {\n      valStr = '00' + valStr\n    }\n\n    this.actualScore = valStr\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)\n\n    if (highscore) {\n      this.material.opacity = 1\n      this.hexStr = '#' + Config.highscoreColor.toString(16)\n      this.context.fillStyle = this.hexStr\n      this.context.font = 'bolder 28px sans-serif'\n      this.context.fillText('YOUR BEST', this.canvas.width / 2, this.canvas.height / 2 - 42)\n      this.context.font = 'bolder 96px sans-serif'\n    } else {\n      this.material.opacity = 0.8\n      this.hexStr = '#' + Config.scoreColor.toString(16)\n      this.context.fillStyle = this.hexStr\n      this.context.font = 'bold 72px sans-serif'\n    }\n    this.context.fillText(valStr, this.canvas.width / 2, this.canvas.height / 2 + 32)\n    this.material.map.needsUpdate = true\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\nimport Config from './Config'\n\nexport default class PlayRewPanels extends THREE.Group {\n  constructor () {\n    super()\n    this.app = app\n    this.canvas = document.createElement('canvas')\n    this.canvas.width = 512\n    this.canvas.height = 128\n    this.canvas.style.display = 'none'\n    document.body.appendChild(this.canvas)\n\n    this.context = this.canvas.getContext('2d')\n    this.context.font = 'bold 72px sans-serif'\n    this.context.textAlign = 'center'\n    this.hexStr = '#' + Config.scoreColor.toString(16)\n    this.context.fillStyle = this.hexStr\n    this.material = new THREE.MeshBasicMaterial({\n      transparent: true\n    })\n    this.material.map = new THREE.CanvasTexture(this.canvas)\n    this.plane = new THREE.Mesh(new THREE.PlaneBufferGeometry(2, 0.5), this.material)\n    this.add(this.plane)\n    this.app.on('replay', this.stop.bind(this))\n    this.app.on('endgame', this.stop.bind(this))\n    this.app.on('play', this.play.bind(this))\n    this.app.on('rew', this.rew.bind(this))\n  }\n\n  play () {\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)\n    this.context.fillText('PLAY |·', this.canvas.width / 2, this.canvas.height / 2 + 32)\n    this.material.map.needsUpdate = true\n    this.visible = true\n  }\n\n  rew () {\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)\n    this.context.fillText('REW ·|·|', this.canvas.width / 2, this.canvas.height / 2 + 32)\n    this.material.map.needsUpdate = true\n    this.visible = true\n  }\n\n  stop () {\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)\n    this.material.map.needsUpdate = true\n    this.visible = false\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\nimport Config from './Config'\n\nexport default class PlayRewPanels extends THREE.Group {\n  constructor () {\n    super()\n    this.app = app\n    this.canvas = document.createElement('canvas')\n    this.canvas.width = 256\n    this.canvas.height = 64\n    this.canvas.style.display = 'none'\n    document.body.appendChild(this.canvas)\n\n    this.context = this.canvas.getContext('2d')\n    this.context.font = 'bold 36px sans-serif'\n    this.context.textAlign = 'center'\n    this.context.beginPath()\n    this.hexStr = '#' + Config.wayColor.toString(16)\n    this.context.fillStyle = this.hexStr\n    this.context.strokeStyle = this.hexStr\n    this.context.lineWidth = 6\n    this.material = new THREE.MeshBasicMaterial({\n      transparent: true,\n      opacity: 0.25\n    })\n    this.material.map = new THREE.CanvasTexture(this.canvas)\n    this.plane = new THREE.Mesh(new THREE.PlaneBufferGeometry(1, 0.25), this.material)\n    this.add(this.plane)\n    this.plane.name = 'audio'\n    this.app.inputManager.addCollider(this.plane)\n\n    if (!window.localStorage.getItem('unboring.js13k.back.audio')) {\n      this.audioActive = 'true'\n    } else {\n      this.audioActive = window.localStorage.getItem('unboring.js13k.back.audio')\n    }\n    this.setAudio()\n    this.app.on('shuffleAudio', this.shuffleAudio.bind(this))\n  }\n\n  setAudio () {\n    if (this.audioActive === 'true') {\n      this.on()\n    } else {\n      this.off()\n    }\n  }\n\n  shuffleAudio () {\n    if (this.audioActive === 'true') {\n      this.audioActive = 'false'\n    } else {\n      this.audioActive = 'true'\n    }\n    if (this.audioActive !== window.localStorage.getItem('unboring.js13k.back.audio')) {\n      window.localStorage.setItem('unboring.js13k.back.audio', this.audioActive)\n    }\n    this.setAudio()\n  }\n\n  on () {\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)\n    this.context.beginPath()\n    this.context.fillText('AUDIO ON', this.canvas.width / 2, this.canvas.height / 2 + 16)\n    this.context.moveTo(36, 60)\n    this.context.lineTo(220, 60)\n    this.context.stroke()\n    this.material.map.needsUpdate = true\n    this.visible = true\n  }\n\n  off () {\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)\n    this.context.beginPath()\n    this.context.fillText('AUDIO OFF', this.canvas.width / 2, this.canvas.height / 2 + 16)\n    this.context.moveTo(30, 60)\n    this.context.lineTo(226, 10)\n    this.context.stroke()\n    this.material.map.needsUpdate = true\n    this.visible = true\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\nimport Config from './Config'\n\nmodule.exports = class InputManager {\n  constructor () {\n    this.app = app\n    this.app.on('toggleVR', this.toggleVR.bind(this))\n\n    this.iOS = !!navigator.platform && /iPad|iPhone|iPod/.test(navigator.platform)\n\n    this.raycaster = new THREE.Raycaster()\n    this.intersected = []\n    this.tempMatrix = new THREE.Matrix4()\n\n    this.mouse = new THREE.Vector2()\n    this.intersection = null\n\n    this.colliders = []\n\n    this.swipe = {\n      sX: 0,\n      sY: 0,\n      eX: 0,\n      eY: 0\n    }\n    this.addControllers()\n\n    document.addEventListener('mousemove', this.onDocumentMouseMove.bind(this), false)\n    document.addEventListener('click', this.onClick.bind(this), false)\n    document.addEventListener('touchstart', this.onTouchStart.bind(this), false)\n    document.addEventListener('touchmove', this.onTouchMove.bind(this), false)\n    document.addEventListener('touchend', this.onTouchEnd.bind(this), false)\n  }\n\n  toggleVR (bool) {\n    this.controller1.visible = bool\n    this.controller2.visible = bool\n  }\n\n  addControllers () {\n    this.controller1 = this.app.renderer.vr.getController(0)\n    this.controller1.addEventListener('selectstart', this.onSelectStart.bind(this))\n    this.controller1.addEventListener('selectend', this.onSelectEnd.bind(this))\n    this.app.scene.add(this.controller1)\n\n    this.controller2 = this.app.renderer.vr.getController(1)\n    this.controller2.addEventListener('selectstart', this.onSelectStart)\n    this.controller2.addEventListener('selectend', this.onSelectEnd)\n    this.app.scene.add(this.controller2)\n\n    // helpers\n\n    var geometryHelper = new THREE.BufferGeometry().setFromPoints([new THREE.Vector3(0, 0, 0), new THREE.Vector3(0, 0, -1)])\n    var materialHelper = new THREE.LineBasicMaterial({ color: 0xffffff })\n    var line = new THREE.Line(geometryHelper, materialHelper)\n    line.name = 'line'\n    line.scale.z = 5\n\n    this.controller1.add(line.clone())\n    this.controller2.add(line.clone())\n  }\n\n  // Colliders\n  addCollider (collider) {\n    if (collider) {\n      this.colliders.push(collider)\n    }\n  }\n\n  removeCollider (collider) {\n    const index = this.colliders.indexOf(collider)\n    if (index !== -1) {\n      this.colliders.splice(index, 1)\n    }\n  }\n\n  addColliders (colliders) {\n    colliders.forEach(this.addCollider.bind(this))\n  }\n\n  resetColliders () {\n    this.colliders = []\n  }\n\n  //   VR controller events\n  onSelectStart (event) {\n    var controller = event.target\n\n    var intersections = this.getIntersections(controller)\n\n    if (intersections.length > 0) {\n      if (intersections[0].object.name === 'start') {\n        this.app.emit('startgame')\n      } else if (intersections[0].object.name === 'audio') {\n        this.app.emit('shuffleAudio')\n      } else if (intersections[0].object.name.substr(0, 3) === 'way') {\n        const newWay = parseInt(intersections[0].object.name.substr(3, 1), 10)\n        this.app.emit('wayChanged', newWay)\n      }\n    }\n  }\n\n  onSelectEnd () {\n  }\n\n  // Mouse / Desktop methods\n  onDocumentMouseMove (event) {\n    event.preventDefault()\n    if (!event.targetTouches) {\n      this.mouse.x = (event.pageX / window.innerWidth) * 2 - 1\n      this.mouse.y = -(event.pageY / window.innerHeight) * 2 + 1\n      if (this.intersection) {\n        this.app.renderer.domElement.style.cursor = 'pointer'\n      } else {\n        this.app.renderer.domElement.style.cursor = 'default'\n      }\n      this.doFallbackRaycast()\n    }\n  }\n\n  onClick (event) {\n    event.preventDefault()\n    if (event.touches && this.iOS) {\n      this.mouse.x = (event.pageX / window.innerWidth) * 2 - 1\n      this.mouse.y = -(event.pageY / window.innerHeight) * 2 + 1\n    } else {\n      this.mouse.x = (event.pageX / window.innerWidth) * 2 - 1\n      this.mouse.y = -(event.pageY / window.innerHeight) * 2 + 1\n    }\n\n    this.doFallbackRaycast()\n\n    if (this.intersected.length) {\n      if (this.intersected[0].name === 'start') {\n        this.app.emit('startgame')\n      } else if (this.intersected[0].name === 'audio') {\n        this.app.emit('shuffleAudio')\n      } else if (this.intersected[0].name.substr(0, 3) === 'way') {\n        const newWay = parseInt(this.intersected[0].name.substr(3, 1), 10)\n        this.app.emit('wayChanged', newWay)\n      }\n    }\n  }\n\n  doFallbackRaycast () {\n    this.cleanIntersected()\n\n    this.raycaster.setFromCamera(this.mouse, this.app.camera)\n    var intersections = this.raycaster.intersectObjects(this.colliders)\n    this.intersection = (intersections.length) > 0 ? intersections[0] : null\n    if (this.intersection !== null) {\n      var object = this.intersection.object\n      object.material.opacity = 0.5\n      this.intersected.push(object)\n    }\n  }\n\n  // Touch screen methods\n  // Swipe on touch screens\n  onTouchStart (e) {\n    var t = e.touches[0]\n    this.swipe.sX = t.screenX\n    this.swipe.sY = t.screenY\n  }\n\n  onTouchMove (e) {\n    var t = e.touches[0]\n    // e.preventDefault()\n    this.swipe.eX = t.screenX\n    this.swipe.eY = t.screenY\n  }\n\n  onTouchEnd (e) {\n    if ((((this.swipe.eX - 60 > this.swipe.sX) || (this.swipe.eX + 60 < this.swipe.sX)) && ((this.swipe.eY < this.swipe.sY + 60) && (this.swipe.sY > this.swipe.eY - 60) && (this.swipe.eX > 0)))) {\n      if (this.swipe.eX > this.swipe.sX) {\n        this.app.emit('wayLeft')\n      } else {\n        this.app.emit('wayRight')\n      }\n    } else {\n      if (this.iOS) {\n        this.onClick(e)\n      }\n    }\n  }\n\n  // common methods\n  getIntersections (controller) {\n    this.tempMatrix.identity().extractRotation(controller.matrixWorld)\n\n    this.raycaster.ray.origin.setFromMatrixPosition(controller.matrixWorld)\n    this.raycaster.ray.direction.set(0, 0, -1).applyMatrix4(this.tempMatrix)\n\n    return this.raycaster.intersectObjects(this.colliders)\n  }\n\n  intersectObjects (controller) {\n    // Do not highlight when already selected\n\n    if (controller.userData.selected !== undefined) return\n\n    var line = controller.getObjectByName('line')\n    var intersections = this.getIntersections(controller)\n\n    if (intersections.length > 0) {\n      var intersection = intersections[0]\n\n      var object = intersection.object\n      object.material.opacity = 0.5\n      this.intersected.push(object)\n\n      line.scale.z = intersection.distance\n    } else {\n      line.scale.z = 5\n    }\n  }\n\n  cleanIntersected () {\n    while (this.intersected.length) {\n      const object = this.intersected.pop()\n      object.material.opacity = 0.25\n    }\n  }\n\n  updateVR () {\n    this.cleanIntersected()\n\n    this.intersectObjects(this.controller1)\n    this.intersectObjects(this.controller2)\n  }\n}\n","import { app } from './context'\nimport Config from './Config'\nimport Utils from './Utils'\n\nmodule.exports = class GameManager {\n  constructor (opt = {}) {\n    this.app = app\n    this.world = opt.world\n    this.rewards = opt.rewards\n    this.scoreboard = opt.scoreboard\n\n    this.correctName = 0\n    // 0 - before start\n    // 1 - started\n    // 2 - catching\n    // 3 - back\n    // 4 - remembering\n    // 5 - lose\n    // 6 - max score 999\n    this.gameStatus = 0\n\n    this.highscore = window.localStorage.getItem('unboring.js13k.back')\n    if (this.highscore !== null) {\n      this.app.emit('scoreboardchanged', this.highscore, true)\n    } else {\n      this.app.emit('scoreboardchanged', this.highscore, true)\n    }\n\n    this.actualWay = 2\n    this.newWay = 2\n    this.correctWay = 2\n    this.targetXpos = 0\n    this.resetGameSettings()\n    this.app.on('startgame', this.startgame.bind(this))\n    this.app.on('wayChanged', this.wayChanged.bind(this))\n    this.app.on('wayLeft', this.wayLeft.bind(this))\n    this.app.on('wayRight', this.wayRight.bind(this))\n    this.app.on('correctWayChanged', this.correctWayChanged.bind(this))\n    this.app.on('tokensShuffled', this.tokensShuffled.bind(this))\n    this.app.on('setCorrectName', this.setCorrectName.bind(this))\n    this.app.on('solveOK', this.solveOK.bind(this))\n    this.app.on('solveERROR', this.solveERROR.bind(this))\n    this.app.on('solveRememberingOK', this.solveRememberingOK.bind(this))\n    this.app.on('solveRememberingERROR', this.solveRememberingERROR.bind(this))\n\n    this.setDefaultTheme()\n  }\n\n  startgame () {\n    this.resetGameSettings()\n    this.gameStatus = 1\n    this.app.emit('scoreboardchanged', this.score, false)\n    this.newCycle()\n  }\n\n  wayChanged (way) {\n    this.newWay = way\n  }\n\n  wayLeft () {\n    if (this.newWay > 0) {\n      this.app.emit('wayChanged', this.newWay - 1)\n    }\n  }\n\n  wayRight () {\n    if (this.newWay < 4) {\n      this.app.emit('wayChanged', this.newWay + 1)\n    }\n  }\n\n  resetGameSettings () {\n    this.solved = false\n    this.errorOnSolved = false\n    this.gameSpeed = 10\n    this.app.emit('speedChanged', this.gameSpeed)\n    this.backSpeed = 50\n    this.cycle = 0\n    this.cyclesPerRound = 1\n    this.caught = 0\n    this.remembered = 0\n    this.tokensStore = []\n    this.score = 0\n  }\n\n  getTargetX (way) {\n    // Only works for 5 ways\n    return (4 - way) * 2 - 4\n  }\n\n  newRound () {\n    this.app.scene.background = new THREE.Color(Config.bgColor)\n    this.app.scene.fog = new THREE.Fog(Config.bgColor, 0, 45)\n    if (this.cyclesPerRound === 5) {\n      this.cyclesPerRound = 1\n    } else {\n      this.cyclesPerRound += 1\n    }\n    this.gameSpeed += 1\n    if (this.gameSpeed > 40) {\n      this.gameSpeed = 40\n    }\n    this.app.emit('speedChanged', this.gameSpeed)\n    this.cycle = 0\n    this.caught = 0\n    this.remembered = 0\n    this.tokensStore = []\n    this.newCycle()\n  }\n\n  newCycle () {\n    if (this.errorOnSolved) {\n      // Error time\n      this.gameStatus = 5\n      this.app.emit('wayChanged', 2)\n      this.endgame()\n      return\n    }\n    if (this.cycle < this.cyclesPerRound && this.caught < this.cyclesPerRound) {\n      // Catching time\n      this.app.emit('replay')\n      this.gameStatus = 2\n      this.app.emit('setHints', this.tokensStore, this.gameStatus, this.cycle, this.cyclesPerRound, this.remembered)\n      this.setCorrectWay()\n\n      Utils.shuffle(Config.colorArr)\n      this.app.emit('shuffleTokens')\n\n      this.app.emit('setBigTokens', this.correctWay)\n    } else if (this.cycle < this.cyclesPerRound * 2 && this.caught === this.cyclesPerRound) {\n      // Back time\n      this.app.emit('rew')\n      this.gameStatus = 3\n      var modBack = this.cycle % this.cyclesPerRound\n      var indexStoredTokens = this.cyclesPerRound - modBack - 1\n      this.app.emit('setStoredTokens')\n      this.placeStoredTokens(indexStoredTokens)\n      this.app.emit('setHints', this.tokensStore, this.gameStatus, this.cycle, this.cyclesPerRound, this.remembered)\n    } else if (this.cycle >= this.cyclesPerRound * 2 && this.remembered < this.caught) {\n      // Remembering time\n      this.app.emit('play')\n      this.gameStatus = 4\n\n      this.app.emit('shuffleStoredTokens')\n      Utils.shuffle(this.tokensStore[this.remembered][0])\n      this.placeStoredTokens(this.remembered)\n\n      this.app.emit('setCorrectRememberedWay', this.tokensStore, this.remembered)\n      this.setDefaultTheme()\n      this.app.emit('setHints', this.tokensStore, this.gameStatus, this.cycle, this.cyclesPerRound, this.remembered)\n    } else if (this.score >= 999) {\n      this.gameStatus = 6\n    } else {\n      // Next round\n      this.newRound()\n      return\n    }\n\n    this.app.emit('resetAtNewCycle')\n    this.solved = false\n    this.world.position.z = 0\n\n    this.cycle++\n  }\n\n  // Ticks\n\n  catchingTick (delta) {\n    this.world.position.z += this.gameSpeed * delta\n    if (Math.abs(this.world.position.z) >= Config.wayLength / 4 - 2 && !this.solved) {\n      this.app.emit('solve', this.actualWay, this.correctName)\n      this.solved = true\n    }\n    if (Math.abs(this.world.position.z) >= Config.wayLength / 4 + 2 && !this.world.tokens.visible) {\n      this.postSolved()\n    }\n    if (Math.abs(this.world.position.z) >= Config.wayLength / 4 + 10) {\n      this.newCycle()\n    }\n  }\n\n  backTick (delta) {\n    this.world.position.z -= this.backSpeed * delta\n    if (this.world.position.z < -Config.wayLength / 3) {\n      this.newCycle()\n    }\n  }\n\n  rememberingTick (delta) {\n    this.world.position.z += this.gameSpeed * delta\n    if (Math.abs(this.world.position.z) >= Config.wayLength / 4 - 2 && !this.solved) {\n      this.app.emit('solveRemembering', this.actualWay, this.correctWay)\n      this.solved = true\n    }\n    if (Math.abs(this.world.position.z) >= Config.wayLength / 4 + 2 && !this.world.tokens.visible) {\n      this.postSolved()\n    }\n    if (Math.abs(this.world.position.z) >= Config.wayLength / 4 + 10) {\n      this.newCycle()\n    }\n  }\n\n  gameTick (delta) {\n    switch (this.gameStatus) {\n      case 2:\n        this.catchingTick(delta)\n        break\n      case 3:\n        this.backTick(delta)\n        break\n      case 4:\n        this.rememberingTick(delta)\n        break\n    }\n\n    if (this.rewards.visible) {\n      var newScale = THREE.Math.lerp(2.5, this.rewards.scale.x, Config.lerpSpeed)\n      this.rewards.scale.set(newScale, newScale, newScale)\n      this.rewards.position.z += 0.01\n    }\n  }\n\n  setDefaultTheme () {\n    var hexStr = '#' + Config.bgColorTop.toString(16)\n    document.querySelector('meta[name=\"theme-color\"]').setAttribute('content', hexStr)\n  }\n\n  setCorrectWay () {\n    this.correctWay = Math.floor(Math.random() * 5)\n    this.app.emit('showCorrectReward', this.correctWay)\n  }\n\n  correctWayChanged (way) {\n    this.correctWay = way\n  }\n\n  tokensShuffled (tokensChildren) {\n    this.tokensStore[this.caught] = [[], []]\n    for (var i = 0; i < tokensChildren.length; i++) {\n      tokensChildren[i].position.x = i * 2 - 4\n      var tmpColor = Config.colorArr[i]\n      tokensChildren[i].material.color.set(tmpColor)\n      this.tokensStore[this.caught][0][i] = [tokensChildren[i].name, tmpColor]\n      if (tokensChildren[i].name === this.correctWay) {\n        this.tokensStore[this.caught][1] = [tokensChildren[i].name, tmpColor]\n      }\n    }\n  }\n\n  placeStoredTokens (index) {\n    for (var i = 0; i < this.tokensStore[index][0].length; i++) {\n      this.app.emit('reorderTokens', this.tokensStore, i, index)\n    }\n  }\n\n  setCorrectName (name) {\n    this.correctName = name\n  }\n\n  postSolved () {\n    this.app.emit('postSolved')\n    this.app.emit('setHints', this.tokensStore, this.gameStatus, this.cycle, this.cyclesPerRound, this.remembered)\n  }\n\n  solveOK () {\n    this.caught += 1\n  }\n\n  solveERROR () {\n    this.errorOnSolved = true\n  }\n\n  solveRememberingOK () {\n    this.remembered += 1\n    this.score += 1\n    this.app.emit('scoreboardchanged', this.score, false)\n  }\n\n  solveRememberingERROR () {\n    this.errorOnSolved = true\n  }\n\n  endgame () {\n    this.app.emit('endgame')\n    this.app.emit('wayChanged', 2)\n    this.app.scene.background = new THREE.Color(Config.bgColor)\n    this.app.scene.fog = new THREE.Fog(Config.bgColor, 0, 45)\n    if (this.score > Number(this.highscore)) {\n      this.highscore = this.score\n      window.localStorage.setItem('unboring.js13k.back', this.score)\n    }\n    this.app.emit('scoreboardchanged', this.highscore, true)\n    this.setDefaultTheme()\n  }\n\n  update (dt) {\n    if (this.gameStatus > 0 && this.gameStatus < 5) {\n      this.gameTick(dt)\n    }\n\n    if (this.newWay !== this.actualWay) {\n      this.actualWay = this.newWay\n      this.targetXpos = this.getTargetX(this.newWay)\n    }\n\n    if (this.targetXpos !== this.world.position.x) {\n      this.world.position.x = THREE.Math.lerp(this.targetXpos, this.world.position.x, Config.lerpSpeed)\n    }\n  }\n}\n","\n// Based on https://sonoport.github.io/synthesising-sounds-webaudio.html\nimport { app } from './context'\n\nmodule.exports = class Synth {\n  constructor () {\n    this.app = app\n\n    window.AudioContext = window.AudioContext || window.webkitAudioContext\n    if (!this.audioContext) {\n      this.audioContext = new AudioContext()\n    }\n    this.gameActive = false\n    this.actualTempo = 0.3\n    this.backTempo = 0.1\n    this.tempo = this.actualTempo\n    this.counter = 0\n\n    // Made based on with https://xem.github.io/miniMusic/\n    this.loopSeq = [0, 0, 14, 14, 0, 0, 12, 12, 0, 0, 11, 11, 0, 0, 12, 12, 0, 14, 12, 11, 12, 0, 0, 9, 8, 7, 0, 7, 0, 7, 0, 7, 0, 0]\n    this.reverseSeq = this.loopSeq.slice(0).reverse()\n    this.errorSeq = [0, 16, 17, 19, 19, 0]\n    this.okSeq = [0, 2, 0]\n    this.clickSeq = [0, 13, 0]\n\n    this.activeSeq = []\n    this.sequencePoint = 0\n    this.actualLoopPoint = 0\n\n    if (!window.localStorage.getItem('unboring.js13k.back.audio')) {\n      this.audioActive = 'false'\n    } else {\n      this.audioActive = window.localStorage.getItem('unboring.js13k.back.audio')\n    }\n\n    this.app.on('startgame', this.startgame.bind(this))\n    this.app.on('endgame', this.endgame.bind(this))\n    this.app.on('solveOK', this.solveOK.bind(this))\n    this.app.on('solveRememberingOK', this.solveOK.bind(this))\n    this.app.on('solveERROR', this.solveERROR.bind(this))\n    this.app.on('solveRememberingERROR', this.solveERROR.bind(this))\n    this.app.on('play', this.playEvent.bind(this))\n    this.app.on('rew', this.rew.bind(this))\n    this.app.on('speedChanged', this.speedChanged.bind(this))\n    this.app.on('shuffleAudio', this.shuffleAudio.bind(this))\n  }\n\n  shuffleAudio () {\n    if (this.audioActive === 'true') {\n      this.audioActive = 'false'\n    } else {\n      this.audioActive = 'true'\n    }\n  }\n\n  startgame () {\n    const osc4 = this.audioContext.createOscillator()\n    if (this.audioActive === 'true') {\n      osc4.frequency.value = 440 * 1.06 ** (12 - 5)\n    } else {\n      console.log(this.audioActive)\n      osc4.frequency.value = 0\n    }\n    osc4.connect(this.audioContext.destination)\n    osc4.start(this.audioContext.currentTime)\n    osc4.stop(this.audioContext.currentTime + this.actualTempo)\n    this.gameActive = true\n    this.activeSeq = this.loopSeq\n    this.sequencePoint = 0\n  }\n\n  endgame () {\n    this.gameActive = false\n    this.activeSeq = []\n  }\n\n  speedChanged (newSpeed) {\n    this.actualTempo = 0.3 - Math.min(0.2, newSpeed / 200)\n    this.tempo = this.actualTempo\n  }\n\n  solveOK () {\n    this.activeSeq = this.okSeq\n    this.actualLoopPoint = this.sequencePoint\n    this.sequencePoint = 0\n  }\n\n  solveERROR () {\n    this.activeSeq = this.errorSeq\n    this.sequencePoint = 0\n  }\n\n  playEvent () {\n    this.tempo = this.actualTempo\n  }\n\n  rew () {\n    this.tempo = this.backTempo\n    this.activeSeq = this.reverseSeq\n    if (this.activeSeq !== this.reverseSeq) {\n      this.sequencePoint = 0\n    }\n  }\n\n  playNote (v) {\n    const osc4 = this.audioContext.createOscillator()\n    osc4.frequency.value = 440 * 1.06 ** (12 - v)\n    osc4.connect(this.audioContext.destination)\n    osc4.start(this.audioContext.currentTime)\n    osc4.stop(this.audioContext.currentTime + this.actualTempo)\n  }\n\n  tick () {\n    if (this.audioActive === 'false') {\n      return\n    }\n    if (this.sequencePoint < this.activeSeq.length) {\n      if (this.activeSeq[this.sequencePoint]) {\n        this.playNote(this.activeSeq[this.sequencePoint])\n        this.app.emit('synth', this.activeSeq[this.sequencePoint])\n      }\n      this.sequencePoint += 1\n    } else {\n      if (this.gameActive) {\n        if (this.activeSeq !== this.loopSeq) {\n          this.activeSeq = this.loopSeq\n          this.sequencePoint = this.actualLoopPoint\n        } else {\n          this.sequencePoint = 0\n        }\n      } else {\n        this.activeSeq = []\n        this.sequencePoint = 0\n      }\n    }\n  }\n\n  update (dt) {\n    this.counter += dt\n    if (this.counter > this.tempo) {\n      this.tick()\n      this.counter = 0\n    }\n  }\n}\n","import vertexShader from './shaders/sky.vert'\nimport fragmentShader from './shaders/sky.frag'\n\nimport { app } from './context'\nimport Config from './Config'\n\nexport default class Sky extends THREE.Group {\n  constructor () {\n    super()\n    const geometry = new THREE.SphereBufferGeometry(100, 64, 64)\n    const material = new THREE.ShaderMaterial(\n      {\n        uniforms: {\n          colorTop: { type: 'c', value: new THREE.Color(Config.bgColorTop) },\n          colorBottom: { type: 'c', value: new THREE.Color(Config.bgColor) }\n        },\n        vertexShader: vertexShader,\n        fragmentShader: fragmentShader,\n        side: THREE.BackSide\n      }\n    )\n    this.shpere = new THREE.Mesh(geometry, material)\n    this.add(this.shpere)\n    this.app = app\n    this.app.on('resetAtNewCycle', this.resetAtNewCycle.bind(this))\n  }\n\n  resetAtNewCycle () {\n\n  }\n\n  update (dt = 0) {\n  }\n}\n","export default \"#define GLSLIFY 1\\nvarying vec3 vWorldPosition;\\n\\nvoid main() {\\n\\n\\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\\n\\tvWorldPosition = worldPosition.xyz;\\n\\t\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n\\n}\"","export default \"#define GLSLIFY 1\\nuniform vec3 colorTop;\\nuniform vec3 colorBottom;\\n\\nvarying vec3 vWorldPosition;\\n\\nvoid main()\\n{\\n\\n\\tvec3 pointOnSphere = normalize(vWorldPosition.xyz);\\n\\tfloat f = sin(pointOnSphere.y * 2.0);\\n\\n\\tgl_FragColor = vec4(mix(colorBottom,colorTop, f ), 1.0);\\n\\n}\\n\"","import vertexShader from './shaders/instancing.vert'\nimport fragmentShader from './shaders/instancing.frag'\n\nimport { app } from './context'\nimport Config from './Config'\n\nexport default class InstancedObjs extends THREE.Group {\n  constructor () {\n    super()\n\n    this.app = app\n    if (this.app.renderer.extensions.get('ANGLE_instanced_arrays') === null) {\n      console.log('Instancing not supported')\n      return\n    }\n    const geometry = this.getGeometry()\n    const material = new THREE.RawShaderMaterial({\n      uniforms: {\n        time: { value: 1.0 },\n        sineTime: { value: 1.0 }\n      },\n      vertexShader: vertexShader,\n      fragmentShader: fragmentShader,\n      side: THREE.DoubleSide,\n      transparent: true\n    })\n    this.mesh = new THREE.Mesh(geometry, material)\n    this.mesh.position.z = -2\n    this.add(this.mesh)\n    this.app.on('resetAtNewCycle', this.resetAtNewCycle.bind(this))\n  }\n\n  getGeometry () {\n    const vector = new THREE.Vector4()\n    const instances = 5000\n    const positions = []\n    const offsets = []\n    const colors = []\n    const orientationsStart = []\n    const orientationsEnd = []\n    positions.push(0.025, -0.025, 0)\n    positions.push(-0.025, 0.025, 0)\n    positions.push(0, 0, 0.025)\n    // instanced attributes\n    for (let i = 0; i < instances; i++) {\n      // offsets\n      offsets.push(Math.random() - 0.5, Math.random() - 0.5, Math.random() - 0.5)\n      // colors\n      colors.push(Math.random(), Math.random(), Math.random(), Math.random())\n      // orientation start\n      vector.set(Math.random() * 2 - 1, Math.random() * 2 - 1, Math.random() * 2 - 1, Math.random() * 2 - 1)\n      vector.normalize()\n      orientationsStart.push(vector.x, vector.y, vector.z, vector.w)\n      // orientation end\n      vector.set(Math.random() * 2 - 1, Math.random() * 2 - 1, Math.random() * 2 - 1, Math.random() * 2 - 1)\n      vector.normalize()\n      orientationsEnd.push(vector.x, vector.y, vector.z, vector.w)\n    }\n    const geometry = new THREE.InstancedBufferGeometry()\n    geometry.maxInstancedCount = instances // set so its initalized for dat.GUI, will be set in first draw otherwise\n    geometry.addAttribute('position', new THREE.Float32BufferAttribute(positions, 3))\n    geometry.addAttribute('offset', new THREE.InstancedBufferAttribute(new Float32Array(offsets), 3))\n    geometry.addAttribute('color', new THREE.InstancedBufferAttribute(new Float32Array(colors), 4))\n    geometry.addAttribute('orientationStart', new THREE.InstancedBufferAttribute(new Float32Array(orientationsStart), 4))\n    geometry.addAttribute('orientationEnd', new THREE.InstancedBufferAttribute(new Float32Array(orientationsEnd), 4))\n\n    return geometry\n  }\n\n  resetAtNewCycle () {\n\n  }\n\n  update (dt = 0, time = 0) {\n    this.mesh.rotation.y = time * 0.1\n    this.mesh.material.uniforms.time.value = time\n    this.mesh.material.uniforms.sineTime.value = Math.sin(this.mesh.material.uniforms.time.value)\n  }\n}\n","export default \"precision highp float;\\n#define GLSLIFY 1\\n\\nuniform float sineTime;\\nuniform mat4 modelViewMatrix;\\nuniform mat4 projectionMatrix;\\n\\nattribute vec3 position;\\nattribute vec3 offset;\\nattribute vec4 color;\\nattribute vec4 orientationStart;\\nattribute vec4 orientationEnd;\\nvarying vec3 vPosition;\\nvarying vec4 vColor;\\n\\nvoid main(){\\n\\tvPosition = offset * max( abs( sineTime * 2.0 + 1.0 ), 0.5 ) + position;\\n\\tvec4 orientation = normalize( mix( orientationStart, orientationEnd, sineTime ) );\\n\\tvec3 vcV = cross( orientation.xyz, vPosition );\\n\\tvPosition = vcV * ( 2.0 * orientation.w ) + ( cross( orientation.xyz, vcV ) * 2.0 + vPosition );\\n\\tvColor = color;\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( vPosition, 1.0 );\\n}\"","export default \"precision highp float;\\n#define GLSLIFY 1\\n\\nuniform float time;\\n\\nvarying vec3 vPosition;\\nvarying vec4 vColor;\\n\\nvoid main() {\\n\\tvec4 color = vec4( vColor );\\n\\tcolor.r += sin( vPosition.x * 10.0 + time ) * 0.5;\\n\\tgl_FragColor = color;\\n}\""],"sourceRoot":""}