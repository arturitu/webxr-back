{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/context.js","webpack:///./src/Config.js","webpack:///./src/Utils.js","webpack:///./src/index.js","webpack:///./src/App.js","webpack:///./node_modules/events/events.js","webpack:///./src/startup.js","webpack:///./src/World.js","webpack:///./src/Tokens.js","webpack:///./src/Ways.js","webpack:///./src/Rewards.js","webpack:///./src/Scoreboard.js","webpack:///./src/StartBtn.js","webpack:///./src/Hints.js","webpack:///./src/HintGroup.js","webpack:///./src/BigTokens.js","webpack:///./src/Score.js","webpack:///./src/PlayRewPanels.js","webpack:///./src/AudioBtn.js","webpack:///./src/InputManager.js","webpack:///./src/GameManager.js","webpack:///./src/Synth.js","webpack:///./src/Sky.js","webpack:///./src/shaders/sky.vert","webpack:///./src/shaders/sky.frag","webpack:///./src/InstancedObjs.js","webpack:///./src/shaders/instancing.vert","webpack:///./src/shaders/instancing.frag"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","app","App","instance","this","bgColorTop","bgColor","wayColor","wayColorOver","wayLength","scoreColor","scoreColorOff","highscoreColor","colorArr","defaultColorArr","transitionSpeed","lerpSpeed","maxHints","Utils","array","sort","Math","random","c0","c1","R1","G1","B1","R2","G2","B2","round","toString","slice","require","isVRActive","time","prevTime","window","performance","now","renderer","THREE","WebGLRenderer","antialias","setPixelRatio","devicePixelRatio","setSize","innerWidth","innerHeight","vr","enabled","document","body","appendChild","domElement","WEBVR","createButton","referenceSpaceType","scene","Scene","fog","Fog","Config","camera","PerspectiveCamera","layers","enable","addEventListener","resize","animate","EventEmitter","aspect","updateProjectionMatrix","setAnimationLoop","render","timeNow","delta","update","isPresenting","emit","inputManager","updateVR","gameManager","synth","dt","traverse","obj","ReflectOwnKeys","R","Reflect","ReflectApply","apply","target","receiver","args","Function","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","concat","NumberIsNaN","Number","isNaN","init","_events","undefined","_eventsCount","_maxListeners","defaultMaxListeners","$getMaxListeners","that","_addListener","type","listener","prepend","events","existing","warning","TypeError","newListener","unshift","push","length","warned","w","Error","String","emitter","count","console","warn","onceWrapper","arguments","fired","removeListener","wrapFn","_onceWrap","state","wrapped","_listeners","unwrap","evlistener","arr","ret","Array","unwrapListeners","arrayClone","listenerCount","copy","set","arg","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","error","er","err","message","context","handler","len","listeners","addListener","on","prependListener","once","prependOnceListener","list","position","originalListener","shift","index","pop","spliceOne","off","removeAllListeners","keys","rawListeners","eventNames","InputManager","scoreboard","Scoreboard","add","world","World","rewards","Rewards","GameManager","Synth","sky","Sky","instancedObjs","InstancedObjs","y","tokens","Tokens","ways","Ways","Group","tokensInitialPosZ","z","addTokens","setCorrectRememberedWay","shuffleTokens","reorderTokens","setStoredTokens","shuffleStoredTokens","solve","solveRemembering","postSolved","tokenGeometry","RingBufferGeometry","tokenMaterial","MeshBasicMaterial","color","side","DoubleSide","token","Mesh","x","tokensStore","children","shuffle","tmpColor","material","j","actualWay","correcName","visible","correctWay","addWays","startgame","endgame","countEffect","wayGeometry","PlaneBufferGeometry","rotateX","PI","wayMaterial","transparent","opacity","way","addCollider","removeCollider","val","radius","addRewards","addErrorReward","showCorrectReward","resetAtNewCycle","solveERROR","rewardMaterial","LineBasicMaterial","rewardGeometry","getRewardGeometry","reward","Line","crossShape","Shape","moveTo","lineTo","geometry","ShapeGeometry","mesh","scale","correctName","segmentCount","Geometry","theta","vertices","Vector3","cos","sin","startBtn","StartBtn","hints","Hints","bigTokens","BigTokens","score","Score","playRewPanels","PlayRewPanels","audioBtn","AudioBtn","interactiveObj","CircleBufferGeometry","lineMaterial","lineGeometry","line","rotation","Object3D","hintGroup","HintGroup","setHints","gameStatus","cycle","cyclesPerRound","remembered","updateHint","hintGeometry","hintMaterial","hint","hintMaterialTmp","geometryTmp","hintTmp","tokenAdded","setBigTokens","geo","mat","hexStr","getHexString","log","getHex","canvas","createElement","width","height","style","display","getContext","font","textAlign","fillStyle","actualScore","fillText","depthTest","map","CanvasTexture","plane","setScore","highscore","replay","play","clearRect","needsUpdate","valStr","stop","rew","beginPath","strokeStyle","lineWidth","localStorage","getItem","audioActive","setAudio","shuffleAudio","setItem","stroke","toggleVR","iOS","navigator","platform","test","raycaster","Raycaster","intersected","tempMatrix","Matrix4","mouse","Vector2","intersection","colliders","swipe","sX","sY","eX","eY","addControllers","onDocumentMouseMove","onClick","onTouchStart","onTouchMove","onTouchEnd","bool","controller1","controller2","getController","onSelectStart","onSelectEnd","geometryHelper","BufferGeometry","setFromPoints","materialHelper","clone","collider","indexOf","splice","forEach","event","controller","intersections","getIntersections","substr","newWay","parseInt","preventDefault","targetTouches","pageX","pageY","cursor","doFallbackRaycast","touches","cleanIntersected","setFromCamera","intersectObjects","e","screenX","screenY","identity","extractRotation","matrixWorld","ray","origin","setFromMatrixPosition","direction","applyMatrix4","userData","selected","getObjectByName","distance","opt","targetXpos","resetGameSettings","wayChanged","wayLeft","wayRight","correctWayChanged","tokensShuffled","setCorrectName","solveOK","solveRememberingOK","solveRememberingERROR","setDefaultTheme","newCycle","solved","errorOnSolved","gameSpeed","backSpeed","caught","setCorrectWay","modBack","indexStoredTokens","placeStoredTokens","newRound","abs","catchingTick","backTick","rememberingTick","newScale","lerp","querySelector","setAttribute","floor","tokensChildren","gameTick","getTargetX","AudioContext","webkitAudioContext","audioContext","gameActive","actualTempo","backTempo","tempo","counter","loopSeq","reverseSeq","reverse","errorSeq","okSeq","clickSeq","activeSeq","sequencePoint","actualLoopPoint","playEvent","speedChanged","osc4","createOscillator","frequency","connect","destination","start","currentTime","newSpeed","min","v","playNote","tick","SphereBufferGeometry","ShaderMaterial","uniforms","colorTop","Color","colorBottom","vertexShader","fragmentShader","BackSide","shpere","changingColor","prevTopColor","prevBottomColor","topColor","bottomColor","colorChanged","isDefault","endColor","blendColors","updateColors","colorTransitionEnds","extensions","currentVector","audioDistortion","getGeometry","RawShaderMaterial","sineTime","fogColor","fogFar","fogNear","prevFogColor","changedToBackSpeed","bufferGeometry","InstancedBufferGeometry","attributes","uv","offsets","orientations","scales","vector","Vector4","actualSpeed","totalObjs","tmpVal","normalize","quaternion","Quaternion","setFromAxisAngle","scaleAttribute","InstancedBufferAttribute","Float32Array","setDynamic","offsetAttribute","orientationAttribute","addAttribute","transitionFogColor","il","setXYZ","getZ","setZ"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","import App from './App'\n\nconst app = new App()\n\nmodule.exports = {\n  app\n}\n","let instance = null\n// Singleton pattern in ES6 example\nclass Config {\n  constructor () {\n    if (!instance) {\n      this.bgColorTop = 0x212121\n      this.bgColor = 0x323232\n\n      this.wayColor = 0xffffff\n      this.wayColorOver = 0x666666\n      this.wayLength = 200\n      this.scoreColor = 0xffffff\n      this.scoreColorOff = 0x444444\n      this.highscoreColor = 0xffcc00\n\n      // pink 0\n      // yellow 1\n      // green 2\n      // orange 3\n      // blue 4\n      // purple 5\n      // white 6\n      // red 7\n      // Each color has > [token color, sky top color, sky bottom color]\n      this.colorArr = [\n        [0xfb39ca, 0x483361, 0x9a6a85],\n        [0xfdca2a, 0x2c261a, 0x97816e],\n        [0x2bca20, 0x3b2d35, 0x74986d],\n        [0xfc9125, 0x2d3e5d, 0x9a8f78],\n        [0x0d6afc, 0x43293b, 0x607495],\n        [0x6419cb, 0x6c2f59, 0x855db6],\n        [0xffffff, 0x65573b, 0x747474],\n        [0xfa0018, 0x354631, 0xb55e69]\n      ]\n\n      this.defaultColorArr = [0x000000, 0x212121, 0x323232]\n      this.transitionSpeed = 2\n      this.lerpSpeed = 0.9\n      this.maxHints = 6\n      instance = this\n    }\n    return instance\n  }\n}\n\nexport default new Config()\n","let instance = null\nclass Utils {\n  constructor () {\n    if (!instance) {\n      instance = this\n    }\n    return instance\n  }\n\n  shuffle (array) {\n    array.sort(() => Math.random() - 0.5)\n  }\n\n  // http://stackoverflow.com/questions/5560248/programmatically-lighten-or-darken-a-hex-color-or-rgb-and-blend-colors\n  // Modified to admit 0x (now not admit #)\n  // Lighter colors blendColors(color, 0xFFFFFF, 0.5)\n  // Darker colors blendColors(color, 0x000000, 0.5)\n  blendColors (c0, c1, p) {\n    const f = c0; const t = c1; const R1 = f >> 16; const G1 = f >> 8 & 0x00FF; const B1 = f & 0x0000FF; const R2 = t >> 16; const G2 = t >> 8 & 0x00FF; const B2 = t & 0x0000FF\n    return '#' + (0x1000000 + (Math.round((R2 - R1) * p) + R1) * 0x10000 + (Math.round((G2 - G1) * p) + G1) * 0x100 + (Math.round((B2 - B1) * p) + B1)).toString(16).slice(1)\n  }\n}\n\nexport default new Utils()\n","require('./context')\nrequire('./startup')()\n","import { EventEmitter } from 'events'\nimport Config from './Config'\n\nexport default class App extends EventEmitter {\n  constructor (opt = {}) {\n    super()\n\n    this.isVRActive = false\n    this.time = 0\n    this.prevTime = window.performance.now()\n    this.renderer = new THREE.WebGLRenderer({ antialias: true })\n    this.renderer.setPixelRatio(window.devicePixelRatio)\n    this.renderer.setSize(window.innerWidth, window.innerHeight)\n    this.renderer.vr.enabled = true\n\n    document.body.appendChild(this.renderer.domElement)\n\n    // WebXR\n    document.body.appendChild(THREE.WEBVR.createButton(this.renderer, { referenceSpaceType: 'local' }))\n\n    this.scene = new THREE.Scene()\n    this.scene.fog = new THREE.Fog(Config.bgColor, 0, 45)\n\n    this.camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000)\n    this.camera.layers.enable(1)\n\n    window.addEventListener('resize', () => this.resize())\n\n    this.animate()\n  }\n\n  resize () {\n    this.camera.aspect = window.innerWidth / window.innerHeight\n    this.camera.updateProjectionMatrix()\n\n    this.renderer.setSize(window.innerWidth, window.innerHeight)\n  }\n\n  animate () {\n    this.renderer.setAnimationLoop(this.render.bind(this))\n  }\n\n  render () {\n    const timeNow = window.performance.now()\n    const delta = (timeNow - this.prevTime) / 1000\n    this.prevTime = timeNow\n    this.time += delta\n    this.update(delta, this.time)\n\n    if (this.isVRActive !== this.renderer.vr.isPresenting()) {\n      this.emit('toggleVR', this.renderer.vr.isPresenting())\n      this.isVRActive = this.renderer.vr.isPresenting()\n      if (this.isVRActive) {\n        Config.lerpSpeed = 0.75\n      } else {\n        Config.lerpSpeed = 0.9\n      }\n    }\n    if (this.renderer.vr.isPresenting()) {\n      this.inputManager.updateVR()\n    }\n\n    this.gameManager.update(delta)\n    this.synth.update(delta)\n\n    this.renderer.render(this.scene, this.camera)\n  }\n\n  update (dt = 0, time = 0) {\n    // recursively tell all child objects to update\n    this.scene.traverse(obj => {\n      if (typeof obj.update === 'function') {\n        obj.update(dt, time)\n      }\n    })\n\n    return this\n  }\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction $getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return $getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = $getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  var args = [];\n  for (var i = 0; i < arguments.length; i++) args.push(arguments[i]);\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    ReflectApply(this.listener, this.target, args);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      if (typeof listener !== 'function') {\n        throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n      }\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      if (typeof listener !== 'function') {\n        throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n      }\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n","import { app } from './context'\nimport World from './World'\nimport Rewards from './Rewards'\nimport Scoreboard from './Scoreboard'\n\nimport InputManager from './InputManager'\nimport GameManager from './GameManager'\nimport Synth from './Synth'\nimport Sky from './Sky'\nimport InstancedObjs from './InstancedObjs'\n\nmodule.exports = function () {\n  app.inputManager = new InputManager()\n  const scoreboard = new Scoreboard()\n  app.scene.add(scoreboard)\n  const world = new World()\n  app.scene.add(world)\n  const rewards = new Rewards()\n  app.scene.add(rewards)\n  app.gameManager = new GameManager({\n    world: world,\n    rewards: rewards,\n    scoreboard: scoreboard\n  })\n  const synth = new Synth()\n  app.synth = synth\n  const sky = new Sky()\n  app.scene.add(sky)\n  const instancedObjs = new InstancedObjs()\n  app.scene.add(instancedObjs)\n}\n","import Tokens from './Tokens'\nimport Ways from './Ways'\n\nexport default class World extends THREE.Group {\n  constructor () {\n    super()\n    this.position.y = -1.7\n    this.tokens = new Tokens()\n    this.ways = new Ways()\n    this.add(this.tokens)\n    this.add(this.ways)\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\nimport Config from './Config'\nimport Utils from './Utils'\n\nexport default class Tokens extends THREE.Group {\n  constructor () {\n    super()\n    this.app = app\n    this.tokensInitialPosZ = 50\n    this.position.z = -this.tokensInitialPosZ\n    this.addTokens()\n    this.app.on('setCorrectRememberedWay', this.setCorrectRememberedWay.bind(this))\n    this.app.on('shuffleTokens', this.shuffleTokens.bind(this))\n    this.app.on('reorderTokens', this.reorderTokens.bind(this))\n    this.app.on('setStoredTokens', this.setStoredTokens.bind(this))\n    this.app.on('shuffleStoredTokens', this.shuffleStoredTokens.bind(this))\n    this.app.on('solve', this.solve.bind(this))\n    this.app.on('solveRemembering', this.solveRemembering.bind(this))\n    this.app.on('postSolved', this.postSolved.bind(this))\n  }\n\n  addTokens () {\n    for (let i = 0; i < 5; i++) {\n      let tokenGeometry\n      switch (i) {\n        case 0:\n          tokenGeometry = new THREE.RingBufferGeometry(0.25, 0.35, 3)\n          break\n        case 1:\n          tokenGeometry = new THREE.RingBufferGeometry(0.25, 0.35, 4)\n          break\n        case 2:\n          tokenGeometry = new THREE.RingBufferGeometry(0.25, 0.35, 5)\n          break\n        case 3:\n          tokenGeometry = new THREE.RingBufferGeometry(0.25, 0.35, 6)\n          break\n        case 4:\n          tokenGeometry = new THREE.RingBufferGeometry(0.25, 0.35, 32)\n          break\n      }\n      const tokenMaterial = new THREE.MeshBasicMaterial({ color: 0xffffff, side: THREE.DoubleSide })\n      const token = new THREE.Mesh(tokenGeometry, tokenMaterial)\n      token.name = i\n      token.position.x = i * 2 - 4\n      token.position.y = 1.5\n      this.app.emit('tokenAdded', tokenGeometry, tokenMaterial, i)\n      this.add(token)\n    }\n    this.app.emit('allTokensAdded')\n  }\n\n  setCorrectRememberedWay (tokensStore, index) {\n    for (var i = 0; i < this.children.length; i++) {\n      if (this.children[i].name === tokensStore[index][1][0]) {\n        this.app.emit('correctWayChanged', (this.children[i].position.x + 4) / 2)\n        this.app.emit('showCorrectReward', this.children[i].name)\n      }\n    }\n  }\n\n  shuffleTokens () {\n    Utils.shuffle(this.children)\n    for (var i = 0; i < this.children.length; i++) {\n      this.children[i].position.x = i * 2 - 4\n      var tmpColor = Config.colorArr[i][0]\n      this.children[i].material.color.set(tmpColor)\n    }\n    this.app.emit('tokensShuffled', this.children)\n  }\n\n  setStoredTokens () {\n    this.position.z = this.tokensInitialPosZ / 2\n  }\n\n  shuffleStoredTokens () {\n    this.position.z = -this.tokensInitialPosZ\n  }\n\n  reorderTokens (tokensStore, i, index) {\n    for (var j = 0; j < this.children.length; j++) {\n      if (this.children[j].name === tokensStore[index][0][i][0]) {\n        this.children[j].position.x = i * 2 - 4\n        this.children[j].material.color.set(tokensStore[index][0][i][1])\n      }\n    }\n  }\n\n  solve (actualWay, correcName) {\n    if (this.children[actualWay].name === correcName) {\n      this.app.emit('solveOK')\n    } else {\n      this.app.emit('solveERROR')\n    }\n    this.visible = false\n  }\n\n  solveRemembering (actualWay, correctWay) {\n    if (this.children[actualWay].name === this.children[correctWay].name) {\n      this.app.emit('solveRememberingOK')\n    } else {\n      this.app.emit('solveRememberingERROR')\n    }\n    this.visible = false\n  }\n\n  postSolved () {\n    this.visible = true\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\nimport Config from './Config'\n\nexport default class Ways extends THREE.Group {\n  constructor () {\n    super()\n    this.app = app\n    this.addWays()\n    this.app.on('startgame', this.startgame.bind(this))\n    this.app.on('endgame', this.endgame.bind(this))\n    this.app.on('synth', this.synth.bind(this))\n\n    this.countEffect = 0\n  }\n\n  addWays () {\n    const wayGeometry = new THREE.PlaneBufferGeometry(1.9, Config.wayLength, 1, 1)\n    wayGeometry.rotateX(-Math.PI / 2)\n    for (let i = 0; i < 5; i++) {\n      const wayMaterial = new THREE.MeshBasicMaterial({ transparent: true, opacity: 0.25, color: Config.wayColor })\n      const way = new THREE.Mesh(wayGeometry, wayMaterial)\n      way.name = 'way' + i\n      way.position.x = (i * 2) - 4\n      way.position.y = 0.1\n      way.position.z = 0\n      this.add(way)\n    }\n  }\n\n  startgame () {\n    for (let i = 0; i < this.children.length; i++) {\n      this.app.inputManager.addCollider(this.children[i])\n    }\n  }\n\n  endgame () {\n    for (let i = 0; i < this.children.length; i++) {\n      this.app.inputManager.removeCollider(this.children[i])\n    }\n    // for (let i = 0; i < this.children.length; i++) {\n    //   this.children[i].material.opacity = 1\n    // }\n  }\n\n  synth (val) {\n    // for (let i = 0; i < this.children.length; i++) {\n    //   this.children[i].material.opacity = 1\n    // }\n    // this.children[this.countEffect].material.opacity = 1 - ((val * 4) / 100)\n    // if (this.countEffect >= this.children.length - 1) {\n    //   this.countEffect = 0\n    // } else {\n    //   this.countEffect += 1\n    // }\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\n// import Config from './Config'\n\nexport default class Rewards extends THREE.Group {\n  constructor () {\n    super()\n    this.app = app\n    this.radius = 0.05\n    this.position.z = -0.5\n    this.position.y = -0.05\n    this.addRewards()\n    this.addErrorReward()\n    this.visible = false\n    this.app.on('showCorrectReward', this.showCorrectReward.bind(this))\n    this.app.on('resetAtNewCycle', this.resetAtNewCycle.bind(this))\n    this.app.on('solve', this.solve.bind(this))\n    this.app.on('solveERROR', this.solveERROR.bind(this))\n    this.app.on('solveRemembering', this.solve.bind(this))\n    this.app.on('solveRememberingERROR', this.solveERROR.bind(this))\n    this.app.on('endgame', this.endgame.bind(this))\n  }\n\n  addRewards () {\n    const rewardMaterial = new THREE.LineBasicMaterial({ color: 0xffffff })\n    for (let i = 0; i < 5; i++) {\n      let rewardGeometry\n      switch (i) {\n        case 0:\n          rewardGeometry = this.getRewardGeometry(3)\n          break\n        case 1:\n          rewardGeometry = this.getRewardGeometry(4)\n          break\n        case 2:\n          rewardGeometry = this.getRewardGeometry(5)\n          break\n        case 3:\n          rewardGeometry = this.getRewardGeometry(6)\n          break\n        case 4:\n          rewardGeometry = this.getRewardGeometry(32)\n          break\n      }\n      const reward = new THREE.Line(rewardGeometry, rewardMaterial)\n      reward.name = i\n      this.add(reward)\n    }\n  }\n\n  addErrorReward () {\n    const crossShape = new THREE.Shape()\n    crossShape.moveTo(0, -7.5)\n    crossShape.lineTo(-32.5, -40)\n    crossShape.lineTo(-40, -32.5)\n    crossShape.lineTo(-7.5, 0)\n    crossShape.lineTo(-40, 32.5)\n    crossShape.lineTo(-32.5, 40)\n    crossShape.lineTo(0, 10)\n    crossShape.lineTo(32.5, 40)\n    crossShape.lineTo(40, 32.5)\n    crossShape.lineTo(10, 0)\n    crossShape.lineTo(40, -32.5)\n    crossShape.lineTo(32.5, -40)\n    crossShape.lineTo(0, -7.5)\n    const geometry = new THREE.ShapeGeometry(crossShape)\n    const material = new THREE.MeshBasicMaterial()\n    const mesh = new THREE.Mesh(geometry, material)\n    mesh.scale.set(this.radius * 0.02, this.radius * 0.02, this.radius * 0.02)\n    this.add(mesh)\n  }\n\n  showCorrectReward (correctName) {\n    for (var i = 0; i < this.children.length; i++) {\n      if (this.children[i].name === correctName) {\n        this.children[i].visible = true\n      } else {\n        this.children[i].visible = false\n      }\n    }\n  }\n\n  getRewardGeometry (segmentCount) {\n    var rewardGeometry = new THREE.Geometry()\n    for (var i = 0; i <= segmentCount; i++) {\n      var theta = (i / segmentCount) * Math.PI * 2\n      rewardGeometry.vertices.push(\n        new THREE.Vector3(\n          Math.cos(theta) * this.radius,\n          Math.sin(theta) * this.radius,\n          0))\n    }\n    return rewardGeometry\n  }\n\n  resetAtNewCycle () {\n    this.position.z = -0.5\n    this.visible = false\n  }\n\n  solve () {\n    this.scale.set(0.1, 0.1, 0.1)\n    this.visible = true\n  }\n\n  solveERROR () {\n    for (var i = 0; i < this.children.length; i++) {\n      if (i === this.children.length - 1) {\n        this.children[i].visible = true\n      } else {\n        this.children[i].visible = false\n      }\n    }\n  }\n\n  endgame () {\n    this.visible = false\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\nimport StartBtn from './StartBtn'\nimport Hints from './Hints'\nimport BigTokens from './BigTokens'\nimport Score from './Score'\nimport PlayRewPanels from './PlayRewPanels'\nimport AudioBtn from './AudioBtn'\n\nexport default class Scoreboard extends THREE.Group {\n  constructor () {\n    super()\n    this.app = app\n    this.position.set(0, 1.25, -5)\n\n    this.startBtn = new StartBtn()\n    this.startBtn.position.set(0, 0.2, 0)\n    this.add(this.startBtn)\n\n    this.hints = new Hints()\n    this.hints.position.set(0, 1, 0)\n    this.hints.visible = false\n    this.add(this.hints)\n\n    this.bigTokens = new BigTokens()\n    this.bigTokens.position.set(0, 0.5, 0)\n    this.bigTokens.visible = false\n    this.add(this.bigTokens)\n\n    this.score = new Score()\n    this.score.position.set(0, 1.5, 0)\n    this.add(this.score)\n\n    this.playRewPanels = new PlayRewPanels()\n    this.playRewPanels.position.set(0, 0.5, 0)\n    this.playRewPanels.visible = false\n    this.add(this.playRewPanels)\n\n    this.audioBtn = new AudioBtn()\n    this.audioBtn.position.set(0, 2.25, 0)\n    this.add(this.audioBtn)\n\n    this.app.on('startgame', this.startgame.bind(this))\n    this.app.on('endgame', this.endgame.bind(this))\n  }\n\n  startgame () {\n    this.startBtn.interactiveObj.visible = false\n  }\n\n  endgame () {\n    this.score.visible = true\n    this.startBtn.interactiveObj.visible = true\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\nimport Config from './Config'\n\nexport default class StartBtn extends THREE.Object3D {\n  constructor () {\n    super()\n    this.app = app\n    this.interactiveObj = new THREE.Mesh(\n      new THREE.CircleBufferGeometry(0.7, 0),\n      new THREE.MeshBasicMaterial({\n        transparent: true,\n        opacity: 0.25,\n        color: Config.wayColor\n      })\n    )\n    this.interactiveObj.name = 'start'\n    this.add(this.interactiveObj)\n    this.app.inputManager.addCollider(this.interactiveObj)\n\n    const radius = 0.85\n    const lineMaterial = new THREE.LineBasicMaterial({ color: 0xffffff })\n    const lineGeometry = new THREE.Geometry()\n    for (var i = 0; i <= 3; i++) {\n      var theta = (i / 3) * Math.PI * 2\n      lineGeometry.vertices.push(\n        new THREE.Vector3(\n          Math.cos(theta) * radius,\n          Math.sin(theta) * radius,\n          0))\n    }\n    const line = new THREE.Line(lineGeometry, lineMaterial)\n    line.rotation.z = Math.PI / 64\n    this.interactiveObj.add(line)\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\nimport Config from './Config'\nimport HintGroup from './HintGroup'\n\nexport default class Hints extends THREE.Group {\n  constructor () {\n    super()\n    this.app = app\n    this.maxHints = 6\n    for (let i = 0; i < Config.maxHints; i++) {\n      var hintGroup = new HintGroup()\n      hintGroup.scale.set(0.25, 0.25, 0.25)\n      hintGroup.position.x = -0.62 + i * 0.25\n      this.add(hintGroup)\n    }\n    this.app.on('setHints', this.setHints.bind(this))\n    this.app.on('endgame', this.endgame.bind(this))\n  }\n\n  setHints (tokensStore, gameStatus, cycle, cyclesPerRound, remembered) {\n    for (var i = 0; i < this.children.length; i++) {\n      if (i < cyclesPerRound) {\n        this.children[i].visible = true\n        if (gameStatus === 2) {\n          if (tokensStore[i]) {\n            this.updateHint(i, tokensStore[i][1][0], tokensStore[i][1][1])\n          } else {\n            this.updateHint(i, 'hidden')\n          }\n        }\n        if (gameStatus === 3) {\n          var modBack = cycle % cyclesPerRound\n          var indexStoredTokens = cyclesPerRound - modBack - 1\n          if (indexStoredTokens < i) {\n            this.updateHint(i, 'hidden')\n          } else {\n            this.updateHint(i, tokensStore[i][1][0], tokensStore[i][1][1])\n          }\n        }\n        if (gameStatus === 4) {\n          if (i < remembered) {\n            this.updateHint(i, tokensStore[i][1][0], tokensStore[i][1][1])\n          } else {\n            this.updateHint(i, 'hidden')\n          }\n        }\n      } else {\n        this.children[i].visible = false\n      }\n    }\n    this.position.x = (((this.maxHints / 2) * 0.25) - (cyclesPerRound * 0.25) / 2)\n    this.visible = true\n  }\n\n  updateHint (index, name, color) {\n    for (var i = 0; i < this.children[index].children.length; i++) {\n      if (this.children[index].children[i].name === name) {\n        this.children[index].children[i].visible = true\n        if (this.children[index].children[i].name !== 'hidden') {\n          this.children[index].children[i].material.color.set(color)\n        }\n      } else {\n        this.children[index].children[i].visible = false\n      }\n    }\n  }\n\n  endgame () {\n    this.visible = false\n  }\n\n  update (dt = 0) {\n  }\n}\n","import Config from './Config'\n\nexport default class HintGroup extends THREE.Group {\n  constructor () {\n    super()\n    const hintGeometry = new THREE.CircleBufferGeometry(0.35, 32)\n    const hintMaterial = new THREE.MeshBasicMaterial()\n    var hint = new THREE.Mesh(hintGeometry, hintMaterial)\n    hint.name = 'hidden'\n    this.add(hint)\n    for (let i = 0; i < 5; i++) {\n      var hintMaterialTmp = new THREE.MeshBasicMaterial()\n      let geometryTmp\n      switch (i) {\n        case 0:\n          geometryTmp = new THREE.RingBufferGeometry(0.25, 0.35, 3)\n          break\n        case 1:\n          geometryTmp = new THREE.RingBufferGeometry(0.25, 0.35, 4)\n          break\n        case 2:\n          geometryTmp = new THREE.RingBufferGeometry(0.25, 0.35, 5)\n          break\n        case 3:\n          geometryTmp = new THREE.RingBufferGeometry(0.25, 0.35, 6)\n          break\n        case 4:\n          geometryTmp = new THREE.RingBufferGeometry(0.25, 0.35, 32)\n          break\n      }\n      const hintTmp = new THREE.Mesh(geometryTmp, hintMaterialTmp)\n      hintTmp.name = i\n      this.add(hintTmp)\n    }\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\n\nexport default class BigTokens extends THREE.Group {\n  constructor () {\n    super()\n    this.app = app\n    // this.addTokens()\n    this.app.on('tokenAdded', this.tokenAdded.bind(this))\n    this.app.on('setBigTokens', this.setBigTokens.bind(this))\n    this.app.on('postSolved', this.postSolved.bind(this))\n    this.app.on('endgame', this.endgame.bind(this))\n  }\n\n  tokenAdded (geo, mat, i) {\n    const token = new THREE.Mesh(geo, mat)\n    token.name = i\n    this.add(token)\n  }\n\n  setBigTokens (correctWay) {\n    for (var i = 0; i < this.children.length; i++) {\n      if (this.children[i].name === correctWay) {\n        this.children[i].visible = true\n        var hexStr = '#' + this.children[i].material.color.getHexString()\n        console.log(hexStr)\n        this.app.emit('colorChanged', this.children[i].material.color.getHex(), false)\n        // document.querySelector('meta[name=\"theme-color\"]').setAttribute('content', hexStr)\n        this.app.emit('setCorrectName', this.children[i].name)\n      } else {\n        this.children[i].visible = false\n      }\n    }\n    this.visible = true\n  }\n\n  postSolved () {\n    this.visible = false\n  }\n\n  endgame () {\n    this.visible = false\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\nimport Config from './Config'\n\nexport default class Score extends THREE.Group {\n  constructor () {\n    super()\n    this.app = app\n    this.canvas = document.createElement('canvas')\n    this.canvas.width = 512\n    this.canvas.height = 128\n    this.canvas.style.display = 'none'\n    document.body.appendChild(this.canvas)\n\n    this.context = this.canvas.getContext('2d')\n    this.context.font = 'bold 72px sans-serif'\n    this.context.textAlign = 'center'\n    this.hexStr = '#' + Config.scoreColor.toString(16)\n    this.context.fillStyle = this.hexStr\n    this.actualScore = '000'\n    this.context.fillText(this.actualScore, this.canvas.width / 2, this.canvas.height / 2 + 32)\n\n    this.material = new THREE.MeshBasicMaterial({\n      transparent: true,\n      depthTest: false\n    })\n    this.material.map = new THREE.CanvasTexture(this.canvas)\n    this.plane = new THREE.Mesh(new THREE.PlaneBufferGeometry(4, 1), this.material)\n    this.add(this.plane)\n    // this.setScore(7, true)\n    this.setScore(0, false)\n    this.app.on('scoreboardchanged', (val, highscore) => {\n      this.setScore(val, highscore)\n    })\n    this.app.on('replay', this.replay.bind(this))\n    this.app.on('play', this.play.bind(this))\n  }\n\n  replay () {\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)\n    // this.hexStr = '#' + Config.scoreColorOff.toString(16)\n    // this.context.fillStyle = this.hexStr\n    this.material.opacity = 0.15\n    this.context.font = 'bold 72px sans-serif'\n    this.context.fillText(this.actualScore, this.canvas.width / 2, this.canvas.height / 2 + 32)\n    this.material.map.needsUpdate = true\n  }\n\n  play () {\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)\n    // this.hexStr = '#' + Config.scoreColor.toString(16)\n    // this.context.fillStyle = this.hexStr\n    this.material.opacity = 1\n    this.context.font = 'bold 72px sans-serif'\n    this.context.fillText(this.actualScore, this.canvas.width / 2, this.canvas.height / 2 + 32)\n    this.material.map.needsUpdate = true\n  }\n\n  setScore (val, highscore) {\n    let valStr = Number(val).toString()\n    if (valStr.length > 3) {\n      valStr = '999'\n    } else if (valStr.length === 2) {\n      valStr = '0' + valStr\n    } else if (valStr.length === 1) {\n      valStr = '00' + valStr\n    }\n\n    this.actualScore = valStr\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)\n\n    if (highscore) {\n      this.material.opacity = 1\n      this.hexStr = '#' + Config.highscoreColor.toString(16)\n      this.context.fillStyle = this.hexStr\n      this.context.font = 'bolder 28px sans-serif'\n      this.context.fillText('YOURBEST', this.canvas.width / 2, this.canvas.height / 2 - 42)\n      this.context.font = 'bolder 96px sans-serif'\n    } else {\n      this.material.opacity = 0.8\n      this.hexStr = '#' + Config.scoreColor.toString(16)\n      this.context.fillStyle = this.hexStr\n      this.context.font = 'bold 72px sans-serif'\n    }\n    this.context.fillText(valStr, this.canvas.width / 2, this.canvas.height / 2 + 32)\n    this.material.map.needsUpdate = true\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\nimport Config from './Config'\n\nexport default class PlayRewPanels extends THREE.Group {\n  constructor () {\n    super()\n    this.app = app\n    this.canvas = document.createElement('canvas')\n    this.canvas.width = 512\n    this.canvas.height = 128\n    this.canvas.style.display = 'none'\n    document.body.appendChild(this.canvas)\n\n    this.context = this.canvas.getContext('2d')\n    this.context.font = 'bold 72px sans-serif'\n    this.context.textAlign = 'center'\n    this.hexStr = '#' + Config.scoreColor.toString(16)\n    this.context.fillStyle = this.hexStr\n    this.material = new THREE.MeshBasicMaterial({\n      transparent: true\n    })\n    this.material.map = new THREE.CanvasTexture(this.canvas)\n    this.plane = new THREE.Mesh(new THREE.PlaneBufferGeometry(2, 0.5), this.material)\n    this.add(this.plane)\n    this.app.on('replay', this.stop.bind(this))\n    this.app.on('endgame', this.stop.bind(this))\n    this.app.on('play', this.play.bind(this))\n    this.app.on('rew', this.rew.bind(this))\n  }\n\n  play () {\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)\n    this.context.fillText('REPLAY |', this.canvas.width / 2, this.canvas.height / 2 + 32)\n    this.material.map.needsUpdate = true\n    this.visible = true\n  }\n\n  rew () {\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)\n    this.context.fillText('REW ||', this.canvas.width / 2, this.canvas.height / 2 + 32)\n    this.material.map.needsUpdate = true\n    this.visible = true\n  }\n\n  stop () {\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)\n    this.material.map.needsUpdate = true\n    this.visible = false\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\nimport Config from './Config'\n\nexport default class PlayRewPanels extends THREE.Group {\n  constructor () {\n    super()\n    this.app = app\n    this.canvas = document.createElement('canvas')\n    this.canvas.width = 256\n    this.canvas.height = 64\n    this.canvas.style.display = 'none'\n    document.body.appendChild(this.canvas)\n\n    this.context = this.canvas.getContext('2d')\n    this.context.font = 'bold 36px sans-serif'\n    this.context.textAlign = 'center'\n    this.context.beginPath()\n    this.hexStr = '#' + Config.wayColor.toString(16)\n    this.context.fillStyle = this.hexStr\n    this.context.strokeStyle = this.hexStr\n    this.context.lineWidth = 6\n    this.material = new THREE.MeshBasicMaterial({\n      transparent: true,\n      opacity: 0.25\n    })\n    this.material.map = new THREE.CanvasTexture(this.canvas)\n    this.plane = new THREE.Mesh(new THREE.PlaneBufferGeometry(1, 0.25), this.material)\n    this.add(this.plane)\n    this.plane.name = 'audio'\n    this.app.inputManager.addCollider(this.plane)\n\n    if (!window.localStorage.getItem('unboring.js13k.back.audio')) {\n      this.audioActive = 'true'\n    } else {\n      this.audioActive = window.localStorage.getItem('unboring.js13k.back.audio')\n    }\n    this.setAudio()\n    this.app.on('shuffleAudio', this.shuffleAudio.bind(this))\n  }\n\n  setAudio () {\n    if (this.audioActive === 'true') {\n      this.on()\n    } else {\n      this.off()\n    }\n  }\n\n  shuffleAudio () {\n    if (this.audioActive === 'true') {\n      this.audioActive = 'false'\n    } else {\n      this.audioActive = 'true'\n    }\n    if (this.audioActive !== window.localStorage.getItem('unboring.js13k.back.audio')) {\n      window.localStorage.setItem('unboring.js13k.back.audio', this.audioActive)\n    }\n    this.setAudio()\n  }\n\n  on () {\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)\n    this.context.beginPath()\n    this.context.fillText('AUDIOON', this.canvas.width / 2, this.canvas.height / 2 + 16)\n    this.context.moveTo(36, 60)\n    this.context.lineTo(220, 60)\n    this.context.stroke()\n    this.material.map.needsUpdate = true\n    this.visible = true\n  }\n\n  off () {\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)\n    this.context.beginPath()\n    this.context.fillText('AUDIO-OFF', this.canvas.width / 2, this.canvas.height / 2 + 16)\n    this.context.moveTo(30, 60)\n    this.context.lineTo(226, 10)\n    this.context.stroke()\n    this.material.map.needsUpdate = true\n    this.visible = true\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\nimport Config from './Config'\n\nmodule.exports = class InputManager {\n  constructor () {\n    this.app = app\n    this.app.on('toggleVR', this.toggleVR.bind(this))\n\n    this.iOS = !!navigator.platform && /iPad|iPhone|iPod/.test(navigator.platform)\n\n    this.raycaster = new THREE.Raycaster()\n    this.intersected = []\n    this.tempMatrix = new THREE.Matrix4()\n\n    this.mouse = new THREE.Vector2()\n    this.intersection = null\n\n    this.colliders = []\n\n    this.swipe = {\n      sX: 0,\n      sY: 0,\n      eX: 0,\n      eY: 0\n    }\n    this.addControllers()\n\n    document.addEventListener('mousemove', this.onDocumentMouseMove.bind(this), false)\n    document.addEventListener('click', this.onClick.bind(this), false)\n    document.addEventListener('touchstart', this.onTouchStart.bind(this), false)\n    document.addEventListener('touchmove', this.onTouchMove.bind(this), false)\n    document.addEventListener('touchend', this.onTouchEnd.bind(this), false)\n  }\n\n  toggleVR (bool) {\n    this.controller1.visible = bool\n    this.controller2.visible = bool\n  }\n\n  addControllers () {\n    this.controller1 = this.app.renderer.vr.getController(0)\n    this.controller1.addEventListener('selectstart', this.onSelectStart.bind(this))\n    this.controller1.addEventListener('selectend', this.onSelectEnd.bind(this))\n    this.app.scene.add(this.controller1)\n\n    this.controller2 = this.app.renderer.vr.getController(1)\n    this.controller2.addEventListener('selectstart', this.onSelectStart)\n    this.controller2.addEventListener('selectend', this.onSelectEnd)\n    this.app.scene.add(this.controller2)\n\n    // helpers\n\n    var geometryHelper = new THREE.BufferGeometry().setFromPoints([new THREE.Vector3(0, 0, 0), new THREE.Vector3(0, 0, -1)])\n    var materialHelper = new THREE.LineBasicMaterial({ color: 0xffffff })\n    var line = new THREE.Line(geometryHelper, materialHelper)\n    line.name = 'line'\n    line.scale.z = 5\n\n    this.controller1.add(line.clone())\n    this.controller2.add(line.clone())\n  }\n\n  // Colliders\n  addCollider (collider) {\n    if (collider) {\n      this.colliders.push(collider)\n    }\n  }\n\n  removeCollider (collider) {\n    const index = this.colliders.indexOf(collider)\n    if (index !== -1) {\n      this.colliders.splice(index, 1)\n    }\n  }\n\n  addColliders (colliders) {\n    colliders.forEach(this.addCollider.bind(this))\n  }\n\n  resetColliders () {\n    this.colliders = []\n  }\n\n  //   VR controller events\n  onSelectStart (event) {\n    var controller = event.target\n\n    var intersections = this.getIntersections(controller)\n\n    if (intersections.length > 0) {\n      if (intersections[0].object.name === 'start') {\n        this.app.emit('startgame')\n      } else if (intersections[0].object.name === 'audio') {\n        this.app.emit('shuffleAudio')\n      } else if (intersections[0].object.name.substr(0, 3) === 'way') {\n        const newWay = parseInt(intersections[0].object.name.substr(3, 1), 10)\n        this.app.emit('wayChanged', newWay)\n      }\n    }\n  }\n\n  onSelectEnd () {\n  }\n\n  // Mouse / Desktop methods\n  onDocumentMouseMove (event) {\n    event.preventDefault()\n    if (!event.targetTouches) {\n      this.mouse.x = (event.pageX / window.innerWidth) * 2 - 1\n      this.mouse.y = -(event.pageY / window.innerHeight) * 2 + 1\n      if (this.intersection) {\n        this.app.renderer.domElement.style.cursor = 'pointer'\n      } else {\n        this.app.renderer.domElement.style.cursor = 'default'\n      }\n      this.doFallbackRaycast()\n    }\n  }\n\n  onClick (event) {\n    event.preventDefault()\n    if (event.touches && this.iOS) {\n      this.mouse.x = (event.pageX / window.innerWidth) * 2 - 1\n      this.mouse.y = -(event.pageY / window.innerHeight) * 2 + 1\n    } else {\n      this.mouse.x = (event.pageX / window.innerWidth) * 2 - 1\n      this.mouse.y = -(event.pageY / window.innerHeight) * 2 + 1\n    }\n\n    this.doFallbackRaycast()\n\n    if (this.intersected.length) {\n      if (this.intersected[0].name === 'start') {\n        this.app.emit('startgame')\n      } else if (this.intersected[0].name === 'audio') {\n        this.app.emit('shuffleAudio')\n      } else if (this.intersected[0].name.substr(0, 3) === 'way') {\n        const newWay = parseInt(this.intersected[0].name.substr(3, 1), 10)\n        this.app.emit('wayChanged', newWay)\n      }\n    }\n  }\n\n  doFallbackRaycast () {\n    this.cleanIntersected()\n\n    this.raycaster.setFromCamera(this.mouse, this.app.camera)\n    var intersections = this.raycaster.intersectObjects(this.colliders)\n    this.intersection = (intersections.length) > 0 ? intersections[0] : null\n    if (this.intersection !== null) {\n      var object = this.intersection.object\n      object.material.opacity = 0.5\n      this.intersected.push(object)\n    }\n  }\n\n  // Touch screen methods\n  // Swipe on touch screens\n  onTouchStart (e) {\n    var t = e.touches[0]\n    this.swipe.sX = t.screenX\n    this.swipe.sY = t.screenY\n  }\n\n  onTouchMove (e) {\n    var t = e.touches[0]\n    // e.preventDefault()\n    this.swipe.eX = t.screenX\n    this.swipe.eY = t.screenY\n  }\n\n  onTouchEnd (e) {\n    if ((((this.swipe.eX - 60 > this.swipe.sX) || (this.swipe.eX + 60 < this.swipe.sX)) && ((this.swipe.eY < this.swipe.sY + 60) && (this.swipe.sY > this.swipe.eY - 60) && (this.swipe.eX > 0)))) {\n      if (this.swipe.eX > this.swipe.sX) {\n        this.app.emit('wayLeft')\n      } else {\n        this.app.emit('wayRight')\n      }\n    } else {\n      if (this.iOS) {\n        this.onClick(e)\n      }\n    }\n  }\n\n  // common methods\n  getIntersections (controller) {\n    this.tempMatrix.identity().extractRotation(controller.matrixWorld)\n\n    this.raycaster.ray.origin.setFromMatrixPosition(controller.matrixWorld)\n    this.raycaster.ray.direction.set(0, 0, -1).applyMatrix4(this.tempMatrix)\n\n    return this.raycaster.intersectObjects(this.colliders)\n  }\n\n  intersectObjects (controller) {\n    // Do not highlight when already selected\n\n    if (controller.userData.selected !== undefined) return\n\n    var line = controller.getObjectByName('line')\n    var intersections = this.getIntersections(controller)\n\n    if (intersections.length > 0) {\n      var intersection = intersections[0]\n\n      var object = intersection.object\n      object.material.opacity = 0.5\n      this.intersected.push(object)\n\n      line.scale.z = intersection.distance\n    } else {\n      line.scale.z = 5\n    }\n  }\n\n  cleanIntersected () {\n    while (this.intersected.length) {\n      const object = this.intersected.pop()\n      object.material.opacity = 0.25\n    }\n  }\n\n  updateVR () {\n    this.cleanIntersected()\n\n    this.intersectObjects(this.controller1)\n    this.intersectObjects(this.controller2)\n  }\n}\n","import { app } from './context'\nimport Config from './Config'\nimport Utils from './Utils'\n\nmodule.exports = class GameManager {\n  constructor (opt = {}) {\n    this.app = app\n    this.world = opt.world\n    this.rewards = opt.rewards\n    this.scoreboard = opt.scoreboard\n\n    this.correctName = 0\n    // 0 - before start\n    // 1 - started\n    // 2 - catching\n    // 3 - back\n    // 4 - remembering\n    // 5 - lose\n    // 6 - max score 999\n    this.gameStatus = 0\n\n    this.highscore = window.localStorage.getItem('unboring.js13k.back')\n    if (this.highscore !== null) {\n      this.app.emit('scoreboardchanged', this.highscore, true)\n    } else {\n      this.app.emit('scoreboardchanged', this.highscore, true)\n    }\n\n    this.actualWay = 2\n    this.newWay = 2\n    this.correctWay = 2\n    this.targetXpos = 0\n    this.resetGameSettings()\n    this.app.on('startgame', this.startgame.bind(this))\n    this.app.on('wayChanged', this.wayChanged.bind(this))\n    this.app.on('wayLeft', this.wayLeft.bind(this))\n    this.app.on('wayRight', this.wayRight.bind(this))\n    this.app.on('correctWayChanged', this.correctWayChanged.bind(this))\n    this.app.on('tokensShuffled', this.tokensShuffled.bind(this))\n    this.app.on('setCorrectName', this.setCorrectName.bind(this))\n    this.app.on('solveOK', this.solveOK.bind(this))\n    this.app.on('solveERROR', this.solveERROR.bind(this))\n    this.app.on('solveRememberingOK', this.solveRememberingOK.bind(this))\n    this.app.on('solveRememberingERROR', this.solveRememberingERROR.bind(this))\n\n    this.setDefaultTheme()\n  }\n\n  startgame () {\n    this.resetGameSettings()\n    this.gameStatus = 1\n    this.app.emit('scoreboardchanged', this.score, false)\n    this.newCycle()\n  }\n\n  wayChanged (way) {\n    this.newWay = way\n  }\n\n  wayLeft () {\n    if (this.newWay > 0) {\n      this.app.emit('wayChanged', this.newWay - 1)\n    }\n  }\n\n  wayRight () {\n    if (this.newWay < 4) {\n      this.app.emit('wayChanged', this.newWay + 1)\n    }\n  }\n\n  resetGameSettings () {\n    this.solved = false\n    this.errorOnSolved = false\n    this.gameSpeed = 10\n    this.app.emit('speedChanged', this.gameSpeed)\n    this.backSpeed = 50\n    this.cycle = 0\n    this.cyclesPerRound = 1\n    this.caught = 0\n    this.remembered = 0\n    this.tokensStore = []\n    this.score = 0\n  }\n\n  getTargetX (way) {\n    // Only works for 5 ways\n    return (4 - way) * 2 - 4\n  }\n\n  newRound () {\n    if (this.cyclesPerRound === 5) {\n      this.cyclesPerRound = 1\n    } else {\n      this.cyclesPerRound += 1\n    }\n    this.gameSpeed += 1\n    if (this.gameSpeed > 40) {\n      this.gameSpeed = 40\n    }\n    this.app.emit('speedChanged', this.gameSpeed)\n    this.cycle = 0\n    this.caught = 0\n    this.remembered = 0\n    this.tokensStore = []\n    this.newCycle()\n  }\n\n  newCycle () {\n    if (this.errorOnSolved) {\n      // Error time\n      this.gameStatus = 5\n      this.app.emit('wayChanged', 2)\n      this.endgame()\n      return\n    }\n    if (this.cycle < this.cyclesPerRound && this.caught < this.cyclesPerRound) {\n      // Catching time\n      this.app.emit('replay')\n      this.gameStatus = 2\n      this.app.emit('setHints', this.tokensStore, this.gameStatus, this.cycle, this.cyclesPerRound, this.remembered)\n      this.setCorrectWay()\n\n      Utils.shuffle(Config.colorArr)\n      this.app.emit('shuffleTokens')\n\n      this.app.emit('setBigTokens', this.correctWay)\n    } else if (this.cycle < this.cyclesPerRound * 2 && this.caught === this.cyclesPerRound) {\n      // Back time\n      this.app.emit('rew')\n      this.app.emit('colorChanged', 0x000000, true)\n      this.gameStatus = 3\n      this.app.emit('changedToBackSpeed', this.backSpeed)\n      var modBack = this.cycle % this.cyclesPerRound\n      var indexStoredTokens = this.cyclesPerRound - modBack - 1\n      this.app.emit('setStoredTokens')\n      this.placeStoredTokens(indexStoredTokens)\n      this.app.emit('setHints', this.tokensStore, this.gameStatus, this.cycle, this.cyclesPerRound, this.remembered)\n    } else if (this.cycle >= this.cyclesPerRound * 2 && this.remembered < this.caught) {\n      // Remembering time\n      this.app.emit('play')\n      this.gameStatus = 4\n      this.app.emit('speedChanged', this.gameSpeed)\n      this.app.emit('shuffleStoredTokens')\n      Utils.shuffle(this.tokensStore[this.remembered][0])\n      this.placeStoredTokens(this.remembered)\n\n      this.app.emit('setCorrectRememberedWay', this.tokensStore, this.remembered)\n      this.setDefaultTheme()\n      this.app.emit('setHints', this.tokensStore, this.gameStatus, this.cycle, this.cyclesPerRound, this.remembered)\n    } else if (this.score >= 999) {\n      this.gameStatus = 6\n    } else {\n      // Next round\n      this.newRound()\n      return\n    }\n\n    this.app.emit('resetAtNewCycle')\n    this.solved = false\n    this.world.position.z = 0\n\n    this.cycle++\n  }\n\n  // Ticks\n\n  catchingTick (delta) {\n    this.world.position.z += this.gameSpeed * delta\n    if (Math.abs(this.world.position.z) >= Config.wayLength / 4 - 2 && !this.solved) {\n      this.app.emit('solve', this.actualWay, this.correctName)\n      this.solved = true\n    }\n    if (Math.abs(this.world.position.z) >= Config.wayLength / 4 + 2 && !this.world.tokens.visible) {\n      this.postSolved()\n    }\n    if (Math.abs(this.world.position.z) >= Config.wayLength / 4 + 10) {\n      this.newCycle()\n    }\n  }\n\n  backTick (delta) {\n    this.world.position.z -= this.backSpeed * delta\n    if (this.world.position.z < -Config.wayLength / 3) {\n      this.newCycle()\n    }\n  }\n\n  rememberingTick (delta) {\n    this.world.position.z += this.gameSpeed * delta\n    if (Math.abs(this.world.position.z) >= Config.wayLength / 4 - 2 && !this.solved) {\n      this.app.emit('solveRemembering', this.actualWay, this.correctWay)\n      this.solved = true\n    }\n    if (Math.abs(this.world.position.z) >= Config.wayLength / 4 + 2 && !this.world.tokens.visible) {\n      this.postSolved()\n    }\n    if (Math.abs(this.world.position.z) >= Config.wayLength / 4 + 10) {\n      this.newCycle()\n    }\n  }\n\n  gameTick (delta) {\n    switch (this.gameStatus) {\n      case 2:\n        this.catchingTick(delta)\n        break\n      case 3:\n        this.backTick(delta)\n        break\n      case 4:\n        this.rememberingTick(delta)\n        break\n    }\n\n    if (this.rewards.visible) {\n      var newScale = THREE.Math.lerp(2.5, this.rewards.scale.x, Config.lerpSpeed)\n      this.rewards.scale.set(newScale, newScale, newScale)\n      this.rewards.position.z += 0.01\n    }\n  }\n\n  setDefaultTheme () {\n    var hexStr = '#' + Config.bgColorTop.toString(16)\n    document.querySelector('meta[name=\"theme-color\"]').setAttribute('content', hexStr)\n  }\n\n  setCorrectWay () {\n    this.correctWay = Math.floor(Math.random() * 5)\n    this.app.emit('showCorrectReward', this.correctWay)\n  }\n\n  correctWayChanged (way) {\n    this.correctWay = way\n  }\n\n  tokensShuffled (tokensChildren) {\n    this.tokensStore[this.caught] = [[], []]\n    for (var i = 0; i < tokensChildren.length; i++) {\n      tokensChildren[i].position.x = i * 2 - 4\n      var tmpColor = Config.colorArr[i][0]\n      tokensChildren[i].material.color.set(tmpColor)\n      this.tokensStore[this.caught][0][i] = [tokensChildren[i].name, tmpColor]\n      if (tokensChildren[i].name === this.correctWay) {\n        this.tokensStore[this.caught][1] = [tokensChildren[i].name, tmpColor]\n      }\n    }\n  }\n\n  placeStoredTokens (index) {\n    for (var i = 0; i < this.tokensStore[index][0].length; i++) {\n      this.app.emit('reorderTokens', this.tokensStore, i, index)\n    }\n  }\n\n  setCorrectName (name) {\n    this.correctName = name\n  }\n\n  postSolved () {\n    this.app.emit('postSolved')\n    this.app.emit('setHints', this.tokensStore, this.gameStatus, this.cycle, this.cyclesPerRound, this.remembered)\n  }\n\n  solveOK () {\n    this.caught += 1\n  }\n\n  solveERROR () {\n    this.errorOnSolved = true\n  }\n\n  solveRememberingOK () {\n    this.remembered += 1\n    this.score += 1\n    this.app.emit('scoreboardchanged', this.score, false)\n  }\n\n  solveRememberingERROR () {\n    this.errorOnSolved = true\n  }\n\n  endgame () {\n    this.app.emit('endgame')\n    this.app.emit('wayChanged', 2)\n    this.gameSpeed = 0\n    this.app.emit('speedChanged', this.gameSpeed)\n    this.app.emit('colorChanged', 0x000000, true)\n    if (this.score > Number(this.highscore)) {\n      this.highscore = this.score\n      window.localStorage.setItem('unboring.js13k.back', this.score)\n    }\n    this.app.emit('scoreboardchanged', this.highscore, true)\n    this.setDefaultTheme()\n  }\n\n  update (dt) {\n    if (this.gameStatus > 0 && this.gameStatus < 5) {\n      this.gameTick(dt)\n    }\n\n    if (this.newWay !== this.actualWay) {\n      this.actualWay = this.newWay\n      this.targetXpos = this.getTargetX(this.newWay)\n    }\n\n    if (this.targetXpos !== this.world.position.x) {\n      this.world.position.x = THREE.Math.lerp(this.targetXpos, this.world.position.x, Config.lerpSpeed)\n    }\n  }\n}\n","\n// Based on https://sonoport.github.io/synthesising-sounds-webaudio.html\nimport { app } from './context'\n\nmodule.exports = class Synth {\n  constructor () {\n    this.app = app\n\n    window.AudioContext = window.AudioContext || window.webkitAudioContext\n    if (!this.audioContext) {\n      this.audioContext = new AudioContext()\n    }\n    this.gameActive = false\n    this.actualTempo = 0.3\n    this.backTempo = 0.1\n    this.tempo = this.actualTempo\n    this.counter = 0\n\n    // Made based on with https://xem.github.io/miniMusic/\n    this.loopSeq = [0, 0, 14, 14, 0, 0, 12, 12, 0, 0, 11, 11, 0, 0, 12, 12, 0, 14, 12, 11, 12, 0, 0, 9, 8, 7, 0, 7, 0, 7, 0, 7, 0, 0]\n    this.reverseSeq = this.loopSeq.slice(0).reverse()\n    this.errorSeq = [0, 16, 17, 19, 19, 0]\n    this.okSeq = [0, 2, 0]\n    this.clickSeq = [0, 13, 0]\n\n    this.activeSeq = []\n    this.sequencePoint = 0\n    this.actualLoopPoint = 0\n\n    if (!window.localStorage.getItem('unboring.js13k.back.audio')) {\n      this.audioActive = 'true'\n    } else {\n      this.audioActive = window.localStorage.getItem('unboring.js13k.back.audio')\n    }\n\n    this.app.on('startgame', this.startgame.bind(this))\n    this.app.on('endgame', this.endgame.bind(this))\n    this.app.on('solveOK', this.solveOK.bind(this))\n    this.app.on('solveRememberingOK', this.solveOK.bind(this))\n    this.app.on('solveERROR', this.solveERROR.bind(this))\n    this.app.on('solveRememberingERROR', this.solveERROR.bind(this))\n    this.app.on('play', this.playEvent.bind(this))\n    this.app.on('rew', this.rew.bind(this))\n    this.app.on('speedChanged', this.speedChanged.bind(this))\n    this.app.on('shuffleAudio', this.shuffleAudio.bind(this))\n  }\n\n  shuffleAudio () {\n    if (this.audioActive === 'true') {\n      this.audioActive = 'false'\n    } else {\n      this.audioActive = 'true'\n    }\n  }\n\n  startgame () {\n    const osc4 = this.audioContext.createOscillator()\n    if (this.audioActive === 'true') {\n      osc4.frequency.value = 440 * 1.06 ** (12 - 5)\n    } else {\n      console.log(this.audioActive)\n      osc4.frequency.value = 0\n    }\n    osc4.connect(this.audioContext.destination)\n    osc4.start(this.audioContext.currentTime)\n    osc4.stop(this.audioContext.currentTime + this.actualTempo)\n    this.gameActive = true\n    this.activeSeq = this.loopSeq\n    this.sequencePoint = 0\n  }\n\n  endgame () {\n    this.gameActive = false\n    this.activeSeq = []\n  }\n\n  speedChanged (newSpeed) {\n    this.actualTempo = 0.3 - Math.min(0.2, newSpeed / 200)\n    this.tempo = this.actualTempo\n  }\n\n  solveOK () {\n    this.activeSeq = this.okSeq\n    this.actualLoopPoint = this.sequencePoint\n    this.sequencePoint = 0\n  }\n\n  solveERROR () {\n    this.activeSeq = this.errorSeq\n    this.sequencePoint = 0\n  }\n\n  playEvent () {\n    this.tempo = this.actualTempo\n  }\n\n  rew () {\n    this.tempo = this.backTempo\n    this.activeSeq = this.reverseSeq\n    if (this.activeSeq !== this.reverseSeq) {\n      this.sequencePoint = 0\n    }\n  }\n\n  playNote (v) {\n    const osc4 = this.audioContext.createOscillator()\n    osc4.frequency.value = 440 * 1.06 ** (12 - v)\n    if (this.audioActive === 'false') {\n      return\n    }\n    osc4.connect(this.audioContext.destination)\n    osc4.start(this.audioContext.currentTime)\n    osc4.stop(this.audioContext.currentTime + this.actualTempo)\n  }\n\n  tick () {\n    if (this.sequencePoint < this.activeSeq.length) {\n      if (this.activeSeq[this.sequencePoint]) {\n        this.playNote(this.activeSeq[this.sequencePoint])\n        this.app.emit('synth', this.activeSeq[this.sequencePoint])\n      }\n      this.sequencePoint += 1\n    } else {\n      if (this.gameActive) {\n        if (this.activeSeq !== this.loopSeq) {\n          this.activeSeq = this.loopSeq\n          this.sequencePoint = this.actualLoopPoint\n        } else {\n          this.sequencePoint = 0\n        }\n      } else {\n        this.activeSeq = []\n        this.sequencePoint = 0\n      }\n    }\n  }\n\n  update (dt) {\n    this.counter += dt\n    if (this.counter > this.tempo) {\n      this.tick()\n      this.counter = 0\n    }\n  }\n}\n","import vertexShader from './shaders/sky.vert'\nimport fragmentShader from './shaders/sky.frag'\n\nimport { app } from './context'\nimport Config from './Config'\nimport Utils from './Utils'\n\nexport default class Sky extends THREE.Group {\n  constructor () {\n    super()\n    const geometry = new THREE.SphereBufferGeometry(100, 64, 64)\n    const material = new THREE.ShaderMaterial(\n      {\n        uniforms: {\n          colorTop: { type: 'c', value: new THREE.Color(Config.bgColorTop) },\n          colorBottom: { type: 'c', value: new THREE.Color(Config.bgColor) }\n        },\n        vertexShader: vertexShader,\n        fragmentShader: fragmentShader,\n        side: THREE.BackSide\n      }\n    )\n    this.shpere = new THREE.Mesh(geometry, material)\n    this.add(this.shpere)\n    this.app = app\n\n    this.changingColor = false\n    this.count = 0\n    this.prevTopColor = 0\n    this.prevBottomColor = 0\n    this.topColor = 0\n    this.bottomColor = 0\n\n    this.app.on('resetAtNewCycle', this.resetAtNewCycle.bind(this))\n    this.app.on('colorChanged', this.colorChanged.bind(this))\n  }\n\n  resetAtNewCycle () {\n\n  }\n\n  colorChanged (val, isDefault) {\n    this.changingColor = true\n    this.endColor = val\n    this.prevTopColor = this.shpere.material.uniforms.colorTop.value.getHex()\n    this.prevBottomColor = this.shpere.material.uniforms.colorBottom.value.getHex()\n    if (isDefault) {\n      Config.transitionSpeed = 8\n      this.topColor = Config.defaultColorArr[1]\n      this.bottomColor = Config.defaultColorArr[2]\n    } else {\n      Config.transitionSpeed = 2\n      for (let i = 0; i < Config.colorArr.length; i++) {\n        if (Config.colorArr[i][0] === val) {\n          this.topColor = Config.colorArr[i][1]\n          this.bottomColor = Config.colorArr[i][2]\n        }\n      }\n    }\n  }\n\n  updateColors () {\n    this.shpere.material.uniforms.colorTop.value = new THREE.Color(Utils.blendColors(this.prevTopColor, this.topColor, this.count))\n    this.shpere.material.uniforms.colorBottom.value = new THREE.Color(Utils.blendColors(this.prevBottomColor, this.bottomColor, this.count))\n  }\n\n  colorTransitionEnds () {\n    this.changingColor = false\n    var hexStr = '#' + this.topColor.toString(16)\n    document.querySelector('meta[name=\"theme-color\"]').setAttribute('content', hexStr)\n    this.count = 0\n  }\n\n  update (dt = 0) {\n    if (this.changingColor) {\n      this.count += dt / 10 * Config.transitionSpeed\n      this.updateColors()\n      if (this.count >= 1) {\n        this.colorTransitionEnds()\n      }\n    }\n  }\n}\n","export default \"#define GLSLIFY 1\\nvarying vec3 vWorldPosition;\\n\\nvoid main() {\\n\\n\\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\\n\\tvWorldPosition = worldPosition.xyz;\\n\\t\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n\\n}\"","export default \"#define GLSLIFY 1\\nuniform vec3 colorTop;\\nuniform vec3 colorBottom;\\n\\nvarying vec3 vWorldPosition;\\n\\nvoid main()\\n{\\n\\n\\tvec3 pointOnSphere = normalize(vWorldPosition.xyz);\\n\\tfloat f = sin(pointOnSphere.y * 2.0);\\n\\n\\tgl_FragColor = vec4(mix(colorBottom,colorTop, f ), 1.0);\\n\\n}\\n\"","import vertexShader from './shaders/instancing.vert'\nimport fragmentShader from './shaders/instancing.frag'\n\nimport { app } from './context'\nimport Config from './Config'\nimport Utils from './Utils'\n\nexport default class InstancedObjs extends THREE.Group {\n  constructor () {\n    super()\n\n    this.app = app\n    if (this.app.renderer.extensions.get('ANGLE_instanced_arrays') === null) {\n      console.log('Instancing not supported')\n      return\n    }\n\n    this.currentVector = new THREE.Vector3()\n    this.audioDistortion = 0\n    const geometry = this.getGeometry()\n    const material = new THREE.RawShaderMaterial({\n      uniforms: {\n        time: { value: 1.0 },\n        sineTime: { value: 1.0 },\n        fogColor: {\n          type: 'c',\n          value: new THREE.Color(Config.bgColor)\n        },\n        fogFar: {\n          type: 'f',\n          value: 45\n        },\n        fogNear: {\n          type: 'f',\n          value: 0\n        }\n      },\n      vertexShader: vertexShader,\n      fragmentShader: fragmentShader,\n      side: THREE.DoubleSide,\n      transparent: true\n    })\n    this.mesh = new THREE.Mesh(geometry, material)\n    this.add(this.mesh)\n\n    this.changingColor = false\n    this.count = 0\n    this.prevFogColor = 0\n    this.fogColor = 0\n\n    this.app.on('resetAtNewCycle', this.resetAtNewCycle.bind(this))\n    this.app.on('speedChanged', this.speedChanged.bind(this))\n    this.app.on('changedToBackSpeed', this.changedToBackSpeed.bind(this))\n    this.app.on('synth', this.synth.bind(this))\n    this.app.on('colorChanged', this.colorChanged.bind(this))\n  }\n\n  getGeometry () {\n    // const bufferGeometry = new THREE.PlaneBufferGeometry(2, 0.25)\n    const bufferGeometry = new THREE.CircleBufferGeometry(2, 0)\n    const geometry = new THREE.InstancedBufferGeometry()\n    geometry.index = bufferGeometry.index\n    geometry.attributes.position = bufferGeometry.attributes.position\n    geometry.attributes.uv = bufferGeometry.attributes.uv\n    var offsets = []\n    var orientations = []\n    var scales = []\n\n    var vector = new THREE.Vector4()\n    var x, y, z\n\n    this.actualSpeed = 0\n    this.totalObjs = 300\n    for (var i = 0; i < this.totalObjs; i++) {\n      // offsets\n\n      let tmpVal = 1\n      if (Math.random() > 0.5) {\n        tmpVal = -1\n      }\n      x = 15 * tmpVal\n      y = Math.floor(Math.random() * 15) * (Math.random() * 5) - 4\n      z = Math.floor(Math.random() * 200 - 100)\n      vector.set(x, y, z, 0).normalize()\n      offsets.push(x, y, z)\n\n      // orientations\n      var quaternion = new THREE.Quaternion()\n      quaternion.setFromAxisAngle(new THREE.Vector3(0, 1, 0), Math.PI / 2)\n      orientations.push(quaternion.x, quaternion.y, quaternion.z, quaternion.w)\n\n      // scales\n      scales.push(1, 1, 1)\n    }\n\n    this.scaleAttribute = new THREE.InstancedBufferAttribute(new Float32Array(scales), 3).setDynamic(true)\n    this.offsetAttribute = new THREE.InstancedBufferAttribute(new Float32Array(offsets), 3).setDynamic(true)\n    this.orientationAttribute = new THREE.InstancedBufferAttribute(new Float32Array(orientations), 4)\n\n    geometry.addAttribute('offset', this.offsetAttribute)\n    geometry.addAttribute('orientation', this.orientationAttribute)\n    geometry.addAttribute('scale', this.scaleAttribute)\n    return geometry\n  }\n\n  resetAtNewCycle () {\n\n  }\n\n  speedChanged (val) {\n    console.log(val)\n    this.actualSpeed = val\n  }\n\n  changedToBackSpeed (val) {\n    console.log(val)\n    this.actualSpeed = -val\n  }\n\n  synth (val) {\n    this.audioDistortion = val\n  }\n\n  colorChanged (val, isDefault) {\n    this.changingColor = true\n    this.endColor = val\n    this.prevFogColor = this.mesh.material.uniforms.fogColor.value.getHex()\n    if (isDefault) {\n      this.fogColor = Config.defaultColorArr[2]\n    } else {\n      for (let i = 0; i < Config.colorArr.length; i++) {\n        if (Config.colorArr[i][0] === val) {\n          this.fogColor = Config.colorArr[i][2]\n        }\n      }\n    }\n  }\n\n  updateColors () {\n    this.transitionFogColor = new THREE.Color(Utils.blendColors(this.prevFogColor, this.fogColor, this.count))\n    this.mesh.material.uniforms.fogColor.value = this.transitionFogColor\n    this.app.scene.fog.color = this.transitionFogColor\n  }\n\n  colorTransitionEnds () {\n    this.changingColor = false\n    this.count = 0\n  }\n\n  update (dt = 0, time = 0) {\n    for (var i = 0, il = this.scaleAttribute.count; i < il; i++) {\n      this.scaleAttribute.setXYZ(i, (3 + (i / 100)), 0.05, 1)\n      if (this.offsetAttribute.getZ(i) > 100) {\n        this.offsetAttribute.setZ(i, -100)\n      } else if (this.offsetAttribute.getZ(i) < -100) {\n        this.offsetAttribute.setZ(i, 100)\n      } else {\n        this.offsetAttribute.setZ(i, this.offsetAttribute.getZ(i) + (this.actualSpeed * 10 / ((this.totalObjs - i / 5) + (i / 50))))\n      }\n    }\n    this.scaleAttribute.needsUpdate = true\n    this.offsetAttribute.needsUpdate = true\n\n    if (this.changingColor) {\n      this.count += dt / 10 * Config.transitionSpeed\n      this.updateColors()\n      if (this.count >= 1) {\n        this.colorTransitionEnds()\n      }\n    }\n  }\n}\n","export default \"precision highp float;\\n#define GLSLIFY 1\\n\\nuniform mat4 modelViewMatrix;\\nuniform mat4 projectionMatrix;\\n\\nattribute vec3 position;\\nattribute vec3 offset;\\nattribute vec2 uv;\\nattribute vec4 orientation;\\nattribute vec3 scale;\\n\\nvarying vec4 vColor;\\n\\nvec3 applyQuaternionToVector( vec4 q, vec3 v ){\\n\\n\\treturn v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );\\n\\n}\\n\\nvoid main() {\\n\\n\\t\\n\\tvColor = vec4 (1.0,1.0,1.0,1.0);\\n\\t\\n\\tvec3 vPosition = applyQuaternionToVector( orientation, position*scale );\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( offset + vPosition, 1.0 );\\n\\n}\"","export default \"precision highp float;\\n#define GLSLIFY 1\\n\\nuniform float fogNear;\\nuniform float fogFar;\\n\\nuniform vec3 fogColor;\\nvarying vec3 vPosition;\\nvarying vec4 vColor;\\n\\nvoid main() {\\n\\n\\tvec4 color = vec4( vColor );\\n\\tgl_FragColor = color;\\n\\n\\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\\n\\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\\n\\tgl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\\n\\n}\""],"sourceRoot":""}