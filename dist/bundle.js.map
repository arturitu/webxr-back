{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/context.js","webpack:///./src/Config.js","webpack:///./src/Utils.js","webpack:///./src/index.js","webpack:///./src/App.js","webpack:///./node_modules/events/events.js","webpack:///./src/startup.js","webpack:///./src/World.js","webpack:///./src/Tokens.js","webpack:///./src/Ways.js","webpack:///./src/Rewards.js","webpack:///./src/Scoreboard.js","webpack:///./src/StartBtn.js","webpack:///./src/Hints.js","webpack:///./src/HintGroup.js","webpack:///./src/BigTokens.js","webpack:///./src/Score.js","webpack:///./src/PlayRewPanels.js","webpack:///./src/InputManager.js","webpack:///./src/GameManager.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","app","App","instance","this","bgColor","bgColorBack","wayColor","wayColorOver","wayLength","scoreColor","scoreColorOff","highscoreColor","colorArr","lerpSpeed","maxHints","Utils","array","sort","Math","random","require","isVRActive","time","prevTime","window","performance","now","renderer","THREE","WebGLRenderer","antialias","setPixelRatio","devicePixelRatio","setSize","innerWidth","innerHeight","vr","enabled","document","body","appendChild","domElement","WEBVR","createButton","referenceSpaceType","scene","Scene","background","Color","Config","fog","Fog","camera","PerspectiveCamera","layers","enable","addEventListener","resize","animate","EventEmitter","aspect","updateProjectionMatrix","setAnimationLoop","render","timeNow","delta","update","isPresenting","emit","inputManager","updateVR","gameManager","dt","traverse","obj","ReflectOwnKeys","R","Reflect","ReflectApply","apply","target","receiver","args","Function","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","concat","NumberIsNaN","Number","isNaN","init","_events","undefined","_eventsCount","_maxListeners","defaultMaxListeners","$getMaxListeners","that","_addListener","type","listener","prepend","events","existing","warning","TypeError","newListener","unshift","push","length","warned","w","Error","String","emitter","count","console","warn","onceWrapper","arguments","fired","removeListener","wrapFn","_onceWrap","state","wrapped","_listeners","unwrap","evlistener","arr","ret","Array","unwrapListeners","arrayClone","listenerCount","copy","set","arg","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","error","er","err","message","context","handler","len","listeners","addListener","on","prependListener","once","prependOnceListener","list","position","originalListener","shift","index","pop","spliceOne","off","removeAllListeners","keys","rawListeners","eventNames","InputManager","scoreboard","Scoreboard","add","world","World","rewards","Rewards","GameManager","y","tokens","Tokens","ways","Ways","Group","tokensInitialPosZ","z","addTokens","setCorrectRememberedWay","shuffleTokens","reorderTokens","setStoredTokens","shuffleStoredTokens","solve","solveRemembering","postSolved","tokenGeometry","RingBufferGeometry","tokenMaterial","MeshBasicMaterial","color","side","DoubleSide","token","Mesh","x","tokensStore","children","shuffle","tmpColor","material","j","actualWay","correcName","visible","correctWay","addWays","wayGeometry","PlaneBufferGeometry","rotateX","PI","wayMaterial","way","addCollider","radius","addRewards","addErrorReward","showCorrectReward","resetAtNewCycle","solveERROR","endgame","rewardMaterial","LineBasicMaterial","rewardGeometry","getRewardGeometry","reward","Line","crossShape","Shape","moveTo","lineTo","geometry","ShapeGeometry","mesh","scale","correctName","segmentCount","Geometry","theta","vertices","Vector3","cos","sin","startBtn","StartBtn","hints","Hints","bigTokens","BigTokens","score","Score","playRewPanels","PlayRewPanels","startgame","interactiveObj","CircleBufferGeometry","Object3D","hintGroup","HintGroup","setHints","gameStatus","cycle","cyclesPerRound","remembered","updateHint","hintGeometry","hintMaterial","hint","hintMaterialTmp","geometryTmp","hintTmp","tokenAdded","setBigTokens","geo","mat","hexStr","getHexString","querySelector","setAttribute","canvas","createElement","width","height","style","display","getContext","font","textAlign","toString","fillStyle","actualScore","fillText","transparent","map","CanvasTexture","plane","setScore","val","highscore","replay","play","clearRect","needsUpdate","valStr","stop","rew","toggleVR","iOS","navigator","platform","test","raycaster","Raycaster","intersected","tempMatrix","Matrix4","mouse","Vector2","intersection","colliders","swipe","sX","sY","eX","eY","addControllers","onDocumentMouseMove","onClick","onTouchStart","onTouchMove","onTouchEnd","bool","controller1","controller2","getController","onSelectStart","onSelectEnd","geometryHelper","BufferGeometry","setFromPoints","materialHelper","line","clone","collider","indexOf","splice","forEach","event","controller","intersections","getIntersections","substr","newWay","parseInt","preventDefault","targetTouches","pageX","pageY","cursor","doFallbackRaycast","touches","cleanIntersected","setFromCamera","intersectObjects","e","log","screenX","screenY","identity","extractRotation","matrixWorld","ray","origin","setFromMatrixPosition","direction","applyMatrix4","userData","selected","getObjectByName","distance","opt","localStorage","getItem","targetXpos","resetGameSettings","wayChanged","wayLeft","wayRight","correctWayChanged","tokensShuffled","setCorrectName","solveOK","solveRememberingOK","solveRememberingERROR","newCycle","solved","errorOnSolved","gameSpeed","backSpeed","caught","setCorrectWay","modBack","indexStoredTokens","placeStoredTokens","setDefaultTheme","newRound","abs","catchingTick","backTick","rememberingTick","newScale","lerp","floor","tokensChildren","setItem","gameTick","getTargetX"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","import App from './App'\n\nconst app = new App()\n\nmodule.exports = {\n  app\n}\n","let instance = null\n// Singleton pattern in ES6 example\nclass Config {\n  constructor () {\n    if (!instance) {\n      this.bgColor = 0x111111\n      this.bgColorBack = 0x121212\n      this.wayColor = 0x555555\n      this.wayColorOver = 0x666666\n      this.wayLength = 200\n      this.scoreColor = 0xffffff\n      this.scoreColorOff = 0x444444\n      this.highscoreColor = 0xffcc00\n      this.colorArr = [\n        0xfb39ca,\n        0xfdca2a,\n        0x2bca20,\n        0xfc9125,\n        0x0d6afc,\n        0x6419cb,\n        0xffffff,\n        0xfa0018\n      ]\n      this.lerpSpeed = 0.9\n      this.maxHints = 6\n      instance = this\n    }\n    return instance\n  }\n}\n\nexport default new Config()\n","let instance = null\nclass Utils {\n  constructor () {\n    if (!instance) {\n      instance = this\n    }\n    return instance\n  }\n\n  shuffle (array) {\n    array.sort(() => Math.random() - 0.5)\n  }\n}\n\nexport default new Utils()\n","require('./context')\nrequire('./startup')()\n","import { EventEmitter } from 'events'\nimport Config from './Config'\n\nexport default class App extends EventEmitter {\n  constructor (opt = {}) {\n    super()\n\n    this.isVRActive = false\n    this.time = 0\n    this.prevTime = window.performance.now()\n    this.renderer = new THREE.WebGLRenderer({ antialias: true })\n    this.renderer.setPixelRatio(window.devicePixelRatio)\n    this.renderer.setSize(window.innerWidth, window.innerHeight)\n    this.renderer.vr.enabled = true\n\n    document.body.appendChild(this.renderer.domElement)\n\n    // WebXR\n    document.body.appendChild(THREE.WEBVR.createButton(this.renderer, { referenceSpaceType: 'local' }))\n\n    this.scene = new THREE.Scene()\n    this.scene.background = new THREE.Color(Config.bgColor)\n    this.scene.fog = new THREE.Fog(Config.bgColor, 0, 45)\n\n    this.camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000)\n    this.camera.layers.enable(1)\n\n    window.addEventListener('resize', () => this.resize())\n\n    this.animate()\n  }\n\n  resize () {\n    this.camera.aspect = window.innerWidth / window.innerHeight\n    this.camera.updateProjectionMatrix()\n\n    this.renderer.setSize(window.innerWidth, window.innerHeight)\n  }\n\n  animate () {\n    this.renderer.setAnimationLoop(this.render.bind(this))\n  }\n\n  render () {\n    const timeNow = window.performance.now()\n    const delta = (timeNow - this.prevTime) / 1000\n    this.prevTime = timeNow\n    this.time += delta\n    this.update(delta, this.time)\n\n    if (this.isVRActive !== this.renderer.vr.isPresenting()) {\n      this.emit('toggleVR', this.renderer.vr.isPresenting())\n      this.isVRActive = this.renderer.vr.isPresenting()\n      if (this.isVRActive) {\n        Config.lerpSpeed = 0.75\n      } else {\n        Config.lerpSpeed = 0.9\n      }\n    }\n    if (this.renderer.vr.isPresenting()) {\n      this.inputManager.updateVR()\n    }\n\n    this.gameManager.update(delta)\n\n    this.renderer.render(this.scene, this.camera)\n  }\n\n  update (dt = 0, time = 0) {\n    // recursively tell all child objects to update\n    this.scene.traverse(obj => {\n      if (typeof obj.update === 'function') {\n        obj.update(dt, time)\n      }\n    })\n\n    return this\n  }\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction $getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return $getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = $getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  var args = [];\n  for (var i = 0; i < arguments.length; i++) args.push(arguments[i]);\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    ReflectApply(this.listener, this.target, args);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      if (typeof listener !== 'function') {\n        throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n      }\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      if (typeof listener !== 'function') {\n        throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n      }\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n","import { app } from './context'\nimport World from './World'\nimport Rewards from './Rewards'\nimport Scoreboard from './Scoreboard'\n\nimport InputManager from './InputManager'\nimport GameManager from './GameManager'\n\nmodule.exports = function () {\n  app.inputManager = new InputManager()\n  const scoreboard = new Scoreboard()\n  app.scene.add(scoreboard)\n  const world = new World()\n  app.scene.add(world)\n  const rewards = new Rewards()\n  app.scene.add(rewards)\n  app.gameManager = new GameManager({\n    world: world,\n    rewards: rewards,\n    scoreboard: scoreboard\n  })\n}\n","import Tokens from './Tokens'\nimport Ways from './Ways'\n\nexport default class World extends THREE.Group {\n  constructor () {\n    super()\n    this.position.y = -1.7\n    this.tokens = new Tokens()\n    this.ways = new Ways()\n    this.add(this.tokens)\n    this.add(this.ways)\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\nimport Config from './Config'\nimport Utils from './Utils'\n\nexport default class Tokens extends THREE.Group {\n  constructor () {\n    super()\n    this.app = app\n    this.tokensInitialPosZ = 50\n    this.position.z = -this.tokensInitialPosZ\n    this.addTokens()\n    this.app.on('setCorrectRememberedWay', this.setCorrectRememberedWay.bind(this))\n    this.app.on('shuffleTokens', this.shuffleTokens.bind(this))\n    this.app.on('reorderTokens', this.reorderTokens.bind(this))\n    this.app.on('setStoredTokens', this.setStoredTokens.bind(this))\n    this.app.on('shuffleStoredTokens', this.shuffleStoredTokens.bind(this))\n    this.app.on('solve', this.solve.bind(this))\n    this.app.on('solveRemembering', this.solveRemembering.bind(this))\n    this.app.on('postSolved', this.postSolved.bind(this))\n  }\n\n  addTokens () {\n    for (let i = 0; i < 5; i++) {\n      let tokenGeometry\n      switch (i) {\n        case 0:\n          tokenGeometry = new THREE.RingBufferGeometry(0.25, 0.35, 3)\n          break\n        case 1:\n          tokenGeometry = new THREE.RingBufferGeometry(0.25, 0.35, 4)\n          break\n        case 2:\n          tokenGeometry = new THREE.RingBufferGeometry(0.25, 0.35, 5)\n          break\n        case 3:\n          tokenGeometry = new THREE.RingBufferGeometry(0.25, 0.35, 6)\n          break\n        case 4:\n          tokenGeometry = new THREE.RingBufferGeometry(0.25, 0.35, 32)\n          break\n      }\n      const tokenMaterial = new THREE.MeshBasicMaterial({ color: 0xffffff, side: THREE.DoubleSide })\n      const token = new THREE.Mesh(tokenGeometry, tokenMaterial)\n      token.name = i\n      token.position.x = i * 2 - 4\n      token.position.y = 1.5\n      this.app.emit('tokenAdded', tokenGeometry, tokenMaterial, i)\n      this.add(token)\n    }\n    this.app.emit('allTokensAdded')\n  }\n\n  setCorrectRememberedWay (tokensStore, index) {\n    for (var i = 0; i < this.children.length; i++) {\n      if (this.children[i].name === tokensStore[index][1][0]) {\n        this.app.emit('correctWayChanged', (this.children[i].position.x + 4) / 2)\n        this.app.emit('showCorrectReward', this.children[i].name)\n      }\n    }\n  }\n\n  shuffleTokens () {\n    Utils.shuffle(this.children)\n    for (var i = 0; i < this.children.length; i++) {\n      this.children[i].position.x = i * 2 - 4\n      var tmpColor = Config.colorArr[i]\n      this.children[i].material.color.set(tmpColor)\n    }\n    this.app.emit('tokensShuffled', this.children)\n  }\n\n  setStoredTokens () {\n    this.position.z = this.tokensInitialPosZ / 2\n  }\n\n  shuffleStoredTokens () {\n    this.position.z = -this.tokensInitialPosZ\n  }\n\n  reorderTokens (tokensStore, i, index) {\n    for (var j = 0; j < this.children.length; j++) {\n      if (this.children[j].name === tokensStore[index][0][i][0]) {\n        this.children[j].position.x = i * 2 - 4\n        this.children[j].material.color.set(tokensStore[index][0][i][1])\n      }\n    }\n  }\n\n  solve (actualWay, correcName) {\n    if (this.children[actualWay].name === correcName) {\n      this.app.emit('solveOK')\n    } else {\n      this.app.emit('solveERROR')\n    }\n    this.visible = false\n  }\n\n  solveRemembering (actualWay, correctWay) {\n    if (this.children[actualWay].name === this.children[correctWay].name) {\n      this.app.emit('solveRememberingOK')\n    } else {\n      this.app.emit('solveRememberingERROR')\n    }\n    this.visible = false\n  }\n\n  postSolved () {\n    this.visible = true\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\nimport Config from './Config'\n\nexport default class Ways extends THREE.Group {\n  constructor () {\n    super()\n    this.app = app\n    this.addWays()\n  }\n\n  addWays () {\n    const wayGeometry = new THREE.PlaneBufferGeometry(1.9, Config.wayLength, 1, 1)\n    wayGeometry.rotateX(-Math.PI / 2)\n    for (let i = 0; i < 5; i++) {\n      const wayMaterial = new THREE.MeshBasicMaterial({ color: Config.wayColor })\n      const way = new THREE.Mesh(wayGeometry, wayMaterial)\n      way.name = 'way' + i\n      way.position.x = (i * 2) - 4\n      way.position.y = 0.1\n      way.position.z = 0\n      this.app.inputManager.addCollider(way)\n      this.add(way)\n    }\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\n// import Config from './Config'\n\nexport default class Rewards extends THREE.Group {\n  constructor () {\n    super()\n    this.app = app\n    this.radius = 0.05\n    this.position.z = -0.5\n    this.position.y = -0.05\n    this.addRewards()\n    this.addErrorReward()\n    this.visible = false\n    this.app.on('showCorrectReward', this.showCorrectReward.bind(this))\n    this.app.on('resetAtNewCycle', this.resetAtNewCycle.bind(this))\n    this.app.on('solve', this.solve.bind(this))\n    this.app.on('solveERROR', this.solveERROR.bind(this))\n    this.app.on('solveRemembering', this.solve.bind(this))\n    this.app.on('solveRememberingERROR', this.solveERROR.bind(this))\n    this.app.on('endgame', this.endgame.bind(this))\n  }\n\n  addRewards () {\n    const rewardMaterial = new THREE.LineBasicMaterial({ color: 0xffffff })\n    for (let i = 0; i < 5; i++) {\n      let rewardGeometry\n      switch (i) {\n        case 0:\n          rewardGeometry = this.getRewardGeometry(3)\n          break\n        case 1:\n          rewardGeometry = this.getRewardGeometry(4)\n          break\n        case 2:\n          rewardGeometry = this.getRewardGeometry(5)\n          break\n        case 3:\n          rewardGeometry = this.getRewardGeometry(6)\n          break\n        case 4:\n          rewardGeometry = this.getRewardGeometry(32)\n          break\n      }\n      const reward = new THREE.Line(rewardGeometry, rewardMaterial)\n      reward.name = i\n      this.add(reward)\n    }\n  }\n\n  addErrorReward () {\n    const crossShape = new THREE.Shape()\n    crossShape.moveTo(0, -7.5)\n    crossShape.lineTo(-32.5, -40)\n    crossShape.lineTo(-40, -32.5)\n    crossShape.lineTo(-7.5, 0)\n    crossShape.lineTo(-40, 32.5)\n    crossShape.lineTo(-32.5, 40)\n    crossShape.lineTo(0, 10)\n    crossShape.lineTo(32.5, 40)\n    crossShape.lineTo(40, 32.5)\n    crossShape.lineTo(10, 0)\n    crossShape.lineTo(40, -32.5)\n    crossShape.lineTo(32.5, -40)\n    crossShape.lineTo(0, -7.5)\n    const geometry = new THREE.ShapeGeometry(crossShape)\n    const material = new THREE.MeshBasicMaterial()\n    const mesh = new THREE.Mesh(geometry, material)\n    mesh.scale.set(this.radius * 0.02, this.radius * 0.02, this.radius * 0.02)\n    this.add(mesh)\n  }\n\n  showCorrectReward (correctName) {\n    for (var i = 0; i < this.children.length; i++) {\n      if (this.children[i].name === correctName) {\n        this.children[i].visible = true\n      } else {\n        this.children[i].visible = false\n      }\n    }\n  }\n\n  getRewardGeometry (segmentCount) {\n    var rewardGeometry = new THREE.Geometry()\n    for (var i = 0; i <= segmentCount; i++) {\n      var theta = (i / segmentCount) * Math.PI * 2\n      rewardGeometry.vertices.push(\n        new THREE.Vector3(\n          Math.cos(theta) * this.radius,\n          Math.sin(theta) * this.radius,\n          0))\n    }\n    return rewardGeometry\n  }\n\n  resetAtNewCycle () {\n    this.position.z = -0.5\n    this.visible = false\n  }\n\n  solve () {\n    this.scale.set(0.1, 0.1, 0.1)\n    this.visible = true\n  }\n\n  solveERROR () {\n    for (var i = 0; i < this.children.length; i++) {\n      if (i === this.children.length - 1) {\n        this.children[i].visible = true\n      } else {\n        this.children[i].visible = false\n      }\n    }\n  }\n\n  endgame () {\n    this.visible = false\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\nimport StartBtn from './StartBtn'\nimport Hints from './Hints'\nimport BigTokens from './BigTokens'\nimport Score from './Score'\nimport PlayRewPanels from './PlayRewPanels'\n\nexport default class Scoreboard extends THREE.Group {\n  constructor () {\n    super()\n    this.app = app\n    this.position.set(0, 1.25, -5)\n\n    this.startBtn = new StartBtn()\n    this.startBtn.position.set(0, 0.2, 0)\n    this.add(this.startBtn)\n\n    this.hints = new Hints()\n    this.hints.position.set(0, 1, 0)\n    this.hints.visible = false\n    this.add(this.hints)\n\n    this.bigTokens = new BigTokens()\n    this.bigTokens.position.set(0, 0.5, 0)\n    this.bigTokens.visible = false\n    this.add(this.bigTokens)\n\n    this.score = new Score()\n    this.score.position.set(0, 1.5, 0)\n    this.add(this.score)\n\n    this.playRewPanels = new PlayRewPanels()\n    this.playRewPanels.position.set(0, 0.5, 0)\n    this.playRewPanels.visible = false\n    this.add(this.playRewPanels)\n\n    this.app.on('startgame', this.startgame.bind(this))\n    this.app.on('endgame', this.endgame.bind(this))\n  }\n\n  startgame () {\n    this.startBtn.interactiveObj.visible = false\n  }\n\n  endgame () {\n    this.score.visible = true\n    this.startBtn.interactiveObj.visible = true\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\nimport Config from './Config'\n\nexport default class StartBtn extends THREE.Object3D {\n  constructor () {\n    super()\n    this.app = app\n    this.interactiveObj = new THREE.Mesh(\n      new THREE.CircleBufferGeometry(0.7, 0),\n      new THREE.MeshBasicMaterial({\n        color: Config.wayColor\n      })\n    )\n    this.interactiveObj.name = 'start'\n    this.add(this.interactiveObj)\n    this.app.inputManager.addCollider(this.interactiveObj)\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\nimport Config from './Config'\nimport HintGroup from './HintGroup'\n\nexport default class Hints extends THREE.Group {\n  constructor () {\n    super()\n    this.app = app\n    this.maxHints = 6\n    for (let i = 0; i < Config.maxHints; i++) {\n      var hintGroup = new HintGroup()\n      hintGroup.scale.set(0.25, 0.25, 0.25)\n      hintGroup.position.x = -0.62 + i * 0.25\n      this.add(hintGroup)\n    }\n    this.app.on('setHints', this.setHints.bind(this))\n    this.app.on('endgame', this.endgame.bind(this))\n  }\n\n  setHints (tokensStore, gameStatus, cycle, cyclesPerRound, remembered) {\n    for (var i = 0; i < this.children.length; i++) {\n      if (i < cyclesPerRound) {\n        this.children[i].visible = true\n        if (gameStatus === 2) {\n          if (tokensStore[i]) {\n            this.updateHint(i, tokensStore[i][1][0], tokensStore[i][1][1])\n          } else {\n            this.updateHint(i, 'hidden')\n          }\n        }\n        if (gameStatus === 3) {\n          var modBack = cycle % cyclesPerRound\n          var indexStoredTokens = cyclesPerRound - modBack - 1\n          if (indexStoredTokens < i) {\n            this.updateHint(i, 'hidden')\n          } else {\n            this.updateHint(i, tokensStore[i][1][0], tokensStore[i][1][1])\n          }\n        }\n        if (gameStatus === 4) {\n          if (i < remembered) {\n            this.updateHint(i, tokensStore[i][1][0], tokensStore[i][1][1])\n          } else {\n            this.updateHint(i, 'hidden')\n          }\n        }\n      } else {\n        this.children[i].visible = false\n      }\n    }\n    this.position.x = (((this.maxHints / 2) * 0.25) - (cyclesPerRound * 0.25) / 2)\n    this.visible = true\n  }\n\n  updateHint (index, name, color) {\n    for (var i = 0; i < this.children[index].children.length; i++) {\n      if (this.children[index].children[i].name === name) {\n        this.children[index].children[i].visible = true\n        if (this.children[index].children[i].name !== 'hidden') {\n          this.children[index].children[i].material.color.set(color)\n        }\n      } else {\n        this.children[index].children[i].visible = false\n      }\n    }\n  }\n\n  endgame () {\n    this.visible = false\n  }\n\n  update (dt = 0) {\n  }\n}\n","import Config from './Config'\n\nexport default class HintGroup extends THREE.Group {\n  constructor () {\n    super()\n    const hintGeometry = new THREE.CircleBufferGeometry(0.35, 32)\n    const hintMaterial = new THREE.MeshBasicMaterial()\n    var hint = new THREE.Mesh(hintGeometry, hintMaterial)\n    hint.name = 'hidden'\n    this.add(hint)\n    for (let i = 0; i < 5; i++) {\n      var hintMaterialTmp = new THREE.MeshBasicMaterial()\n      let geometryTmp\n      switch (i) {\n        case 0:\n          geometryTmp = new THREE.RingBufferGeometry(0.25, 0.35, 3)\n          break\n        case 1:\n          geometryTmp = new THREE.RingBufferGeometry(0.25, 0.35, 4)\n          break\n        case 2:\n          geometryTmp = new THREE.RingBufferGeometry(0.25, 0.35, 5)\n          break\n        case 3:\n          geometryTmp = new THREE.RingBufferGeometry(0.25, 0.35, 6)\n          break\n        case 4:\n          geometryTmp = new THREE.RingBufferGeometry(0.25, 0.35, 32)\n          break\n      }\n      const hintTmp = new THREE.Mesh(geometryTmp, hintMaterialTmp)\n      hintTmp.name = i\n      this.add(hintTmp)\n    }\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\n\nexport default class BigTokens extends THREE.Group {\n  constructor () {\n    super()\n    this.app = app\n    // this.addTokens()\n    this.app.on('tokenAdded', this.tokenAdded.bind(this))\n    this.app.on('setBigTokens', this.setBigTokens.bind(this))\n    this.app.on('postSolved', this.postSolved.bind(this))\n    this.app.on('endgame', this.endgame.bind(this))\n  }\n\n  tokenAdded (geo, mat, i) {\n    const token = new THREE.Mesh(geo, mat)\n    token.name = i\n    this.add(token)\n  }\n\n  setBigTokens (correctWay) {\n    for (var i = 0; i < this.children.length; i++) {\n      if (this.children[i].name === correctWay) {\n        this.children[i].visible = true\n        var hexStr = '#' + this.children[i].material.color.getHexString()\n        document.querySelector('meta[name=\"theme-color\"]').setAttribute('content', hexStr)\n        this.app.emit('setCorrectName', this.children[i].name)\n      } else {\n        this.children[i].visible = false\n      }\n    }\n    this.visible = true\n  }\n\n  postSolved () {\n    this.visible = false\n  }\n\n  endgame () {\n    this.visible = false\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\nimport Config from './Config'\n\nexport default class Score extends THREE.Group {\n  constructor () {\n    super()\n    this.app = app\n    this.canvas = document.createElement('canvas')\n    this.canvas.width = 512\n    this.canvas.height = 128\n    this.canvas.style.display = 'none'\n    document.body.appendChild(this.canvas)\n\n    this.context = this.canvas.getContext('2d')\n    this.context.font = 'bold 72px sans-serif'\n    this.context.textAlign = 'center'\n    this.hexStr = '#' + Config.scoreColor.toString(16)\n    this.context.fillStyle = this.hexStr\n    this.actualScore = '000'\n    this.context.fillText(this.actualScore, this.canvas.width / 2, this.canvas.height / 2 + 32)\n\n    this.material = new THREE.MeshBasicMaterial({\n      transparent: true\n    })\n    this.material.map = new THREE.CanvasTexture(this.canvas)\n    this.plane = new THREE.Mesh(new THREE.PlaneBufferGeometry(4, 1), this.material)\n    this.add(this.plane)\n    // this.setScore(7, true)\n    this.setScore(0, false)\n    this.app.on('scoreboardchanged', (val, highscore) => {\n      this.setScore(val, highscore)\n    })\n    this.app.on('replay', this.replay.bind(this))\n    this.app.on('play', this.play.bind(this))\n  }\n\n  replay () {\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)\n    this.hexStr = '#' + Config.scoreColorOff.toString(16)\n    this.context.fillStyle = this.hexStr\n    this.context.font = 'bold 72px sans-serif'\n    this.context.fillText(this.actualScore, this.canvas.width / 2, this.canvas.height / 2 + 32)\n    this.material.map.needsUpdate = true\n  }\n\n  play () {\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)\n    this.hexStr = '#' + Config.scoreColor.toString(16)\n    this.context.fillStyle = this.hexStr\n    this.context.font = 'bold 72px sans-serif'\n    this.context.fillText(this.actualScore, this.canvas.width / 2, this.canvas.height / 2 + 32)\n    this.material.map.needsUpdate = true\n  }\n\n  setScore (val, highscore) {\n    let valStr = Number(val).toString()\n    if (valStr.length > 3) {\n      valStr = '999'\n    } else if (valStr.length === 2) {\n      valStr = '0' + valStr\n    } else if (valStr.length === 1) {\n      valStr = '00' + valStr\n    }\n\n    this.actualScore = valStr\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)\n\n    if (highscore) {\n      this.hexStr = '#' + Config.highscoreColor.toString(16)\n      this.context.fillStyle = this.hexStr\n      this.context.font = 'bolder 28px sans-serif'\n      this.context.fillText('YOUR BEST', this.canvas.width / 2, this.canvas.height / 2 - 42)\n      this.context.font = 'bolder 96px sans-serif'\n    } else {\n      this.hexStr = '#' + Config.scoreColor.toString(16)\n      this.context.fillStyle = this.hexStr\n      this.context.font = 'bold 72px sans-serif'\n    }\n    this.context.fillText(valStr, this.canvas.width / 2, this.canvas.height / 2 + 32)\n    this.material.map.needsUpdate = true\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\nimport Config from './Config'\n\nexport default class PlayRewPanels extends THREE.Group {\n  constructor () {\n    super()\n    this.app = app\n    this.canvas = document.createElement('canvas')\n    this.canvas.width = 512\n    this.canvas.height = 128\n    this.canvas.style.display = 'none'\n    document.body.appendChild(this.canvas)\n\n    this.context = this.canvas.getContext('2d')\n    this.context.font = 'bold 72px sans-serif'\n    this.context.textAlign = 'center'\n    this.hexStr = '#' + Config.scoreColor.toString(16)\n    this.context.fillStyle = this.hexStr\n    this.material = new THREE.MeshBasicMaterial({\n      transparent: true\n    })\n    this.material.map = new THREE.CanvasTexture(this.canvas)\n    this.plane = new THREE.Mesh(new THREE.PlaneBufferGeometry(2, 0.5), this.material)\n    this.add(this.plane)\n    this.app.on('replay', this.stop.bind(this))\n    this.app.on('endgame', this.stop.bind(this))\n    this.app.on('play', this.play.bind(this))\n    this.app.on('rew', this.rew.bind(this))\n    // this.play()\n  }\n\n  play () {\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)\n    this.context.fillText('PLAY ', this.canvas.width / 2, this.canvas.height / 2 + 32)\n    this.material.map.needsUpdate = true\n    this.visible = true\n  }\n\n  rew () {\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)\n    this.context.fillText('REW ', this.canvas.width / 2, this.canvas.height / 2 + 32)\n    this.material.map.needsUpdate = true\n    this.visible = true\n  }\n\n  stop () {\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)\n    this.material.map.needsUpdate = true\n    this.visible = false\n  }\n\n  update (dt = 0) {\n  }\n}\n","import { app } from './context'\nimport Config from './Config'\n\nmodule.exports = class InputManager {\n  constructor () {\n    this.app = app\n    this.app.on('toggleVR', this.toggleVR.bind(this))\n\n    this.iOS = !!navigator.platform && /iPad|iPhone|iPod/.test(navigator.platform)\n\n    this.raycaster = new THREE.Raycaster()\n    this.intersected = []\n    this.tempMatrix = new THREE.Matrix4()\n\n    this.mouse = new THREE.Vector2()\n    this.intersection = null\n\n    this.colliders = []\n\n    this.swipe = {\n      sX: 0,\n      sY: 0,\n      eX: 0,\n      eY: 0\n    }\n    this.addControllers()\n\n    document.addEventListener('mousemove', this.onDocumentMouseMove.bind(this), false)\n    document.addEventListener('click', this.onClick.bind(this), false)\n    document.addEventListener('touchstart', this.onTouchStart.bind(this), false)\n    document.addEventListener('touchmove', this.onTouchMove.bind(this), false)\n    document.addEventListener('touchend', this.onTouchEnd.bind(this), false)\n  }\n\n  toggleVR (bool) {\n    this.controller1.visible = bool\n    this.controller2.visible = bool\n  }\n\n  addControllers () {\n    this.controller1 = this.app.renderer.vr.getController(0)\n    this.controller1.addEventListener('selectstart', this.onSelectStart.bind(this))\n    this.controller1.addEventListener('selectend', this.onSelectEnd.bind(this))\n    this.app.scene.add(this.controller1)\n\n    this.controller2 = this.app.renderer.vr.getController(1)\n    this.controller2.addEventListener('selectstart', this.onSelectStart)\n    this.controller2.addEventListener('selectend', this.onSelectEnd)\n    this.app.scene.add(this.controller2)\n\n    // helpers\n\n    var geometryHelper = new THREE.BufferGeometry().setFromPoints([new THREE.Vector3(0, 0, 0), new THREE.Vector3(0, 0, -1)])\n    var materialHelper = new THREE.LineBasicMaterial({ color: 0xffffff })\n    var line = new THREE.Line(geometryHelper, materialHelper)\n    line.name = 'line'\n    line.scale.z = 5\n\n    this.controller1.add(line.clone())\n    this.controller2.add(line.clone())\n  }\n\n  // Colliders\n  addCollider (collider) {\n    if (collider) {\n      this.colliders.push(collider)\n    }\n  }\n\n  removeCollider (collider) {\n    const index = this.colliders.indexOf(collider)\n    if (index !== -1) {\n      this.colliders.splice(index, 1)\n    }\n  }\n\n  addColliders (colliders) {\n    colliders.forEach(this.addCollider.bind(this))\n  }\n\n  resetColliders () {\n    this.colliders = []\n  }\n\n  //   VR controller events\n  onSelectStart (event) {\n    var controller = event.target\n\n    var intersections = this.getIntersections(controller)\n\n    if (intersections.length > 0) {\n      if (intersections[0].object.name === 'start') {\n        this.app.emit('startgame')\n      } else if (intersections[0].object.name.substr(0, 3) === 'way') {\n        const newWay = parseInt(intersections[0].object.name.substr(3, 1), 10)\n        this.app.emit('wayChanged', newWay)\n      }\n    }\n  }\n\n  onSelectEnd () {\n  }\n\n  // Mouse / Desktop methods\n  onDocumentMouseMove (event) {\n    event.preventDefault()\n    if (!event.targetTouches) {\n      this.mouse.x = (event.pageX / window.innerWidth) * 2 - 1\n      this.mouse.y = -(event.pageY / window.innerHeight) * 2 + 1\n      if (this.intersection) {\n        this.app.renderer.domElement.style.cursor = 'pointer'\n      } else {\n        this.app.renderer.domElement.style.cursor = 'default'\n      }\n      this.doFallbackRaycast()\n    }\n  }\n\n  onClick (event) {\n    event.preventDefault()\n    if (event.touches && this.iOS) {\n      this.mouse.x = (event.pageX / window.innerWidth) * 2 - 1\n      this.mouse.y = -(event.pageY / window.innerHeight) * 2 + 1\n    } else {\n      this.mouse.x = (event.pageX / window.innerWidth) * 2 - 1\n      this.mouse.y = -(event.pageY / window.innerHeight) * 2 + 1\n    }\n\n    this.doFallbackRaycast()\n\n    if (this.intersected.length) {\n      if (this.intersected[0].name === 'start') {\n        this.app.emit('startgame')\n      } else if (this.intersected[0].name.substr(0, 3) === 'way') {\n        const newWay = parseInt(this.intersected[0].name.substr(3, 1), 10)\n        this.app.emit('wayChanged', newWay)\n      }\n    }\n  }\n\n  doFallbackRaycast () {\n    this.cleanIntersected()\n\n    this.raycaster.setFromCamera(this.mouse, this.app.camera)\n    var intersections = this.raycaster.intersectObjects(this.colliders)\n    this.intersection = (intersections.length) > 0 ? intersections[0] : null\n    if (this.intersection !== null) {\n      var object = this.intersection.object\n      object.material.color.set(Config.wayColorOver)\n      this.intersected.push(object)\n    }\n  }\n\n  // Touch screen methods\n  // Swipe on touch screens\n  onTouchStart (e) {\n    console.log('---start')\n    var t = e.touches[0]\n    this.swipe.sX = t.screenX\n    this.swipe.sY = t.screenY\n  }\n\n  onTouchMove (e) {\n    console.log('---move')\n    var t = e.touches[0]\n    // e.preventDefault()\n    this.swipe.eX = t.screenX\n    this.swipe.eY = t.screenY\n  }\n\n  onTouchEnd (e) {\n    console.log('---')\n    if ((((this.swipe.eX - 60 > this.swipe.sX) || (this.swipe.eX + 60 < this.swipe.sX)) && ((this.swipe.eY < this.swipe.sY + 60) && (this.swipe.sY > this.swipe.eY - 60) && (this.swipe.eX > 0)))) {\n      if (this.swipe.eX > this.swipe.sX) {\n        this.app.emit('wayLeft')\n      } else {\n        this.app.emit('wayRight')\n      }\n    } else {\n      if (this.iOS) {\n        this.onClick(e)\n      }\n    }\n  }\n\n  // common methods\n  getIntersections (controller) {\n    this.tempMatrix.identity().extractRotation(controller.matrixWorld)\n\n    this.raycaster.ray.origin.setFromMatrixPosition(controller.matrixWorld)\n    this.raycaster.ray.direction.set(0, 0, -1).applyMatrix4(this.tempMatrix)\n\n    return this.raycaster.intersectObjects(this.colliders)\n  }\n\n  intersectObjects (controller) {\n    // Do not highlight when already selected\n\n    if (controller.userData.selected !== undefined) return\n\n    var line = controller.getObjectByName('line')\n    var intersections = this.getIntersections(controller)\n\n    if (intersections.length > 0) {\n      var intersection = intersections[0]\n\n      var object = intersection.object\n      object.material.color.set(Config.wayColorOver)\n      this.intersected.push(object)\n\n      line.scale.z = intersection.distance\n    } else {\n      line.scale.z = 5\n    }\n  }\n\n  cleanIntersected () {\n    while (this.intersected.length) {\n      var object = this.intersected.pop()\n      object.material.color.set(Config.wayColor)\n    }\n  }\n\n  updateVR () {\n    this.cleanIntersected()\n\n    this.intersectObjects(this.controller1)\n    this.intersectObjects(this.controller2)\n  }\n}\n","import { app } from './context'\nimport Config from './Config'\nimport Utils from './Utils'\n\nmodule.exports = class GameManager {\n  constructor (opt = {}) {\n    this.app = app\n    this.world = opt.world\n    this.rewards = opt.rewards\n    this.scoreboard = opt.scoreboard\n\n    this.correctName = 0\n    // 0 - before start\n    // 1 - started\n    // 2 - catching\n    // 3 - back\n    // 4 - remembering\n    // 5 - lose\n    // 6 - max score 999\n    this.gameStatus = 0\n\n    this.highscore = window.localStorage.getItem('unboring.js13k.back')\n    if (this.highscore !== null) {\n      this.app.emit('scoreboardchanged', this.highscore, true)\n    } else {\n      this.app.emit('scoreboardchanged', this.highscore, true)\n    }\n\n    this.actualWay = 2\n    this.newWay = 2\n    this.correctWay = 2\n    this.targetXpos = 0\n    this.resetGameSettings()\n    this.app.on('startgame', this.startgame.bind(this))\n    this.app.on('wayChanged', this.wayChanged.bind(this))\n    this.app.on('wayLeft', this.wayLeft.bind(this))\n    this.app.on('wayRight', this.wayRight.bind(this))\n    this.app.on('correctWayChanged', this.correctWayChanged.bind(this))\n    this.app.on('tokensShuffled', this.tokensShuffled.bind(this))\n    this.app.on('setCorrectName', this.setCorrectName.bind(this))\n    this.app.on('solveOK', this.solveOK.bind(this))\n    this.app.on('solveERROR', this.solveERROR.bind(this))\n    this.app.on('solveRememberingOK', this.solveRememberingOK.bind(this))\n    this.app.on('solveRememberingERROR', this.solveRememberingERROR.bind(this))\n  }\n\n  startgame () {\n    this.resetGameSettings()\n    this.gameStatus = 1\n    this.app.emit('scoreboardchanged', this.score, false)\n    this.newCycle()\n  }\n\n  wayChanged (way) {\n    this.newWay = way\n  }\n\n  wayLeft () {\n    if (this.newWay > 0) {\n      this.newWay -= 1\n    }\n  }\n\n  wayRight () {\n    if (this.newWay < 4) {\n      this.newWay += 1\n    }\n  }\n\n  resetGameSettings () {\n    this.solved = false\n    this.errorOnSolved = false\n    this.gameSpeed = 10\n    this.backSpeed = 50\n    this.cycle = 0\n    this.cyclesPerRound = 1\n    this.caught = 0\n    this.remembered = 0\n    this.tokensStore = []\n    this.score = 0\n  }\n\n  getTargetX (way) {\n    // Only works for 5 ways\n    return (4 - way) * 2 - 4\n  }\n\n  newRound () {\n    this.app.scene.background = new THREE.Color(Config.bgColor)\n    this.app.scene.fog = new THREE.Fog(Config.bgColor, 0, 45)\n    if (this.cyclesPerRound === 5) {\n      this.gameSpeed += 5\n      this.cyclesPerRound = 1\n    } else {\n      this.cyclesPerRound += 1\n    }\n    this.cycle = 0\n    this.caught = 0\n    this.remembered = 0\n    this.tokensStore = []\n    this.newCycle()\n  }\n\n  newCycle () {\n    if (this.errorOnSolved) {\n      // Error time\n      this.gameStatus = 5\n      this.endgame()\n      return\n    }\n    if (this.cycle < this.cyclesPerRound && this.caught < this.cyclesPerRound) {\n      // Catching time\n      this.app.emit('replay')\n      this.gameStatus = 2\n      this.app.emit('setHints', this.tokensStore, this.gameStatus, this.cycle, this.cyclesPerRound, this.remembered)\n      this.setCorrectWay()\n\n      Utils.shuffle(Config.colorArr)\n      this.app.emit('shuffleTokens')\n\n      this.app.emit('setBigTokens', this.correctWay)\n    } else if (this.cycle < this.cyclesPerRound * 2 && this.caught === this.cyclesPerRound) {\n      // Back time\n      this.app.emit('rew')\n      this.app.scene.background = new THREE.Color(Config.bgColorBack)\n      this.app.scene.fog = new THREE.Fog(Config.bgColorBack, 0, 45)\n      this.gameStatus = 3\n      var modBack = this.cycle % this.cyclesPerRound\n      var indexStoredTokens = this.cyclesPerRound - modBack - 1\n      this.app.emit('setStoredTokens')\n      this.placeStoredTokens(indexStoredTokens)\n      this.app.emit('setHints', this.tokensStore, this.gameStatus, this.cycle, this.cyclesPerRound, this.remembered)\n    } else if (this.cycle >= this.cyclesPerRound * 2 && this.remembered < this.caught) {\n      // Remembering time\n      this.app.emit('play')\n      this.app.scene.background = new THREE.Color(Config.bgColor)\n      this.app.scene.fog = new THREE.Fog(Config.bgColor, 0, 45)\n      this.gameStatus = 4\n\n      this.app.emit('shuffleStoredTokens')\n      Utils.shuffle(this.tokensStore[this.remembered][0])\n      this.placeStoredTokens(this.remembered)\n\n      this.app.emit('setCorrectRememberedWay', this.tokensStore, this.remembered)\n      this.setDefaultTheme()\n      this.app.emit('setHints', this.tokensStore, this.gameStatus, this.cycle, this.cyclesPerRound, this.remembered)\n    } else if (this.score >= 999) {\n      this.gameStatus = 6\n    } else {\n      // Next round\n      this.newRound()\n      return\n    }\n\n    this.app.emit('resetAtNewCycle')\n    this.solved = false\n    this.world.position.z = 0\n\n    this.cycle++\n  }\n\n  // Ticks\n\n  catchingTick (delta) {\n    this.world.position.z += this.gameSpeed * delta\n    if (Math.abs(this.world.position.z) >= Config.wayLength / 4 - 2 && !this.solved) {\n      this.app.emit('solve', this.actualWay, this.correctName)\n      this.solved = true\n    }\n    if (Math.abs(this.world.position.z) >= Config.wayLength / 4 + 2 && !this.world.tokens.visible) {\n      this.postSolved()\n    }\n    if (Math.abs(this.world.position.z) >= Config.wayLength / 4 + 10) {\n      this.newCycle()\n    }\n  }\n\n  backTick (delta) {\n    this.world.position.z -= this.backSpeed * delta\n    if (this.world.position.z < -Config.wayLength / 3) {\n      this.newCycle()\n    }\n  }\n\n  rememberingTick (delta) {\n    this.world.position.z += this.gameSpeed * delta\n    if (Math.abs(this.world.position.z) >= Config.wayLength / 4 - 2 && !this.solved) {\n      this.app.emit('solveRemembering', this.actualWay, this.correctWay)\n      this.solved = true\n    }\n    if (Math.abs(this.world.position.z) >= Config.wayLength / 4 + 2 && !this.world.tokens.visible) {\n      this.postSolved()\n    }\n    if (Math.abs(this.world.position.z) >= Config.wayLength / 4 + 10) {\n      this.newCycle()\n    }\n  }\n\n  gameTick (delta) {\n    switch (this.gameStatus) {\n      case 2:\n        this.catchingTick(delta)\n        break\n      case 3:\n        this.backTick(delta)\n        break\n      case 4:\n        this.rememberingTick(delta)\n        break\n    }\n\n    if (this.rewards.visible) {\n      var newScale = THREE.Math.lerp(2.5, this.rewards.scale.x, Config.lerpSpeed)\n      this.rewards.scale.set(newScale, newScale, newScale)\n      this.rewards.position.z += 0.01\n    }\n  }\n\n  setDefaultTheme () {\n    document.querySelector('meta[name=\"theme-color\"]').setAttribute('content', Config.bgColorBack)\n  }\n\n  setCorrectWay () {\n    this.correctWay = Math.floor(Math.random() * 5)\n    this.app.emit('showCorrectReward', this.correctWay)\n  }\n\n  correctWayChanged (way) {\n    this.correctWay = way\n  }\n\n  tokensShuffled (tokensChildren) {\n    this.tokensStore[this.caught] = [[], []]\n    for (var i = 0; i < tokensChildren.length; i++) {\n      tokensChildren[i].position.x = i * 2 - 4\n      var tmpColor = Config.colorArr[i]\n      tokensChildren[i].material.color.set(tmpColor)\n      this.tokensStore[this.caught][0][i] = [tokensChildren[i].name, tmpColor]\n      if (tokensChildren[i].name === this.correctWay) {\n        this.tokensStore[this.caught][1] = [tokensChildren[i].name, tmpColor]\n      }\n    }\n  }\n\n  placeStoredTokens (index) {\n    for (var i = 0; i < this.tokensStore[index][0].length; i++) {\n      this.app.emit('reorderTokens', this.tokensStore, i, index)\n    }\n  }\n\n  setCorrectName (name) {\n    this.correctName = name\n  }\n\n  postSolved () {\n    this.app.emit('postSolved')\n    this.app.emit('setHints', this.tokensStore, this.gameStatus, this.cycle, this.cyclesPerRound, this.remembered)\n  }\n\n  solveOK () {\n    this.caught += 1\n  }\n\n  solveERROR () {\n    this.errorOnSolved = true\n  }\n\n  solveRememberingOK () {\n    this.remembered += 1\n    this.score += 1\n    this.app.emit('scoreboardchanged', this.score, false)\n  }\n\n  solveRememberingERROR () {\n    this.errorOnSolved = true\n  }\n\n  endgame () {\n    this.app.emit('endgame')\n    this.app.scene.background = new THREE.Color(Config.bgColor)\n    this.app.scene.fog = new THREE.Fog(Config.bgColor, 0, 45)\n    if (this.score > Number(this.highscore)) {\n      this.highscore = this.score\n      window.localStorage.setItem('unboring.js13k.back', this.score)\n    }\n    this.app.emit('scoreboardchanged', this.highscore, true)\n    this.setDefaultTheme()\n  }\n\n  update (dt) {\n    if (this.gameStatus > 0 && this.gameStatus < 5) {\n      this.gameTick(dt)\n    }\n\n    if (this.newWay !== this.actualWay) {\n      this.actualWay = this.newWay\n      this.targetXpos = this.getTargetX(this.newWay)\n    }\n\n    if (this.targetXpos !== this.world.position.x) {\n      this.world.position.x = THREE.Math.lerp(this.targetXpos, this.world.position.x, Config.lerpSpeed)\n    }\n  }\n}\n"],"sourceRoot":""}