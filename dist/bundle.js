!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";var i,o=n(4);var r=new((i=o)&&i.__esModule?i:{default:i}).default;e.exports={app:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=null;t.default=new function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i||(this.bgColor=1118481,this.bgColorBack=1184274,this.wayColor=5592405,this.wayColorOver=6710886,this.wayLength=200,this.scoreColor=16777215,this.scoreColorOff=4473924,this.highscoreColor=16763904,this.colorArr=[16464330,16632362,2869792,16552229,879356,6560203,16777215,16384024],this.lerpSpeed=.9,this.maxHints=6,i=this),i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var o=null,r=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o||(o=this),o}return i(e,[{key:"shuffle",value:function(e){e.sort(function(){return Math.random()-.5})}}]),e}();t.default=new r},function(e,t,n){"use strict";n(0),n(6)()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(5),s=n(1),a=(i=s)&&i.__esModule?i:{default:i};var c=function(e){function t(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.isVRActive=!1,e.time=0,e.prevTime=window.performance.now(),e.renderer=new THREE.WebGLRenderer({antialias:!0}),e.renderer.setPixelRatio(window.devicePixelRatio),e.renderer.setSize(window.innerWidth,window.innerHeight),e.renderer.vr.enabled=!0,document.body.appendChild(e.renderer.domElement),document.body.appendChild(THREE.WEBVR.createButton(e.renderer,{referenceSpaceType:"local"})),e.scene=new THREE.Scene,e.scene.background=new THREE.Color(a.default.bgColor),e.scene.fog=new THREE.Fog(a.default.bgColor,0,45),e.camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),e.camera.layers.enable(1),window.addEventListener("resize",function(){return e.resize()}),e.animate(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.EventEmitter),o(t,[{key:"resize",value:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}},{key:"animate",value:function(){this.renderer.setAnimationLoop(this.render.bind(this))}},{key:"render",value:function(){var e=window.performance.now(),t=(e-this.prevTime)/1e3;this.prevTime=e,this.time+=t,this.update(t,this.time),this.isVRActive!==this.renderer.vr.isPresenting()&&(this.emit("toggleVR",this.renderer.vr.isPresenting()),this.isVRActive=this.renderer.vr.isPresenting(),this.isVRActive?a.default.lerpSpeed=.75:a.default.lerpSpeed=.9),this.renderer.vr.isPresenting()&&this.inputManager.updateVR(),this.gameManager.update(t),this.synth.update(t),this.renderer.render(this.scene,this.camera)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.scene.traverse(function(n){"function"==typeof n.update&&n.update(e,t)}),this}}]),t}();t.default=c},function(e,t,n){"use strict";var i,o="object"==typeof Reflect?Reflect:null,r=o&&"function"==typeof o.apply?o.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};i=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function l(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function u(e,t,n,i){var o,r,s,a;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(r=e._events)?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),r=e._events),s=r[t]),void 0===s)s=r[t]=n,++e._eventsCount;else if("function"==typeof s?s=r[t]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),(o=l(e))>0&&s.length>o&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=s.length,a=c,console&&console.warn&&console.warn(a)}return e}function h(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,r(this.listener,this.target,e))}function p(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=h.bind(i);return o.listener=n,i.wrapFn=o,o}function f(e,t,n){var i=e._events;if(void 0===i)return[];var o=i[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):v(o,o.length)}function d(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function v(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)r(c,this,t);else{var l=c.length,u=v(c,l);for(n=0;n<l;++n)r(u[n],this,t)}return!0},a.prototype.addListener=function(e,t){return u(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return u(this,e,t,!0)},a.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,p(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,p(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,i,o,r,s;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,r=n.length-1;r>=0;r--)if(n[r]===t||n[r].listener===t){s=n[r].listener,o=r;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,r=Object.keys(n);for(i=0;i<r.length;++i)"removeListener"!==(o=r[i])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},a.prototype.listeners=function(e){return f(this,e,!0)},a.prototype.rawListeners=function(e){return f(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},a.prototype.listenerCount=d,a.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},function(e,t,n){"use strict";var i=n(0),o=h(n(7)),r=h(n(10)),s=h(n(11)),a=h(n(19)),c=h(n(20)),l=h(n(21)),u=h(n(22));function h(e){return e&&e.__esModule?e:{default:e}}e.exports=function(){i.app.inputManager=new a.default;var e=new s.default;i.app.scene.add(e);var t=new o.default;i.app.scene.add(t);var n=new r.default;i.app.scene.add(n),i.app.gameManager=new c.default({world:t,rewards:n,scoreboard:e});var h=new l.default;i.app.synth=h;var p=new u.default;i.app.scene.add(p)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=s(n(8)),r=s(n(9));function s(e){return e&&e.__esModule?e:{default:e}}var a=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.position.y=-1.7,e.tokens=new o.default,e.ways=new r.default,e.add(e.tokens),e.add(e.ways),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,THREE.Group),i(t,[{key:"update",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}}]),t}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),r=a(n(1)),s=a(n(2));function a(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.app=o.app,e.tokensInitialPosZ=50,e.position.z=-e.tokensInitialPosZ,e.addTokens(),e.app.on("setCorrectRememberedWay",e.setCorrectRememberedWay.bind(e)),e.app.on("shuffleTokens",e.shuffleTokens.bind(e)),e.app.on("reorderTokens",e.reorderTokens.bind(e)),e.app.on("setStoredTokens",e.setStoredTokens.bind(e)),e.app.on("shuffleStoredTokens",e.shuffleStoredTokens.bind(e)),e.app.on("solve",e.solve.bind(e)),e.app.on("solveRemembering",e.solveRemembering.bind(e)),e.app.on("postSolved",e.postSolved.bind(e)),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,THREE.Group),i(t,[{key:"addTokens",value:function(){for(var e=0;e<5;e++){var t=void 0;switch(e){case 0:t=new THREE.RingBufferGeometry(.25,.35,3);break;case 1:t=new THREE.RingBufferGeometry(.25,.35,4);break;case 2:t=new THREE.RingBufferGeometry(.25,.35,5);break;case 3:t=new THREE.RingBufferGeometry(.25,.35,6);break;case 4:t=new THREE.RingBufferGeometry(.25,.35,32)}var n=new THREE.MeshBasicMaterial({color:16777215,side:THREE.DoubleSide}),i=new THREE.Mesh(t,n);i.name=e,i.position.x=2*e-4,i.position.y=1.5,this.app.emit("tokenAdded",t,n,e),this.add(i)}this.app.emit("allTokensAdded")}},{key:"setCorrectRememberedWay",value:function(e,t){for(var n=0;n<this.children.length;n++)this.children[n].name===e[t][1][0]&&(this.app.emit("correctWayChanged",(this.children[n].position.x+4)/2),this.app.emit("showCorrectReward",this.children[n].name))}},{key:"shuffleTokens",value:function(){s.default.shuffle(this.children);for(var e=0;e<this.children.length;e++){this.children[e].position.x=2*e-4;var t=r.default.colorArr[e];this.children[e].material.color.set(t)}this.app.emit("tokensShuffled",this.children)}},{key:"setStoredTokens",value:function(){this.position.z=this.tokensInitialPosZ/2}},{key:"shuffleStoredTokens",value:function(){this.position.z=-this.tokensInitialPosZ}},{key:"reorderTokens",value:function(e,t,n){for(var i=0;i<this.children.length;i++)this.children[i].name===e[n][0][t][0]&&(this.children[i].position.x=2*t-4,this.children[i].material.color.set(e[n][0][t][1]))}},{key:"solve",value:function(e,t){this.children[e].name===t?this.app.emit("solveOK"):this.app.emit("solveERROR"),this.visible=!1}},{key:"solveRemembering",value:function(e,t){this.children[e].name===this.children[t].name?this.app.emit("solveRememberingOK"):this.app.emit("solveRememberingERROR"),this.visible=!1}},{key:"postSolved",value:function(){this.visible=!0}},{key:"update",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}}]),t}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),s=n(1),a=(i=s)&&i.__esModule?i:{default:i};var c=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.app=r.app,e.addWays(),e.app.on("startgame",e.startgame.bind(e)),e.app.on("endgame",e.endgame.bind(e)),e.app.on("synth",e.synth.bind(e)),e.countEffect=0,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,THREE.Group),o(t,[{key:"addWays",value:function(){var e=new THREE.PlaneBufferGeometry(1.9,a.default.wayLength,1,1);e.rotateX(-Math.PI/2);for(var t=0;t<5;t++){var n=new THREE.MeshBasicMaterial({transparent:!0,color:a.default.wayColor}),i=new THREE.Mesh(e,n);i.name="way"+t,i.position.x=2*t-4,i.position.y=.1,i.position.z=0,this.add(i)}}},{key:"startgame",value:function(){for(var e=0;e<this.children.length;e++)this.app.inputManager.addCollider(this.children[e])}},{key:"endgame",value:function(){for(var e=0;e<this.children.length;e++)this.app.inputManager.removeCollider(this.children[e]);for(var t=0;t<this.children.length;t++)this.children[t].material.opacity=1}},{key:"synth",value:function(e){for(var t=0;t<this.children.length;t++)this.children[t].material.opacity=1;this.children[this.countEffect].material.opacity=1-4*e/100,this.countEffect>=this.children.length-1?this.countEffect=0:this.countEffect+=1}},{key:"update",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}}]),t}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0);var r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.app=o.app,e.radius=.05,e.position.z=-.5,e.position.y=-.05,e.addRewards(),e.addErrorReward(),e.visible=!1,e.app.on("showCorrectReward",e.showCorrectReward.bind(e)),e.app.on("resetAtNewCycle",e.resetAtNewCycle.bind(e)),e.app.on("solve",e.solve.bind(e)),e.app.on("solveERROR",e.solveERROR.bind(e)),e.app.on("solveRemembering",e.solve.bind(e)),e.app.on("solveRememberingERROR",e.solveERROR.bind(e)),e.app.on("endgame",e.endgame.bind(e)),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,THREE.Group),i(t,[{key:"addRewards",value:function(){for(var e=new THREE.LineBasicMaterial({color:16777215}),t=0;t<5;t++){var n=void 0;switch(t){case 0:n=this.getRewardGeometry(3);break;case 1:n=this.getRewardGeometry(4);break;case 2:n=this.getRewardGeometry(5);break;case 3:n=this.getRewardGeometry(6);break;case 4:n=this.getRewardGeometry(32)}var i=new THREE.Line(n,e);i.name=t,this.add(i)}}},{key:"addErrorReward",value:function(){var e=new THREE.Shape;e.moveTo(0,-7.5),e.lineTo(-32.5,-40),e.lineTo(-40,-32.5),e.lineTo(-7.5,0),e.lineTo(-40,32.5),e.lineTo(-32.5,40),e.lineTo(0,10),e.lineTo(32.5,40),e.lineTo(40,32.5),e.lineTo(10,0),e.lineTo(40,-32.5),e.lineTo(32.5,-40),e.lineTo(0,-7.5);var t=new THREE.ShapeGeometry(e),n=new THREE.MeshBasicMaterial,i=new THREE.Mesh(t,n);i.scale.set(.02*this.radius,.02*this.radius,.02*this.radius),this.add(i)}},{key:"showCorrectReward",value:function(e){for(var t=0;t<this.children.length;t++)this.children[t].name===e?this.children[t].visible=!0:this.children[t].visible=!1}},{key:"getRewardGeometry",value:function(e){for(var t=new THREE.Geometry,n=0;n<=e;n++){var i=n/e*Math.PI*2;t.vertices.push(new THREE.Vector3(Math.cos(i)*this.radius,Math.sin(i)*this.radius,0))}return t}},{key:"resetAtNewCycle",value:function(){this.position.z=-.5,this.visible=!1}},{key:"solve",value:function(){this.scale.set(.1,.1,.1),this.visible=!0}},{key:"solveERROR",value:function(){for(var e=0;e<this.children.length;e++)e===this.children.length-1?this.children[e].visible=!0:this.children[e].visible=!1}},{key:"endgame",value:function(){this.visible=!1}},{key:"update",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}}]),t}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),r=h(n(12)),s=h(n(13)),a=h(n(15)),c=h(n(16)),l=h(n(17)),u=h(n(18));function h(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.app=o.app,e.position.set(0,1.25,-5),e.startBtn=new r.default,e.startBtn.position.set(0,.2,0),e.add(e.startBtn),e.hints=new s.default,e.hints.position.set(0,1,0),e.hints.visible=!1,e.add(e.hints),e.bigTokens=new a.default,e.bigTokens.position.set(0,.5,0),e.bigTokens.visible=!1,e.add(e.bigTokens),e.score=new c.default,e.score.position.set(0,1.5,0),e.add(e.score),e.playRewPanels=new l.default,e.playRewPanels.position.set(0,.5,0),e.playRewPanels.visible=!1,e.add(e.playRewPanels),e.audioBtn=new u.default,e.audioBtn.position.set(0,2.25,0),e.add(e.audioBtn),e.app.on("startgame",e.startgame.bind(e)),e.app.on("endgame",e.endgame.bind(e)),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,THREE.Group),i(t,[{key:"startgame",value:function(){this.startBtn.interactiveObj.visible=!1}},{key:"endgame",value:function(){this.score.visible=!0,this.startBtn.interactiveObj.visible=!0}},{key:"update",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}}]),t}();t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),s=n(1),a=(i=s)&&i.__esModule?i:{default:i};var c=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.app=r.app,e.interactiveObj=new THREE.Mesh(new THREE.CircleBufferGeometry(.7,0),new THREE.MeshBasicMaterial({color:a.default.wayColor})),e.interactiveObj.name="start",e.add(e.interactiveObj),e.app.inputManager.addCollider(e.interactiveObj),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,THREE.Object3D),o(t,[{key:"update",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}}]),t}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),r=a(n(1)),s=a(n(14));function a(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.app=o.app,e.maxHints=6;for(var n=0;n<r.default.maxHints;n++){var i=new s.default;i.scale.set(.25,.25,.25),i.position.x=.25*n-.62,e.add(i)}return e.app.on("setHints",e.setHints.bind(e)),e.app.on("endgame",e.endgame.bind(e)),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,THREE.Group),i(t,[{key:"setHints",value:function(e,t,n,i,o){for(var r=0;r<this.children.length;r++)if(r<i){if(this.children[r].visible=!0,2===t&&(e[r]?this.updateHint(r,e[r][1][0],e[r][1][1]):this.updateHint(r,"hidden")),3===t)i-n%i-1<r?this.updateHint(r,"hidden"):this.updateHint(r,e[r][1][0],e[r][1][1]);4===t&&(r<o?this.updateHint(r,e[r][1][0],e[r][1][1]):this.updateHint(r,"hidden"))}else this.children[r].visible=!1;this.position.x=this.maxHints/2*.25-.25*i/2,this.visible=!0}},{key:"updateHint",value:function(e,t,n){for(var i=0;i<this.children[e].children.length;i++)this.children[e].children[i].name===t?(this.children[e].children[i].visible=!0,"hidden"!==this.children[e].children[i].name&&this.children[e].children[i].material.color.set(n)):this.children[e].children[i].visible=!1}},{key:"endgame",value:function(){this.visible=!1}},{key:"update",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}}]),t}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(1);(i=r)&&i.__esModule;var s=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=new THREE.CircleBufferGeometry(.35,32),i=new THREE.MeshBasicMaterial,o=new THREE.Mesh(n,i);o.name="hidden",e.add(o);for(var r=0;r<5;r++){var s=new THREE.MeshBasicMaterial,a=void 0;switch(r){case 0:a=new THREE.RingBufferGeometry(.25,.35,3);break;case 1:a=new THREE.RingBufferGeometry(.25,.35,4);break;case 2:a=new THREE.RingBufferGeometry(.25,.35,5);break;case 3:a=new THREE.RingBufferGeometry(.25,.35,6);break;case 4:a=new THREE.RingBufferGeometry(.25,.35,32)}var c=new THREE.Mesh(a,s);c.name=r,e.add(c)}return e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,THREE.Group),o(t,[{key:"update",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0);var r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.app=o.app,e.app.on("tokenAdded",e.tokenAdded.bind(e)),e.app.on("setBigTokens",e.setBigTokens.bind(e)),e.app.on("postSolved",e.postSolved.bind(e)),e.app.on("endgame",e.endgame.bind(e)),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,THREE.Group),i(t,[{key:"tokenAdded",value:function(e,t,n){var i=new THREE.Mesh(e,t);i.name=n,this.add(i)}},{key:"setBigTokens",value:function(e){for(var t=0;t<this.children.length;t++)if(this.children[t].name===e){this.children[t].visible=!0;var n="#"+this.children[t].material.color.getHexString();document.querySelector('meta[name="theme-color"]').setAttribute("content",n),this.app.emit("setCorrectName",this.children[t].name)}else this.children[t].visible=!1;this.visible=!0}},{key:"postSolved",value:function(){this.visible=!1}},{key:"endgame",value:function(){this.visible=!1}},{key:"update",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}}]),t}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),s=n(1),a=(i=s)&&i.__esModule?i:{default:i};var c=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.app=r.app,e.canvas=document.createElement("canvas"),e.canvas.width=512,e.canvas.height=128,e.canvas.style.display="none",document.body.appendChild(e.canvas),e.context=e.canvas.getContext("2d"),e.context.font="bold 72px sans-serif",e.context.textAlign="center",e.hexStr="#"+a.default.scoreColor.toString(16),e.context.fillStyle=e.hexStr,e.actualScore="000",e.context.fillText(e.actualScore,e.canvas.width/2,e.canvas.height/2+32),e.material=new THREE.MeshBasicMaterial({transparent:!0}),e.material.map=new THREE.CanvasTexture(e.canvas),e.plane=new THREE.Mesh(new THREE.PlaneBufferGeometry(4,1),e.material),e.add(e.plane),e.setScore(0,!1),e.app.on("scoreboardchanged",function(t,n){e.setScore(t,n)}),e.app.on("replay",e.replay.bind(e)),e.app.on("play",e.play.bind(e)),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,THREE.Group),o(t,[{key:"replay",value:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.hexStr="#"+a.default.scoreColorOff.toString(16),this.context.fillStyle=this.hexStr,this.context.font="bold 72px sans-serif",this.context.fillText(this.actualScore,this.canvas.width/2,this.canvas.height/2+32),this.material.map.needsUpdate=!0}},{key:"play",value:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.hexStr="#"+a.default.scoreColor.toString(16),this.context.fillStyle=this.hexStr,this.context.font="bold 72px sans-serif",this.context.fillText(this.actualScore,this.canvas.width/2,this.canvas.height/2+32),this.material.map.needsUpdate=!0}},{key:"setScore",value:function(e,t){var n=Number(e).toString();n.length>3?n="999":2===n.length?n="0"+n:1===n.length&&(n="00"+n),this.actualScore=n,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),t?(this.hexStr="#"+a.default.highscoreColor.toString(16),this.context.fillStyle=this.hexStr,this.context.font="bolder 28px sans-serif",this.context.fillText("YOUR BEST",this.canvas.width/2,this.canvas.height/2-42),this.context.font="bolder 96px sans-serif"):(this.hexStr="#"+a.default.scoreColor.toString(16),this.context.fillStyle=this.hexStr,this.context.font="bold 72px sans-serif"),this.context.fillText(n,this.canvas.width/2,this.canvas.height/2+32),this.material.map.needsUpdate=!0}},{key:"update",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}}]),t}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),s=n(1),a=(i=s)&&i.__esModule?i:{default:i};var c=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.app=r.app,e.canvas=document.createElement("canvas"),e.canvas.width=512,e.canvas.height=128,e.canvas.style.display="none",document.body.appendChild(e.canvas),e.context=e.canvas.getContext("2d"),e.context.font="bold 72px sans-serif",e.context.textAlign="center",e.hexStr="#"+a.default.scoreColor.toString(16),e.context.fillStyle=e.hexStr,e.material=new THREE.MeshBasicMaterial({transparent:!0}),e.material.map=new THREE.CanvasTexture(e.canvas),e.plane=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,.5),e.material),e.add(e.plane),e.app.on("replay",e.stop.bind(e)),e.app.on("endgame",e.stop.bind(e)),e.app.on("play",e.play.bind(e)),e.app.on("rew",e.rew.bind(e)),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,THREE.Group),o(t,[{key:"play",value:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.fillText("PLAY >",this.canvas.width/2,this.canvas.height/2+32),this.material.map.needsUpdate=!0,this.visible=!0}},{key:"rew",value:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.fillText("REW <<",this.canvas.width/2,this.canvas.height/2+32),this.material.map.needsUpdate=!0,this.visible=!0}},{key:"stop",value:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.material.map.needsUpdate=!0,this.visible=!1}},{key:"update",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}}]),t}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),s=n(1),a=(i=s)&&i.__esModule?i:{default:i};var c=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.app=r.app,e.canvas=document.createElement("canvas"),e.canvas.width=256,e.canvas.height=64,e.canvas.style.display="none",document.body.appendChild(e.canvas),e.context=e.canvas.getContext("2d"),e.context.font="bold 36px sans-serif",e.context.textAlign="center",e.context.beginPath(),e.hexStr="#"+a.default.wayColor.toString(16),e.context.fillStyle=e.hexStr,e.context.strokeStyle=e.hexStr,e.context.lineWidth=6,e.material=new THREE.MeshBasicMaterial({transparent:!0}),e.material.map=new THREE.CanvasTexture(e.canvas),e.plane=new THREE.Mesh(new THREE.PlaneBufferGeometry(1,.25),e.material),e.add(e.plane),e.plane.name="audio",e.app.inputManager.addCollider(e.plane),window.localStorage.getItem("unboring.js13k.back.audio")?e.audioActive=window.localStorage.getItem("unboring.js13k.back.audio"):e.audioActive="true",e.setAudio(),e.app.on("shuffleAudio",e.shuffleAudio.bind(e)),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,THREE.Group),o(t,[{key:"setAudio",value:function(){"true"===this.audioActive?this.on():this.off()}},{key:"shuffleAudio",value:function(){"true"===this.audioActive?this.audioActive="false":this.audioActive="true",this.audioActive!==window.localStorage.getItem("unboring.js13k.back.audio")&&window.localStorage.setItem("unboring.js13k.back.audio",this.audioActive),this.setAudio()}},{key:"on",value:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.beginPath(),this.context.fillText("AUDIO ON",this.canvas.width/2,this.canvas.height/2+16),this.context.moveTo(36,60),this.context.lineTo(220,60),this.context.stroke(),this.material.map.needsUpdate=!0,this.visible=!0}},{key:"off",value:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.beginPath(),this.context.fillText("AUDIO OFF",this.canvas.width/2,this.canvas.height/2+16),this.context.moveTo(30,60),this.context.lineTo(226,10),this.context.stroke(),this.material.map.needsUpdate=!0,this.visible=!0}},{key:"update",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}}]),t}();t.default=c},function(e,t,n){"use strict";var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),s=n(1),a=(i=s)&&i.__esModule?i:{default:i};e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=r.app,this.app.on("toggleVR",this.toggleVR.bind(this)),this.iOS=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform),this.raycaster=new THREE.Raycaster,this.intersected=[],this.tempMatrix=new THREE.Matrix4,this.mouse=new THREE.Vector2,this.intersection=null,this.colliders=[],this.swipe={sX:0,sY:0,eX:0,eY:0},this.addControllers(),document.addEventListener("mousemove",this.onDocumentMouseMove.bind(this),!1),document.addEventListener("click",this.onClick.bind(this),!1),document.addEventListener("touchstart",this.onTouchStart.bind(this),!1),document.addEventListener("touchmove",this.onTouchMove.bind(this),!1),document.addEventListener("touchend",this.onTouchEnd.bind(this),!1)}return o(e,[{key:"toggleVR",value:function(e){this.controller1.visible=e,this.controller2.visible=e}},{key:"addControllers",value:function(){this.controller1=this.app.renderer.vr.getController(0),this.controller1.addEventListener("selectstart",this.onSelectStart.bind(this)),this.controller1.addEventListener("selectend",this.onSelectEnd.bind(this)),this.app.scene.add(this.controller1),this.controller2=this.app.renderer.vr.getController(1),this.controller2.addEventListener("selectstart",this.onSelectStart),this.controller2.addEventListener("selectend",this.onSelectEnd),this.app.scene.add(this.controller2);var e=(new THREE.BufferGeometry).setFromPoints([new THREE.Vector3(0,0,0),new THREE.Vector3(0,0,-1)]),t=new THREE.LineBasicMaterial({color:16777215}),n=new THREE.Line(e,t);n.name="line",n.scale.z=5,this.controller1.add(n.clone()),this.controller2.add(n.clone())}},{key:"addCollider",value:function(e){e&&this.colliders.push(e)}},{key:"removeCollider",value:function(e){var t=this.colliders.indexOf(e);-1!==t&&this.colliders.splice(t,1)}},{key:"addColliders",value:function(e){e.forEach(this.addCollider.bind(this))}},{key:"resetColliders",value:function(){this.colliders=[]}},{key:"onSelectStart",value:function(e){var t=e.target,n=this.getIntersections(t);if(n.length>0)if("start"===n[0].object.name)this.app.emit("startgame");else if("audio"===n[0].object.name)this.app.emit("shuffleAudio");else if("way"===n[0].object.name.substr(0,3)){var i=parseInt(n[0].object.name.substr(3,1),10);this.app.emit("wayChanged",i)}}},{key:"onSelectEnd",value:function(){}},{key:"onDocumentMouseMove",value:function(e){e.preventDefault(),e.targetTouches||(this.mouse.x=e.pageX/window.innerWidth*2-1,this.mouse.y=-e.pageY/window.innerHeight*2+1,this.intersection?this.app.renderer.domElement.style.cursor="pointer":this.app.renderer.domElement.style.cursor="default",this.doFallbackRaycast())}},{key:"onClick",value:function(e){if(e.preventDefault(),e.touches&&this.iOS,this.mouse.x=e.pageX/window.innerWidth*2-1,this.mouse.y=-e.pageY/window.innerHeight*2+1,this.doFallbackRaycast(),this.intersected.length)if("start"===this.intersected[0].name)this.app.emit("startgame");else if("audio"===this.intersected[0].name)this.app.emit("shuffleAudio");else if("way"===this.intersected[0].name.substr(0,3)){var t=parseInt(this.intersected[0].name.substr(3,1),10);this.app.emit("wayChanged",t)}}},{key:"doFallbackRaycast",value:function(){this.cleanIntersected(),this.raycaster.setFromCamera(this.mouse,this.app.camera);var e=this.raycaster.intersectObjects(this.colliders);if(this.intersection=e.length>0?e[0]:null,null!==this.intersection){var t=this.intersection.object;"audio"!==t.name&&t.material.color.set(a.default.wayColorOver),this.intersected.push(t)}}},{key:"onTouchStart",value:function(e){var t=e.touches[0];this.swipe.sX=t.screenX,this.swipe.sY=t.screenY}},{key:"onTouchMove",value:function(e){var t=e.touches[0];this.swipe.eX=t.screenX,this.swipe.eY=t.screenY}},{key:"onTouchEnd",value:function(e){(this.swipe.eX-60>this.swipe.sX||this.swipe.eX+60<this.swipe.sX)&&this.swipe.eY<this.swipe.sY+60&&this.swipe.sY>this.swipe.eY-60&&this.swipe.eX>0?this.swipe.eX>this.swipe.sX?this.app.emit("wayLeft"):this.app.emit("wayRight"):this.iOS&&this.onClick(e)}},{key:"getIntersections",value:function(e){return this.tempMatrix.identity().extractRotation(e.matrixWorld),this.raycaster.ray.origin.setFromMatrixPosition(e.matrixWorld),this.raycaster.ray.direction.set(0,0,-1).applyMatrix4(this.tempMatrix),this.raycaster.intersectObjects(this.colliders)}},{key:"intersectObjects",value:function(e){if(void 0===e.userData.selected){var t=e.getObjectByName("line"),n=this.getIntersections(e);if(n.length>0){var i=n[0],o=i.object;"audio"!==o.name&&o.material.color.set(a.default.wayColorOver),this.intersected.push(o),t.scale.z=i.distance}else t.scale.z=5}}},{key:"cleanIntersected",value:function(){for(;this.intersected.length;){var e=this.intersected.pop();"audio"!==e.name&&e.material.color.set(a.default.wayColor)}}},{key:"updateVR",value:function(){this.cleanIntersected(),this.intersectObjects(this.controller1),this.intersectObjects(this.controller2)}}]),e}()},function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),r=a(n(1)),s=a(n(2));function a(e){return e&&e.__esModule?e:{default:e}}e.exports=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=o.app,this.world=t.world,this.rewards=t.rewards,this.scoreboard=t.scoreboard,this.correctName=0,this.gameStatus=0,this.highscore=window.localStorage.getItem("unboring.js13k.back"),this.highscore,this.app.emit("scoreboardchanged",this.highscore,!0),this.actualWay=2,this.newWay=2,this.correctWay=2,this.targetXpos=0,this.resetGameSettings(),this.app.on("startgame",this.startgame.bind(this)),this.app.on("wayChanged",this.wayChanged.bind(this)),this.app.on("wayLeft",this.wayLeft.bind(this)),this.app.on("wayRight",this.wayRight.bind(this)),this.app.on("correctWayChanged",this.correctWayChanged.bind(this)),this.app.on("tokensShuffled",this.tokensShuffled.bind(this)),this.app.on("setCorrectName",this.setCorrectName.bind(this)),this.app.on("solveOK",this.solveOK.bind(this)),this.app.on("solveERROR",this.solveERROR.bind(this)),this.app.on("solveRememberingOK",this.solveRememberingOK.bind(this)),this.app.on("solveRememberingERROR",this.solveRememberingERROR.bind(this))}return i(e,[{key:"startgame",value:function(){this.resetGameSettings(),this.gameStatus=1,this.app.emit("scoreboardchanged",this.score,!1),this.newCycle()}},{key:"wayChanged",value:function(e){this.newWay=e}},{key:"wayLeft",value:function(){this.newWay>0&&this.app.emit("wayChanged",this.newWay-1)}},{key:"wayRight",value:function(){this.newWay<4&&this.app.emit("wayChanged",this.newWay+1)}},{key:"resetGameSettings",value:function(){this.solved=!1,this.errorOnSolved=!1,this.gameSpeed=10,this.app.emit("speedChanged",this.gameSpeed),this.backSpeed=50,this.cycle=0,this.cyclesPerRound=1,this.caught=0,this.remembered=0,this.tokensStore=[],this.score=0}},{key:"getTargetX",value:function(e){return 2*(4-e)-4}},{key:"newRound",value:function(){this.app.scene.background=new THREE.Color(r.default.bgColor),this.app.scene.fog=new THREE.Fog(r.default.bgColor,0,45),5===this.cyclesPerRound?this.cyclesPerRound=1:this.cyclesPerRound+=1,this.gameSpeed+=1,this.gameSpeed>40&&(this.gameSpeed=40),this.app.emit("speedChanged",this.gameSpeed),this.cycle=0,this.caught=0,this.remembered=0,this.tokensStore=[],this.newCycle()}},{key:"newCycle",value:function(){if(this.errorOnSolved)return this.gameStatus=5,this.app.emit("wayChanged",2),void this.endgame();if(this.cycle<this.cyclesPerRound&&this.caught<this.cyclesPerRound)this.app.emit("replay"),this.gameStatus=2,this.app.emit("setHints",this.tokensStore,this.gameStatus,this.cycle,this.cyclesPerRound,this.remembered),this.setCorrectWay(),s.default.shuffle(r.default.colorArr),this.app.emit("shuffleTokens"),this.app.emit("setBigTokens",this.correctWay);else if(this.cycle<2*this.cyclesPerRound&&this.caught===this.cyclesPerRound){this.app.emit("rew"),this.app.scene.background=new THREE.Color(r.default.bgColorBack),this.app.scene.fog=new THREE.Fog(r.default.bgColorBack,0,45),this.gameStatus=3;var e=this.cycle%this.cyclesPerRound,t=this.cyclesPerRound-e-1;this.app.emit("setStoredTokens"),this.placeStoredTokens(t),this.app.emit("setHints",this.tokensStore,this.gameStatus,this.cycle,this.cyclesPerRound,this.remembered)}else if(this.cycle>=2*this.cyclesPerRound&&this.remembered<this.caught)this.app.emit("play"),this.app.scene.background=new THREE.Color(r.default.bgColor),this.app.scene.fog=new THREE.Fog(r.default.bgColor,0,45),this.gameStatus=4,this.app.emit("shuffleStoredTokens"),s.default.shuffle(this.tokensStore[this.remembered][0]),this.placeStoredTokens(this.remembered),this.app.emit("setCorrectRememberedWay",this.tokensStore,this.remembered),this.setDefaultTheme(),this.app.emit("setHints",this.tokensStore,this.gameStatus,this.cycle,this.cyclesPerRound,this.remembered);else{if(!(this.score>=999))return void this.newRound();this.gameStatus=6}this.app.emit("resetAtNewCycle"),this.solved=!1,this.world.position.z=0,this.cycle++}},{key:"catchingTick",value:function(e){this.world.position.z+=this.gameSpeed*e,Math.abs(this.world.position.z)>=r.default.wayLength/4-2&&!this.solved&&(this.app.emit("solve",this.actualWay,this.correctName),this.solved=!0),Math.abs(this.world.position.z)>=r.default.wayLength/4+2&&!this.world.tokens.visible&&this.postSolved(),Math.abs(this.world.position.z)>=r.default.wayLength/4+10&&this.newCycle()}},{key:"backTick",value:function(e){this.world.position.z-=this.backSpeed*e,this.world.position.z<-r.default.wayLength/3&&this.newCycle()}},{key:"rememberingTick",value:function(e){this.world.position.z+=this.gameSpeed*e,Math.abs(this.world.position.z)>=r.default.wayLength/4-2&&!this.solved&&(this.app.emit("solveRemembering",this.actualWay,this.correctWay),this.solved=!0),Math.abs(this.world.position.z)>=r.default.wayLength/4+2&&!this.world.tokens.visible&&this.postSolved(),Math.abs(this.world.position.z)>=r.default.wayLength/4+10&&this.newCycle()}},{key:"gameTick",value:function(e){switch(this.gameStatus){case 2:this.catchingTick(e);break;case 3:this.backTick(e);break;case 4:this.rememberingTick(e)}if(this.rewards.visible){var t=THREE.Math.lerp(2.5,this.rewards.scale.x,r.default.lerpSpeed);this.rewards.scale.set(t,t,t),this.rewards.position.z+=.01}}},{key:"setDefaultTheme",value:function(){var e="#"+r.default.bgColorBack.toString(16);document.querySelector('meta[name="theme-color"]').setAttribute("content",e)}},{key:"setCorrectWay",value:function(){this.correctWay=Math.floor(5*Math.random()),this.app.emit("showCorrectReward",this.correctWay)}},{key:"correctWayChanged",value:function(e){this.correctWay=e}},{key:"tokensShuffled",value:function(e){this.tokensStore[this.caught]=[[],[]];for(var t=0;t<e.length;t++){e[t].position.x=2*t-4;var n=r.default.colorArr[t];e[t].material.color.set(n),this.tokensStore[this.caught][0][t]=[e[t].name,n],e[t].name===this.correctWay&&(this.tokensStore[this.caught][1]=[e[t].name,n])}}},{key:"placeStoredTokens",value:function(e){for(var t=0;t<this.tokensStore[e][0].length;t++)this.app.emit("reorderTokens",this.tokensStore,t,e)}},{key:"setCorrectName",value:function(e){this.correctName=e}},{key:"postSolved",value:function(){this.app.emit("postSolved"),this.app.emit("setHints",this.tokensStore,this.gameStatus,this.cycle,this.cyclesPerRound,this.remembered)}},{key:"solveOK",value:function(){this.caught+=1}},{key:"solveERROR",value:function(){this.errorOnSolved=!0}},{key:"solveRememberingOK",value:function(){this.remembered+=1,this.score+=1,this.app.emit("scoreboardchanged",this.score,!1)}},{key:"solveRememberingERROR",value:function(){this.errorOnSolved=!0}},{key:"endgame",value:function(){this.app.emit("endgame"),this.app.emit("wayChanged",2),this.app.scene.background=new THREE.Color(r.default.bgColor),this.app.scene.fog=new THREE.Fog(r.default.bgColor,0,45),this.score>Number(this.highscore)&&(this.highscore=this.score,window.localStorage.setItem("unboring.js13k.back",this.score)),this.app.emit("scoreboardchanged",this.highscore,!0),this.setDefaultTheme()}},{key:"update",value:function(e){this.gameStatus>0&&this.gameStatus<5&&this.gameTick(e),this.newWay!==this.actualWay&&(this.actualWay=this.newWay,this.targetXpos=this.getTargetX(this.newWay)),this.targetXpos!==this.world.position.x&&(this.world.position.x=THREE.Math.lerp(this.targetXpos,this.world.position.x,r.default.lerpSpeed))}}]),e}()},function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=o.app,window.AudioContext=window.AudioContext||window.webkitAudioContext,this.audioContext||(this.audioContext=new AudioContext),this.gameActive=!1,this.actualTempo=.3,this.backTempo=.1,this.tempo=this.actualTempo,this.counter=0,this.loopSeq=[0,0,14,14,0,0,12,12,0,0,11,11,0,0,12,12,0,14,12,11,12,0,0,9,8,7,0,7,0,7,0,7,0,0],this.reverseSeq=this.loopSeq.slice(0).reverse(),this.errorSeq=[0,16,17,19,19,0],this.okSeq=[0,2,0],this.clickSeq=[0,13,0],this.activeSeq=[],this.sequencePoint=0,this.actualLoopPoint=0,window.localStorage.getItem("unboring.js13k.back.audio")?this.audioActive=window.localStorage.getItem("unboring.js13k.back.audio"):this.audioActive="false",this.app.on("startgame",this.startgame.bind(this)),this.app.on("endgame",this.endgame.bind(this)),this.app.on("solveOK",this.solveOK.bind(this)),this.app.on("solveRememberingOK",this.solveOK.bind(this)),this.app.on("solveERROR",this.solveERROR.bind(this)),this.app.on("solveRememberingERROR",this.solveERROR.bind(this)),this.app.on("play",this.playEvent.bind(this)),this.app.on("rew",this.rew.bind(this)),this.app.on("speedChanged",this.speedChanged.bind(this)),this.app.on("shuffleAudio",this.shuffleAudio.bind(this))}return i(e,[{key:"shuffleAudio",value:function(){"true"===this.audioActive?this.audioActive="false":this.audioActive="true"}},{key:"startgame",value:function(){var e=this.audioContext.createOscillator();"true"===this.audioActive?e.frequency.value=440*Math.pow(1.06,7):(console.log(this.audioActive),e.frequency.value=0),e.connect(this.audioContext.destination),e.start(this.audioContext.currentTime),e.stop(this.audioContext.currentTime+this.actualTempo),this.gameActive=!0,this.activeSeq=this.loopSeq,this.sequencePoint=0}},{key:"endgame",value:function(){this.gameActive=!1,this.activeSeq=[]}},{key:"speedChanged",value:function(e){this.actualTempo=.3-Math.min(.2,e/200),this.tempo=this.actualTempo}},{key:"solveOK",value:function(){this.activeSeq=this.okSeq,this.actualLoopPoint=this.sequencePoint,this.sequencePoint=0}},{key:"solveERROR",value:function(){this.activeSeq=this.errorSeq,this.sequencePoint=0}},{key:"playEvent",value:function(){this.tempo=this.actualTempo}},{key:"rew",value:function(){this.tempo=this.backTempo,this.activeSeq=this.reverseSeq,this.activeSeq!==this.reverseSeq&&(this.sequencePoint=0)}},{key:"playNote",value:function(e){var t=this.audioContext.createOscillator();t.frequency.value=440*Math.pow(1.06,12-e),t.connect(this.audioContext.destination),t.start(this.audioContext.currentTime),t.stop(this.audioContext.currentTime+this.actualTempo)}},{key:"tick",value:function(){"false"!==this.audioActive&&(this.sequencePoint<this.activeSeq.length?(this.activeSeq[this.sequencePoint]&&(this.playNote(this.activeSeq[this.sequencePoint]),this.app.emit("synth",this.activeSeq[this.sequencePoint])),this.sequencePoint+=1):this.gameActive?this.activeSeq!==this.loopSeq?(this.activeSeq=this.loopSeq,this.sequencePoint=this.actualLoopPoint):this.sequencePoint=0:(this.activeSeq=[],this.sequencePoint=0))}},{key:"update",value:function(e){this.counter+=e,this.counter>this.tempo&&(this.tick(),this.counter=0)}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=(r(n(23)),r(n(24)),n(0));function r(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.app=o.app,e.app.on("resetAtNewCycle",e.resetAtNewCycle.bind(e)),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,THREE.Group),i(t,[{key:"resetAtNewCycle",value:function(){}},{key:"update",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}}]),t}();t.default=s},function(e,t,n){"use strict";n.r(t),t.default="#define GLSLIFY 1\nvarying vec3 vWorldPosition;\n\nvoid main() {\n\n\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\tvWorldPosition = worldPosition.xyz;\n\t\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}"},function(e,t,n){"use strict";n.r(t),t.default="#define GLSLIFY 1\nuniform vec3 colorTop;\nuniform vec3 colorBottom;\n\nvarying vec3 vWorldPosition;\n\nvoid main()\n{\n\n\tvec3 pointOnSphere = normalize(vWorldPosition.xyz);\n\tfloat f = 1.0;\n\tif(pointOnSphere.y > - 0.2){\n\t\tf = sin(pointOnSphere.y * 2.0);\n\t}\n\n\tgl_FragColor = vec4(mix(colorBottom,colorTop, f ), 1.0);\n\n}\n"}]);
//# sourceMappingURL=bundle.js.map